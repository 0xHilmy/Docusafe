var lf=Object.defineProperty;var ff=(r,t,e)=>t in r?lf(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ge=(r,t,e)=>(ff(r,typeof t!="symbol"?t+"":t,e),e);import{g as va,c as sn,a as wi,r as ft,R as Ea}from"./vendor-a421237f.js";var gt={},vs={};vs.byteLength=pf;vs.toByteArray=mf;vs.fromByteArray=bf;var un=[],Je=[],hf=typeof Uint8Array<"u"?Uint8Array:Array,oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var dr=0,df=oo.length;dr<df;++dr)un[dr]=oo[dr],Je[oo.charCodeAt(dr)]=dr;Je["-".charCodeAt(0)]=62;Je["_".charCodeAt(0)]=63;function ru(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function pf(r){var t=ru(r),e=t[0],n=t[1];return(e+n)*3/4-n}function gf(r,t,e){return(t+e)*3/4-e}function mf(r){var t,e=ru(r),n=e[0],s=e[1],i=new hf(gf(r,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)t=Je[r.charCodeAt(u)]<<18|Je[r.charCodeAt(u+1)]<<12|Je[r.charCodeAt(u+2)]<<6|Je[r.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Je[r.charCodeAt(u)]<<2|Je[r.charCodeAt(u+1)]>>4,i[o++]=t&255),s===1&&(t=Je[r.charCodeAt(u)]<<10|Je[r.charCodeAt(u+1)]<<4|Je[r.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function wf(r){return un[r>>18&63]+un[r>>12&63]+un[r>>6&63]+un[r&63]}function yf(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(wf(n));return s.join("")}function bf(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,a=e-n;o<a;o+=i)s.push(yf(r,o,o+i>a?a:o+i));return n===1?(t=r[e-1],s.push(un[t>>2]+un[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(un[t>>10]+un[t>>4&63]+un[t<<2&63]+"=")),s.join("")}var _a={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_a.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,p=u>>1,g=-7,_=e?s-1:0,R=e?-1:1,y=r[t+_];for(_+=R,i=y&(1<<-g)-1,y>>=-g,g+=a;g>0;i=i*256+r[t+_],_+=R,g-=8);for(o=i&(1<<-g)-1,i>>=-g,g+=n;g>0;o=o*256+r[t+_],_+=R,g-=8);if(i===0)i=1-p;else{if(i===u)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-p}return(y?-1:1)*o*Math.pow(2,i-n)};_a.write=function(r,t,e,n,s,i){var o,a,u,p=i*8-s-1,g=(1<<p)-1,_=g>>1,R=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:i-1,M=n?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=g):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+_>=1?t+=R/u:t+=R*Math.pow(2,1-_),t*u>=2&&(o++,u/=2),o+_>=g?(a=0,o=g):o+_>=1?(a=(t*u-1)*Math.pow(2,s),o=o+_):(a=t*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;r[e+y]=a&255,y+=M,a/=256,s-=8);for(o=o<<s|a,p+=s;p>0;r[e+y]=o&255,y+=M,o/=256,p-=8);r[e+y-M]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=vs,e=_a,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=C,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const w=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(w,l),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const l=new Uint8Array(w);return Object.setPrototypeOf(l,a.prototype),l}function a(w,l,f){if(typeof w=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(w)}return u(w,l,f)}a.poolSize=8192;function u(w,l,f){if(typeof w=="string")return R(w,l);if(ArrayBuffer.isView(w))return M(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(qe(w,ArrayBuffer)||w&&qe(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qe(w,SharedArrayBuffer)||w&&qe(w.buffer,SharedArrayBuffer)))return I(w,l,f);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=w.valueOf&&w.valueOf();if(x!=null&&x!==w)return a.from(x,l,f);const U=A(w);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),l,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,l,f){return u(w,l,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function g(w,l,f){return p(w),w<=0?o(w):l!==void 0?typeof f=="string"?o(w).fill(l,f):o(w).fill(l):o(w)}a.alloc=function(w,l,f){return g(w,l,f)};function _(w){return p(w),o(w<0?0:T(w)|0)}a.allocUnsafe=function(w){return _(w)},a.allocUnsafeSlow=function(w){return _(w)};function R(w,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const f=L(w,l)|0;let x=o(f);const U=x.write(w,l);return U!==f&&(x=x.slice(0,U)),x}function y(w){const l=w.length<0?0:T(w.length)|0,f=o(l);for(let x=0;x<l;x+=1)f[x]=w[x]&255;return f}function M(w){if(qe(w,Uint8Array)){const l=new Uint8Array(w);return I(l.buffer,l.byteOffset,l.byteLength)}return y(w)}function I(w,l,f){if(l<0||w.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<l+(f||0))throw new RangeError('"length" is outside of buffer bounds');let x;return l===void 0&&f===void 0?x=new Uint8Array(w):f===void 0?x=new Uint8Array(w,l):x=new Uint8Array(w,l,f),Object.setPrototypeOf(x,a.prototype),x}function A(w){if(a.isBuffer(w)){const l=T(w.length)|0,f=o(l);return f.length===0||w.copy(f,0,0,l),f}if(w.length!==void 0)return typeof w.length!="number"||Nt(w.length)?o(0):y(w);if(w.type==="Buffer"&&Array.isArray(w.data))return y(w.data)}function T(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function C(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,f){if(qe(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),qe(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(l)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let x=l.length,U=f.length;for(let P=0,$=Math.min(x,U);P<$;++P)if(l[P]!==f[P]){x=l[P],U=f[P];break}return x<U?-1:U<x?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);let x;if(f===void 0)for(f=0,x=0;x<l.length;++x)f+=l[x].length;const U=a.allocUnsafe(f);let P=0;for(x=0;x<l.length;++x){let $=l[x];if(qe($,Uint8Array))P+$.length>U.length?(a.isBuffer($)||($=a.from($)),$.copy(U,P)):Uint8Array.prototype.set.call(U,$,P);else if(a.isBuffer($))$.copy(U,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=$.length}return U};function L(w,l){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||qe(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const f=w.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&f===0)return 0;let U=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return Lt(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Ft(w).length;default:if(U)return x?-1:Lt(w).length;l=(""+l).toLowerCase(),U=!0}}a.byteLength=L;function W(w,l,f){let x=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,l>>>=0,f<=l))return"";for(w||(w="utf8");;)switch(w){case"hex":return k(this,l,f);case"utf8":case"utf-8":return c(this,l,f);case"ascii":return v(this,l,f);case"latin1":case"binary":return S(this,l,f);case"base64":return b(this,l,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,l,f);default:if(x)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),x=!0}}a.prototype._isBuffer=!0;function O(w,l,f){const x=w[l];w[l]=w[f],w[f]=x}a.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)O(this,f,f+1);return this},a.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)O(this,f,f+3),O(this,f+1,f+2);return this},a.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)O(this,f,f+7),O(this,f+1,f+6),O(this,f+2,f+5),O(this,f+3,f+4);return this},a.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?c(this,0,l):W.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){let l="";const f=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,f,x,U,P){if(qe(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),x===void 0&&(x=l?l.length:0),U===void 0&&(U=0),P===void 0&&(P=this.length),f<0||x>l.length||U<0||P>this.length)throw new RangeError("out of range index");if(U>=P&&f>=x)return 0;if(U>=P)return-1;if(f>=x)return 1;if(f>>>=0,x>>>=0,U>>>=0,P>>>=0,this===l)return 0;let $=P-U,mt=x-f;const pt=Math.min($,mt),dt=this.slice(U,P),Tt=l.slice(f,x);for(let ht=0;ht<pt;++ht)if(dt[ht]!==Tt[ht]){$=dt[ht],mt=Tt[ht];break}return $<mt?-1:mt<$?1:0};function q(w,l,f,x,U){if(w.length===0)return-1;if(typeof f=="string"?(x=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Nt(f)&&(f=U?0:w.length-1),f<0&&(f=w.length+f),f>=w.length){if(U)return-1;f=w.length-1}else if(f<0)if(U)f=0;else return-1;if(typeof l=="string"&&(l=a.from(l,x)),a.isBuffer(l))return l.length===0?-1:j(w,l,f,x,U);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(w,l,f):Uint8Array.prototype.lastIndexOf.call(w,l,f):j(w,[l],f,x,U);throw new TypeError("val must be string, number or Buffer")}function j(w,l,f,x,U){let P=1,$=w.length,mt=l.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(w.length<2||l.length<2)return-1;P=2,$/=2,mt/=2,f/=2}function pt(Tt,ht){return P===1?Tt[ht]:Tt.readUInt16BE(ht*P)}let dt;if(U){let Tt=-1;for(dt=f;dt<$;dt++)if(pt(w,dt)===pt(l,Tt===-1?0:dt-Tt)){if(Tt===-1&&(Tt=dt),dt-Tt+1===mt)return Tt*P}else Tt!==-1&&(dt-=dt-Tt),Tt=-1}else for(f+mt>$&&(f=$-mt),dt=f;dt>=0;dt--){let Tt=!0;for(let ht=0;ht<mt;ht++)if(pt(w,dt+ht)!==pt(l,ht)){Tt=!1;break}if(Tt)return dt}return-1}a.prototype.includes=function(l,f,x){return this.indexOf(l,f,x)!==-1},a.prototype.indexOf=function(l,f,x){return q(this,l,f,x,!0)},a.prototype.lastIndexOf=function(l,f,x){return q(this,l,f,x,!1)};function G(w,l,f,x){f=Number(f)||0;const U=w.length-f;x?(x=Number(x),x>U&&(x=U)):x=U;const P=l.length;x>P/2&&(x=P/2);let $;for($=0;$<x;++$){const mt=parseInt(l.substr($*2,2),16);if(Nt(mt))return $;w[f+$]=mt}return $}function D(w,l,f,x){return kt(Lt(l,w.length-f),w,f,x)}function V(w,l,f,x){return kt(Kt(l),w,f,x)}function K(w,l,f,x){return kt(Ft(l),w,f,x)}function H(w,l,f,x){return kt(Ai(l,w.length-f),w,f,x)}a.prototype.write=function(l,f,x,U){if(f===void 0)U="utf8",x=this.length,f=0;else if(x===void 0&&typeof f=="string")U=f,x=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(x)?(x=x>>>0,U===void 0&&(U="utf8")):(U=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const P=this.length-f;if((x===void 0||x>P)&&(x=P),l.length>0&&(x<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let $=!1;for(;;)switch(U){case"hex":return G(this,l,f,x);case"utf8":case"utf-8":return D(this,l,f,x);case"ascii":case"latin1":case"binary":return V(this,l,f,x);case"base64":return K(this,l,f,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,l,f,x);default:if($)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),$=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(w,l,f){return l===0&&f===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(l,f))}function c(w,l,f){f=Math.min(w.length,f);const x=[];let U=l;for(;U<f;){const P=w[U];let $=null,mt=P>239?4:P>223?3:P>191?2:1;if(U+mt<=f){let pt,dt,Tt,ht;switch(mt){case 1:P<128&&($=P);break;case 2:pt=w[U+1],(pt&192)===128&&(ht=(P&31)<<6|pt&63,ht>127&&($=ht));break;case 3:pt=w[U+1],dt=w[U+2],(pt&192)===128&&(dt&192)===128&&(ht=(P&15)<<12|(pt&63)<<6|dt&63,ht>2047&&(ht<55296||ht>57343)&&($=ht));break;case 4:pt=w[U+1],dt=w[U+2],Tt=w[U+3],(pt&192)===128&&(dt&192)===128&&(Tt&192)===128&&(ht=(P&15)<<18|(pt&63)<<12|(dt&63)<<6|Tt&63,ht>65535&&ht<1114112&&($=ht))}}$===null?($=65533,mt=1):$>65535&&($-=65536,x.push($>>>10&1023|55296),$=56320|$&1023),x.push($),U+=mt}return m(x)}const d=4096;function m(w){const l=w.length;if(l<=d)return String.fromCharCode.apply(String,w);let f="",x=0;for(;x<l;)f+=String.fromCharCode.apply(String,w.slice(x,x+=d));return f}function v(w,l,f){let x="";f=Math.min(w.length,f);for(let U=l;U<f;++U)x+=String.fromCharCode(w[U]&127);return x}function S(w,l,f){let x="";f=Math.min(w.length,f);for(let U=l;U<f;++U)x+=String.fromCharCode(w[U]);return x}function k(w,l,f){const x=w.length;(!l||l<0)&&(l=0),(!f||f<0||f>x)&&(f=x);let U="";for(let P=l;P<f;++P)U+=$t[w[P]];return U}function N(w,l,f){const x=w.slice(l,f);let U="";for(let P=0;P<x.length-1;P+=2)U+=String.fromCharCode(x[P]+x[P+1]*256);return U}a.prototype.slice=function(l,f){const x=this.length;l=~~l,f=f===void 0?x:~~f,l<0?(l+=x,l<0&&(l=0)):l>x&&(l=x),f<0?(f+=x,f<0&&(f=0)):f>x&&(f=x),f<l&&(f=l);const U=this.subarray(l,f);return Object.setPrototypeOf(U,a.prototype),U};function E(w,l,f){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+l>f)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,f,x){l=l>>>0,f=f>>>0,x||E(l,f,this.length);let U=this[l],P=1,$=0;for(;++$<f&&(P*=256);)U+=this[l+$]*P;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,f,x){l=l>>>0,f=f>>>0,x||E(l,f,this.length);let U=this[l+--f],P=1;for(;f>0&&(P*=256);)U+=this[l+--f]*P;return U},a.prototype.readUint8=a.prototype.readUInt8=function(l,f){return l=l>>>0,f||E(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||E(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||E(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||E(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||E(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readBigUInt64LE=en(function(l){l=l>>>0,yn(l,"offset");const f=this[l],x=this[l+7];(f===void 0||x===void 0)&&Bt(l,this.length-8);const U=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,P=this[++l]+this[++l]*2**8+this[++l]*2**16+x*2**24;return BigInt(U)+(BigInt(P)<<BigInt(32))}),a.prototype.readBigUInt64BE=en(function(l){l=l>>>0,yn(l,"offset");const f=this[l],x=this[l+7];(f===void 0||x===void 0)&&Bt(l,this.length-8);const U=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],P=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+x;return(BigInt(U)<<BigInt(32))+BigInt(P)}),a.prototype.readIntLE=function(l,f,x){l=l>>>0,f=f>>>0,x||E(l,f,this.length);let U=this[l],P=1,$=0;for(;++$<f&&(P*=256);)U+=this[l+$]*P;return P*=128,U>=P&&(U-=Math.pow(2,8*f)),U},a.prototype.readIntBE=function(l,f,x){l=l>>>0,f=f>>>0,x||E(l,f,this.length);let U=f,P=1,$=this[l+--U];for(;U>0&&(P*=256);)$+=this[l+--U]*P;return P*=128,$>=P&&($-=Math.pow(2,8*f)),$},a.prototype.readInt8=function(l,f){return l=l>>>0,f||E(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,f){l=l>>>0,f||E(l,2,this.length);const x=this[l]|this[l+1]<<8;return x&32768?x|4294901760:x},a.prototype.readInt16BE=function(l,f){l=l>>>0,f||E(l,2,this.length);const x=this[l+1]|this[l]<<8;return x&32768?x|4294901760:x},a.prototype.readInt32LE=function(l,f){return l=l>>>0,f||E(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,f){return l=l>>>0,f||E(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readBigInt64LE=en(function(l){l=l>>>0,yn(l,"offset");const f=this[l],x=this[l+7];(f===void 0||x===void 0)&&Bt(l,this.length-8);const U=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(x<<24);return(BigInt(U)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),a.prototype.readBigInt64BE=en(function(l){l=l>>>0,yn(l,"offset");const f=this[l],x=this[l+7];(f===void 0||x===void 0)&&Bt(l,this.length-8);const U=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(U)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+x)}),a.prototype.readFloatLE=function(l,f){return l=l>>>0,f||E(l,4,this.length),e.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,f){return l=l>>>0,f||E(l,4,this.length),e.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||E(l,8,this.length),e.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||E(l,8,this.length),e.read(this,l,!1,52,8)};function h(w,l,f,x,U,P){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>U||l<P)throw new RangeError('"value" argument is out of bounds');if(f+x>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,f,x,U){if(l=+l,f=f>>>0,x=x>>>0,!U){const mt=Math.pow(2,8*x)-1;h(this,l,f,x,mt,0)}let P=1,$=0;for(this[f]=l&255;++$<x&&(P*=256);)this[f+$]=l/P&255;return f+x},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,f,x,U){if(l=+l,f=f>>>0,x=x>>>0,!U){const mt=Math.pow(2,8*x)-1;h(this,l,f,x,mt,0)}let P=x-1,$=1;for(this[f+P]=l&255;--P>=0&&($*=256);)this[f+P]=l/$&255;return f+x},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,1,255,0),this[f]=l&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function B(w,l,f,x,U){Pt(l,x,U,w,f,7);let P=Number(l&BigInt(4294967295));w[f++]=P,P=P>>8,w[f++]=P,P=P>>8,w[f++]=P,P=P>>8,w[f++]=P;let $=Number(l>>BigInt(32)&BigInt(4294967295));return w[f++]=$,$=$>>8,w[f++]=$,$=$>>8,w[f++]=$,$=$>>8,w[f++]=$,f}function nt(w,l,f,x,U){Pt(l,x,U,w,f,7);let P=Number(l&BigInt(4294967295));w[f+7]=P,P=P>>8,w[f+6]=P,P=P>>8,w[f+5]=P,P=P>>8,w[f+4]=P;let $=Number(l>>BigInt(32)&BigInt(4294967295));return w[f+3]=$,$=$>>8,w[f+2]=$,$=$>>8,w[f+1]=$,$=$>>8,w[f]=$,f+8}a.prototype.writeBigUInt64LE=en(function(l,f=0){return B(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=en(function(l,f=0){return nt(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(l,f,x,U){if(l=+l,f=f>>>0,!U){const pt=Math.pow(2,8*x-1);h(this,l,f,x,pt-1,-pt)}let P=0,$=1,mt=0;for(this[f]=l&255;++P<x&&($*=256);)l<0&&mt===0&&this[f+P-1]!==0&&(mt=1),this[f+P]=(l/$>>0)-mt&255;return f+x},a.prototype.writeIntBE=function(l,f,x,U){if(l=+l,f=f>>>0,!U){const pt=Math.pow(2,8*x-1);h(this,l,f,x,pt-1,-pt)}let P=x-1,$=1,mt=0;for(this[f+P]=l&255;--P>=0&&($*=256);)l<0&&mt===0&&this[f+P+1]!==0&&(mt=1),this[f+P]=(l/$>>0)-mt&255;return f+x},a.prototype.writeInt8=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},a.prototype.writeInt16LE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},a.prototype.writeInt16BE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},a.prototype.writeInt32LE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},a.prototype.writeInt32BE=function(l,f,x){return l=+l,f=f>>>0,x||h(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},a.prototype.writeBigInt64LE=en(function(l,f=0){return B(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=en(function(l,f=0){return nt(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(w,l,f,x,U,P){if(f+x>w.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function rt(w,l,f,x,U){return l=+l,f=f>>>0,U||Q(w,l,f,4),e.write(w,l,f,x,23,4),f+4}a.prototype.writeFloatLE=function(l,f,x){return rt(this,l,f,!0,x)},a.prototype.writeFloatBE=function(l,f,x){return rt(this,l,f,!1,x)};function Rt(w,l,f,x,U){return l=+l,f=f>>>0,U||Q(w,l,f,8),e.write(w,l,f,x,52,8),f+8}a.prototype.writeDoubleLE=function(l,f,x){return Rt(this,l,f,!0,x)},a.prototype.writeDoubleBE=function(l,f,x){return Rt(this,l,f,!1,x)},a.prototype.copy=function(l,f,x,U){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(x||(x=0),!U&&U!==0&&(U=this.length),f>=l.length&&(f=l.length),f||(f=0),U>0&&U<x&&(U=x),U===x||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),l.length-f<U-x&&(U=l.length-f+x);const P=U-x;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,x,U):Uint8Array.prototype.set.call(l,this.subarray(x,U),f),P},a.prototype.fill=function(l,f,x,U){if(typeof l=="string"){if(typeof f=="string"?(U=f,f=0,x=this.length):typeof x=="string"&&(U=x,x=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(l.length===1){const $=l.charCodeAt(0);(U==="utf8"&&$<128||U==="latin1")&&(l=$)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<x)throw new RangeError("Out of range index");if(x<=f)return this;f=f>>>0,x=x===void 0?this.length:x>>>0,l||(l=0);let P;if(typeof l=="number")for(P=f;P<x;++P)this[P]=l;else{const $=a.isBuffer(l)?l:a.from(l,U),mt=$.length;if(mt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(P=0;P<x-f;++P)this[P+f]=$[P%mt]}return this};const yt={};function vt(w,l,f){yt[w]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(w,l){return`The "${w}" argument must be of type number. Received type ${typeof l}`},TypeError),vt("ERR_OUT_OF_RANGE",function(w,l,f){let x=`The value of "${w}" is out of range.`,U=f;return Number.isInteger(f)&&Math.abs(f)>2**32?U=wn(String(f)):typeof f=="bigint"&&(U=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(U=wn(U)),U+="n"),x+=` It must be ${l}. Received ${U}`,x},RangeError);function wn(w){let l="",f=w.length;const x=w[0]==="-"?1:0;for(;f>=x+4;f-=3)l=`_${w.slice(f-3,f)}${l}`;return`${w.slice(0,f)}${l}`}function xt(w,l,f){yn(l,"offset"),(w[l]===void 0||w[l+f]===void 0)&&Bt(l,w.length-(f+1))}function Pt(w,l,f,x,U,P){if(w>f||w<l){const $=typeof l=="bigint"?"n":"";let mt;throw P>3?l===0||l===BigInt(0)?mt=`>= 0${$} and < 2${$} ** ${(P+1)*8}${$}`:mt=`>= -(2${$} ** ${(P+1)*8-1}${$}) and < 2 ** ${(P+1)*8-1}${$}`:mt=`>= ${l}${$} and <= ${f}${$}`,new yt.ERR_OUT_OF_RANGE("value",mt,w)}xt(x,U,P)}function yn(w,l){if(typeof w!="number")throw new yt.ERR_INVALID_ARG_TYPE(l,"number",w)}function Bt(w,l,f){throw Math.floor(w)!==w?(yn(w,f),new yt.ERR_OUT_OF_RANGE(f||"offset","an integer",w)):l<0?new yt.ERR_BUFFER_OUT_OF_BOUNDS:new yt.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${l}`,w)}const qt=/[^+/0-9A-Za-z-_]/g;function xi(w){if(w=w.split("=")[0],w=w.trim().replace(qt,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function Lt(w,l){l=l||1/0;let f;const x=w.length;let U=null;const P=[];for(let $=0;$<x;++$){if(f=w.charCodeAt($),f>55295&&f<57344){if(!U){if(f>56319){(l-=3)>-1&&P.push(239,191,189);continue}else if($+1===x){(l-=3)>-1&&P.push(239,191,189);continue}U=f;continue}if(f<56320){(l-=3)>-1&&P.push(239,191,189),U=f;continue}f=(U-55296<<10|f-56320)+65536}else U&&(l-=3)>-1&&P.push(239,191,189);if(U=null,f<128){if((l-=1)<0)break;P.push(f)}else if(f<2048){if((l-=2)<0)break;P.push(f>>6|192,f&63|128)}else if(f<65536){if((l-=3)<0)break;P.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((l-=4)<0)break;P.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return P}function Kt(w){const l=[];for(let f=0;f<w.length;++f)l.push(w.charCodeAt(f)&255);return l}function Ai(w,l){let f,x,U;const P=[];for(let $=0;$<w.length&&!((l-=2)<0);++$)f=w.charCodeAt($),x=f>>8,U=f%256,P.push(U),P.push(x);return P}function Ft(w){return t.toByteArray(xi(w))}function kt(w,l,f,x){let U;for(U=0;U<x&&!(U+f>=l.length||U>=w.length);++U)l[U+f]=w[U];return U}function qe(w,l){return w instanceof l||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===l.name}function Nt(w){return w!==w}const $t=function(){const w="0123456789abcdef",l=new Array(256);for(let f=0;f<16;++f){const x=f*16;for(let U=0;U<16;++U)l[x+U]=w[f]+w[U]}return l}();function en(w){return typeof BigInt>"u"?jt:w}function jt(){throw new Error("BigInt not supported")}})(gt);const pr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sa(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Wo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function fn(r,...t){if(!Sa(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function vf(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Wo(r.outputLen),Wo(r.blockLen)}function es(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Ef(r,t){fn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Lr(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function ao(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function an(r,t){return r<<32-t|r>>>t}const iu=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),_f=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Nr(r){if(fn(r),iu)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=_f[r[e]];return t}const bn={_0:48,_9:57,A:65,F:70,a:97,f:102};function cc(r){if(r>=bn._0&&r<=bn._9)return r-bn._0;if(r>=bn.A&&r<=bn.F)return r-(bn.A-10);if(r>=bn.a&&r<=bn.f)return r-(bn.a-10)}function xa(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(iu)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=cc(r.charCodeAt(i)),a=cc(r.charCodeAt(i+1));if(o===void 0||a===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function Sf(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Aa(r){return typeof r=="string"&&(r=Sf(r)),fn(r),r}function Mn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];fn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class su{}function ou(r){const t=n=>r().update(Aa(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function au(r=32){if(pr&&typeof pr.getRandomValues=="function")return pr.getRandomValues(new Uint8Array(r));if(pr&&typeof pr.randomBytes=="function")return Uint8Array.from(pr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function xf(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),u=n?4:0,p=n?0:4;r.setUint32(t+u,o,n),r.setUint32(t+p,a,n)}function Af(r,t,e){return r&t^~r&e}function Bf(r,t,e){return r&t^r&e^t&e}class cu extends su{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=ao(this.buffer)}update(t){es(this),t=Aa(t),fn(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=ao(t);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){es(this),Ef(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Lr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let _=o;_<s;_++)e[_]=0;xf(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=ao(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<p;_++)a.setUint32(4*_,g[_],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Tn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Me=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Bi=BigInt(2**32-1),uc=BigInt(32);function Mf(r,t=!1){return t?{h:Number(r&Bi),l:Number(r>>uc&Bi)}:{h:Number(r>>uc&Bi)|0,l:Number(r&Bi)|0}}function If(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:a}=Mf(r[i],t);[n[i],s[i]]=[o,a]}return[n,s]}const lc=(r,t,e)=>r>>>e,fc=(r,t,e)=>r<<32-e|t>>>e,gr=(r,t,e)=>r>>>e|t<<32-e,mr=(r,t,e)=>r<<32-e|t>>>e,Mi=(r,t,e)=>r<<64-e|t>>>e-32,Ii=(r,t,e)=>r>>>e-32|t<<64-e;function vn(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Rf=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),kf=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Tf=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Cf=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Lf=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Nf=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Uf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cn=new Uint32Array(64);class Of extends cu{constructor(t=32){super(64,t,8,!1),this.A=Tn[0]|0,this.B=Tn[1]|0,this.C=Tn[2]|0,this.D=Tn[3]|0,this.E=Tn[4]|0,this.F=Tn[5]|0,this.G=Tn[6]|0,this.H=Tn[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[t,e,n,s,i,o,a,u]}set(t,e,n,s,i,o,a,u){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,e){for(let _=0;_<16;_++,e+=4)Cn[_]=t.getUint32(e,!1);for(let _=16;_<64;_++){const R=Cn[_-15],y=Cn[_-2],M=an(R,7)^an(R,18)^R>>>3,I=an(y,17)^an(y,19)^y>>>10;Cn[_]=I+Cn[_-7]+M+Cn[_-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:p,H:g}=this;for(let _=0;_<64;_++){const R=an(a,6)^an(a,11)^an(a,25),y=g+R+Af(a,u,p)+Uf[_]+Cn[_]|0,I=(an(n,2)^an(n,13)^an(n,22))+Bf(n,s,i)|0;g=p,p=u,u=a,a=o+y|0,o=i,i=s,s=n,n=y+I|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(n,s,i,o,a,u,p,g)}roundClean(){Lr(Cn)}destroy(){this.set(0,0,0,0,0,0,0,0),Lr(this.buffer)}}const uu=(()=>If(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),Pf=(()=>uu[0])(),Ff=(()=>uu[1])(),Ln=new Uint32Array(80),Nn=new Uint32Array(80);class Wf extends cu{constructor(t=64){super(128,t,16,!1),this.Ah=Me[0]|0,this.Al=Me[1]|0,this.Bh=Me[2]|0,this.Bl=Me[3]|0,this.Ch=Me[4]|0,this.Cl=Me[5]|0,this.Dh=Me[6]|0,this.Dl=Me[7]|0,this.Eh=Me[8]|0,this.El=Me[9]|0,this.Fh=Me[10]|0,this.Fl=Me[11]|0,this.Gh=Me[12]|0,this.Gl=Me[13]|0,this.Hh=Me[14]|0,this.Hl=Me[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:p,El:g,Fh:_,Fl:R,Gh:y,Gl:M,Hh:I,Hl:A}=this;return[t,e,n,s,i,o,a,u,p,g,_,R,y,M,I,A]}set(t,e,n,s,i,o,a,u,p,g,_,R,y,M,I,A){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=p|0,this.El=g|0,this.Fh=_|0,this.Fl=R|0,this.Gh=y|0,this.Gl=M|0,this.Hh=I|0,this.Hl=A|0}process(t,e){for(let L=0;L<16;L++,e+=4)Ln[L]=t.getUint32(e),Nn[L]=t.getUint32(e+=4);for(let L=16;L<80;L++){const W=Ln[L-15]|0,O=Nn[L-15]|0,q=gr(W,O,1)^gr(W,O,8)^lc(W,O,7),j=mr(W,O,1)^mr(W,O,8)^fc(W,O,7),G=Ln[L-2]|0,D=Nn[L-2]|0,V=gr(G,D,19)^Mi(G,D,61)^lc(G,D,6),K=mr(G,D,19)^Ii(G,D,61)^fc(G,D,6),H=Tf(j,K,Nn[L-7],Nn[L-16]),b=Cf(H,q,V,Ln[L-7],Ln[L-16]);Ln[L]=b|0,Nn[L]=H|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:p,Dl:g,Eh:_,El:R,Fh:y,Fl:M,Gh:I,Gl:A,Hh:T,Hl:C}=this;for(let L=0;L<80;L++){const W=gr(_,R,14)^gr(_,R,18)^Mi(_,R,41),O=mr(_,R,14)^mr(_,R,18)^Ii(_,R,41),q=_&y^~_&I,j=R&M^~R&A,G=Lf(C,O,j,Ff[L],Nn[L]),D=Nf(G,T,W,q,Pf[L],Ln[L]),V=G|0,K=gr(n,s,28)^Mi(n,s,34)^Mi(n,s,39),H=mr(n,s,28)^Ii(n,s,34)^Ii(n,s,39),b=n&i^n&a^i&a,c=s&o^s&u^o&u;T=I|0,C=A|0,I=y|0,A=M|0,y=_|0,M=R|0,{h:_,l:R}=vn(p|0,g|0,D|0,V|0),p=a|0,g=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const d=Rf(V,H,c);n=kf(d,D,K,b),s=d|0}({h:n,l:s}=vn(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=vn(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=vn(this.Ch|0,this.Cl|0,a|0,u|0),{h:p,l:g}=vn(this.Dh|0,this.Dl|0,p|0,g|0),{h:_,l:R}=vn(this.Eh|0,this.El|0,_|0,R|0),{h:y,l:M}=vn(this.Fh|0,this.Fl|0,y|0,M|0),{h:I,l:A}=vn(this.Gh|0,this.Gl|0,I|0,A|0),{h:T,l:C}=vn(this.Hh|0,this.Hl|0,T|0,C|0),this.set(n,s,i,o,a,u,p,g,_,R,y,M,I,A,T,C)}roundClean(){Lr(Ln,Nn)}destroy(){Lr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const lu=ou(()=>new Of),Df=ou(()=>new Wf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ba=BigInt(0),Do=BigInt(1);function cr(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function Ri(r){const t=r.toString(16);return t.length&1?"0"+t:t}function fu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Ba:BigInt("0x"+r)}function Es(r){return fu(Nr(r))}function li(r){return fn(r),fu(Nr(Uint8Array.from(r).reverse()))}function Ma(r,t){return xa(r.toString(16).padStart(t*2,"0"))}function _s(r,t){return Ma(r,t).reverse()}function Zt(r,t,e){let n;if(typeof t=="string")try{n=xa(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Sa(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}const co=r=>typeof r=="bigint"&&Ba<=r;function zf(r,t,e){return co(r)&&co(t)&&co(e)&&t<=r&&r<e}function Br(r,t,e,n){if(!zf(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function qf(r){let t;for(t=0;r>Ba;r>>=Do,t+=1);return t}const Ss=r=>(Do<<BigInt(r))-Do;function Kf(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=y=>new Uint8Array(y),s=y=>Uint8Array.of(y);let i=n(r),o=n(r),a=0;const u=()=>{i.fill(1),o.fill(0),a=0},p=(...y)=>e(o,i,...y),g=(y=n(0))=>{o=p(s(0),y),i=p(),y.length!==0&&(o=p(s(1),y),i=p())},_=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const M=[];for(;y<t;){i=p();const I=i.slice();M.push(I),y+=i.length}return Mn(...M)};return(y,M)=>{u(),g(y);let I;for(;!(I=M(_()));)g();return u(),I}}function yi(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const u=typeof a;if(u!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function ns(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ze=BigInt(0),Be=BigInt(1),Jn=BigInt(2),$f=BigInt(3),hu=BigInt(4),du=BigInt(5),pu=BigInt(8);function Yt(r,t){const e=r%t;return e>=ze?e:t+e}function Ht(r,t,e){let n=r;for(;t-- >ze;)n*=n,n%=e;return n}function hc(r,t){if(r===ze)throw new Error("invert: expected non-zero number");if(t<=ze)throw new Error("invert: expected positive modulus, got "+t);let e=Yt(r,t),n=t,s=ze,i=Be;for(;e!==ze;){const a=n/e,u=n%e,p=s-i*a;n=e,e=u,s=i,i=p}if(n!==Be)throw new Error("invert: does not exist");return Yt(s,t)}function gu(r,t){const e=(r.ORDER+Be)/hu,n=r.pow(t,e);if(!r.eql(r.sqr(n),t))throw new Error("Cannot find square root");return n}function jf(r,t){const e=(r.ORDER-du)/pu,n=r.mul(t,Jn),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,Jn),s),a=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),t))throw new Error("Cannot find square root");return a}function Hf(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let t=r-Be,e=0;for(;t%Jn===ze;)t/=Jn,e++;let n=Jn;const s=Kr(r);for(;dc(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return gu;let i=s.pow(n,t);const o=(t+Be)/Jn;return function(u,p){if(u.is0(p))return p;if(dc(u,p)!==1)throw new Error("Cannot find square root");let g=e,_=u.mul(u.ONE,i),R=u.pow(p,t),y=u.pow(p,o);for(;!u.eql(R,u.ONE);){if(u.is0(R))return u.ZERO;let M=1,I=u.sqr(R);for(;!u.eql(I,u.ONE);)if(M++,I=u.sqr(I),M===g)throw new Error("Cannot find square root");const A=Be<<BigInt(g-M-1),T=u.pow(_,A);g=M,_=u.sqr(T),R=u.mul(R,_),y=u.mul(y,T)}return y}}function Vf(r){return r%hu===$f?gu:r%pu===du?jf:Hf(r)}const Gf=(r,t)=>(Yt(r,t)&Be)===Be,Zf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yf(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Zf.reduce((n,s)=>(n[s]="function",n),t);return yi(r,e),r}function Jf(r,t,e){if(e<ze)throw new Error("invalid exponent, negatives unsupported");if(e===ze)return r.ONE;if(e===Be)return t;let n=r.ONE,s=t;for(;e>ze;)e&Be&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Be;return n}function mu(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,a,u)=>r.is0(a)?o:(n[u]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return t.reduceRight((o,a,u)=>r.is0(a)?o:(n[u]=r.mul(o,n[u]),r.mul(o,a)),i),n}function dc(r,t){const e=(r.ORDER-Be)/Jn,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Xf(r,t){t!==void 0&&Wo(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Kr(r,t,e=!1,n={}){if(r<=ze)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const g=t;g.BITS&&(s=g.BITS),g.sqrt&&(i=g.sqrt),typeof g.isLE=="boolean"&&(e=g.isLE)}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:a}=Xf(r,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const p=Object.freeze({ORDER:r,isLE:e,BITS:o,BYTES:a,MASK:Ss(o),ZERO:ze,ONE:Be,create:g=>Yt(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return ze<=g&&g<r},is0:g=>g===ze,isValidNot0:g=>!p.is0(g)&&p.isValid(g),isOdd:g=>(g&Be)===Be,neg:g=>Yt(-g,r),eql:(g,_)=>g===_,sqr:g=>Yt(g*g,r),add:(g,_)=>Yt(g+_,r),sub:(g,_)=>Yt(g-_,r),mul:(g,_)=>Yt(g*_,r),pow:(g,_)=>Jf(p,g,_),div:(g,_)=>Yt(g*hc(_,r),r),sqrN:g=>g*g,addN:(g,_)=>g+_,subN:(g,_)=>g-_,mulN:(g,_)=>g*_,inv:g=>hc(g,r),sqrt:i||(g=>(u||(u=Vf(r)),u(p,g))),toBytes:g=>e?_s(g,a):Ma(g,a),fromBytes:g=>{if(g.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+g.length);return e?li(g):Es(g)},invertBatch:g=>mu(p,g),cmov:(g,_,R)=>R?_:g});return Object.freeze(p)}function wu(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function yu(r){const t=wu(r);return t+Math.ceil(t/2)}function Qf(r,t,e=!1){const n=r.length,s=wu(t),i=yu(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?li(r):Es(r),a=Yt(o,t-Be)+Be;return e?_s(a,s):Ma(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ur=BigInt(0),Xn=BigInt(1);function ii(r,t){const e=t.negate();return r?e:t}function bu(r,t,e){const n=t==="pz"?o=>o.pz:o=>o.ez,s=mu(r.Fp,e.map(n));return e.map((o,a)=>o.toAffine(s[a])).map(r.fromAffine)}function vu(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function uo(r,t){vu(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=Ss(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function pc(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let a=Number(r&s),u=r>>o;a>n&&(a-=i,u+=Xn);const p=t*n,g=p+Math.abs(a)-1,_=a===0,R=a<0,y=t%2!==0;return{nextN:u,offset:g,isZero:_,isNeg:R,isNegF:y,offsetF:p}}function th(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function eh(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const lo=new WeakMap,Eu=new WeakMap;function fo(r){return Eu.get(r)||1}function gc(r){if(r!==Ur)throw new Error("invalid wNAF")}function _u(r,t){return{constTimeNegate:ii,hasPrecomputes(e){return fo(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>Ur;)n&Xn&&(s=s.add(i)),i=i.double(),n>>=Xn;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=uo(n,t),o=[];let a=e,u=a;for(let p=0;p<s;p++){u=a,o.push(u);for(let g=1;g<i;g++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(e,n,s){let i=r.ZERO,o=r.BASE;const a=uo(e,t);for(let u=0;u<a.windows;u++){const{nextN:p,offset:g,isZero:_,isNeg:R,isNegF:y,offsetF:M}=pc(s,u,a);s=p,_?o=o.add(ii(y,n[M])):i=i.add(ii(R,n[g]))}return gc(s),{p:i,f:o}},wNAFUnsafe(e,n,s,i=r.ZERO){const o=uo(e,t);for(let a=0;a<o.windows&&s!==Ur;a++){const{nextN:u,offset:p,isZero:g,isNeg:_}=pc(s,a,o);if(s=u,!g){const R=n[p];i=i.add(_?R.negate():R)}}return gc(s),i},getPrecomputes(e,n,s){let i=lo.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof s=="function"&&(i=s(i)),lo.set(n,i))),i},wNAFCached(e,n,s){const i=fo(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=fo(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){vu(n,t),Eu.set(e,n),lo.delete(e)}}}function nh(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>Ur||n>Ur;)e&Xn&&(i=i.add(s)),n&Xn&&(o=o.add(s)),s=s.double(),e>>=Xn,n>>=Xn;return{p1:i,p2:o}}function Su(r,t,e,n){th(e,r),eh(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=qf(BigInt(s));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const p=Ss(u),g=new Array(Number(p)+1).fill(o),_=Math.floor((t.BITS-1)/u)*u;let R=o;for(let y=_;y>=0;y-=u){g.fill(o);for(let I=0;I<i;I++){const A=n[I],T=Number(A>>BigInt(y)&p);g[T]=g[T].add(e[I])}let M=o;for(let I=g.length-1,A=o;I>0;I--)A=A.add(g[I]),M=M.add(A);if(R=R.add(M),y!==0)for(let I=0;I<u;I++)R=R.double()}return R}function mc(r,t){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Yf(t),t}else return Kr(r)}function xu(r,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const u=t[a];if(!(typeof u=="bigint"&&u>Ur))throw new Error(`CURVE.${a} must be positive bigint`)}const n=mc(t.p,e.Fp),s=mc(t.n,e.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cn=BigInt(0),Ne=BigInt(1),ho=BigInt(2),rh=BigInt(8),ih={zip215:!0};function sh(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),a=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,a)}function oh(r,t={}){const{Fp:e,Fn:n}=xu("edwards",r,t),{h:s,n:i}=r;yi(t,{},{uvRatio:"function"});const o=ho<<BigInt(n.BYTES*8)-Ne,a=I=>e.create(I),u=t.uvRatio||((I,A)=>{try{return{isValid:!0,value:e.sqrt(e.div(I,A))}}catch{return{isValid:!1,value:cn}}});if(!sh(e,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function p(I,A,T=!1){const C=T?Ne:cn;return Br("coordinate "+I,A,C,o),A}function g(I){if(!(I instanceof y))throw new Error("ExtendedPoint expected")}const _=ns((I,A)=>{const{ex:T,ey:C,ez:L}=I,W=I.is0();A==null&&(A=W?rh:e.inv(L));const O=a(T*A),q=a(C*A),j=a(L*A);if(W)return{x:cn,y:Ne};if(j!==Ne)throw new Error("invZ was invalid");return{x:O,y:q}}),R=ns(I=>{const{a:A,d:T}=r;if(I.is0())throw new Error("bad point: ZERO");const{ex:C,ey:L,ez:W,et:O}=I,q=a(C*C),j=a(L*L),G=a(W*W),D=a(G*G),V=a(q*A),K=a(G*a(V+j)),H=a(D+a(T*a(q*j)));if(K!==H)throw new Error("bad point: equation left != right (1)");const b=a(C*L),c=a(W*O);if(b!==c)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(A,T,C,L){this.ex=p("x",A),this.ey=p("y",T),this.ez=p("z",C,!0),this.et=p("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof y)throw new Error("extended point not allowed");const{x:T,y:C}=A||{};return p("x",T),p("y",C),new y(T,C,Ne,a(T*C))}static normalizeZ(A){return bu(y,"ez",A)}static msm(A,T){return Su(y,n,A,T)}_setWindowSize(A){this.precompute(A)}precompute(A=8,T=!0){return M.setWindowSize(this,A),T||this.multiply(ho),this}assertValidity(){R(this)}equals(A){g(A);const{ex:T,ey:C,ez:L}=this,{ex:W,ey:O,ez:q}=A,j=a(T*q),G=a(W*L),D=a(C*q),V=a(O*L);return j===G&&D===V}is0(){return this.equals(y.ZERO)}negate(){return new y(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:A}=r,{ex:T,ey:C,ez:L}=this,W=a(T*T),O=a(C*C),q=a(ho*a(L*L)),j=a(A*W),G=T+C,D=a(a(G*G)-W-O),V=j+O,K=V-q,H=j-O,b=a(D*K),c=a(V*H),d=a(D*H),m=a(K*V);return new y(b,c,m,d)}add(A){g(A);const{a:T,d:C}=r,{ex:L,ey:W,ez:O,et:q}=this,{ex:j,ey:G,ez:D,et:V}=A,K=a(L*j),H=a(W*G),b=a(q*C*V),c=a(O*D),d=a((L+W)*(j+G)-K-H),m=c-b,v=c+b,S=a(H-T*K),k=a(d*m),N=a(v*S),E=a(d*S),h=a(m*v);return new y(k,N,h,E)}subtract(A){return this.add(A.negate())}multiply(A){const T=A;Br("scalar",T,Ne,i);const{p:C,f:L}=M.wNAFCached(this,T,y.normalizeZ);return y.normalizeZ([C,L])[0]}multiplyUnsafe(A,T=y.ZERO){const C=A;return Br("scalar",C,cn,i),C===cn?y.ZERO:this.is0()||C===Ne?this:M.wNAFCachedUnsafe(this,C,y.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return M.wNAFCachedUnsafe(this,i).is0()}toAffine(A){return _(this,A)}clearCofactor(){return s===Ne?this:this.multiplyUnsafe(s)}static fromBytes(A,T=!1){return fn(A),this.fromHex(A,T)}static fromHex(A,T=!1){const{d:C,a:L}=r,W=e.BYTES;A=Zt("pointHex",A,W),cr("zip215",T);const O=A.slice(),q=A[W-1];O[W-1]=q&-129;const j=li(O),G=T?o:e.ORDER;Br("pointHex.y",j,cn,G);const D=a(j*j),V=a(D-Ne),K=a(C*D-L);let{isValid:H,value:b}=u(V,K);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const c=(b&Ne)===Ne,d=(q&128)!==0;if(!T&&b===cn&&d)throw new Error("Point.fromHex: x=0 and x_0=1");return d!==c&&(b=a(-b)),y.fromAffine({x:b,y:j})}static fromPrivateScalar(A){return y.BASE.multiply(A)}toBytes(){const{x:A,y:T}=this.toAffine(),C=_s(T,e.BYTES);return C[C.length-1]|=A&Ne?128:0,C}toRawBytes(){return this.toBytes()}toHex(){return Nr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}y.BASE=new y(r.Gx,r.Gy,Ne,a(r.Gx*r.Gy)),y.ZERO=new y(cn,Ne,Ne,cn),y.Fp=e,y.Fn=n;const M=_u(y,n.BYTES*8);return y}function ah(r,t){yi(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:n}=t,{BASE:s,Fp:i,Fn:o}=r,a=o.ORDER,u=t.randomBytes||au,p=t.adjustScalarBytes||(O=>O),g=t.domain||((O,q,j)=>{if(cr("phflag",j),q.length||j)throw new Error("Contexts/pre-hash are not supported");return O});function _(O){return o.create(O)}function R(O){return _(li(O))}function y(O){const q=i.BYTES;O=Zt("private key",O,q);const j=Zt("hashed private key",n(O),2*q),G=p(j.slice(0,q)),D=j.slice(q,2*q),V=R(G);return{head:G,prefix:D,scalar:V}}function M(O){const{head:q,prefix:j,scalar:G}=y(O),D=s.multiply(G),V=D.toBytes();return{head:q,prefix:j,scalar:G,point:D,pointBytes:V}}function I(O){return M(O).pointBytes}function A(O=Uint8Array.of(),...q){const j=Mn(...q);return R(n(g(j,Zt("context",O),!!e)))}function T(O,q,j={}){O=Zt("message",O),e&&(O=e(O));const{prefix:G,scalar:D,pointBytes:V}=M(q),K=A(j.context,G,O),H=s.multiply(K).toBytes(),b=A(j.context,H,V,O),c=_(K+b*D);Br("signature.s",c,cn,a);const d=i.BYTES,m=Mn(H,_s(c,d));return Zt("result",m,d*2)}const C=ih;function L(O,q,j,G=C){const{context:D,zip215:V}=G,K=i.BYTES;O=Zt("signature",O,2*K),q=Zt("message",q),j=Zt("publicKey",j,K),V!==void 0&&cr("zip215",V),e&&(q=e(q));const H=li(O.slice(K,2*K));let b,c,d;try{b=r.fromHex(j,V),c=r.fromHex(O.slice(0,K),V),d=s.multiplyUnsafe(H)}catch{return!1}if(!V&&b.isSmallOrder())return!1;const m=A(D,c.toBytes(),b.toBytes(),q);return c.add(b.multiplyUnsafe(m)).subtract(d).clearCofactor().is0()}return s.precompute(8),{getPublicKey:I,sign:T,verify:L,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>u(i.BYTES),precompute(O=8,q=r.BASE){return q.precompute(O,!1)}},Point:r}}function ch(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Kr(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:i}}function uh(r,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:r})}function lh(r){const{CURVE:t,curveOpts:e,eddsaOpts:n}=ch(r),s=oh(t,e),i=ah(s,n);return uh(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const fh=BigInt(1),wc=BigInt(2);BigInt(3);const hh=BigInt(5),dh=BigInt(8),xs={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:dh,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ph(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=xs.p,a=r*r%i*r%i,u=Ht(a,wc,i)*a%i,p=Ht(u,fh,i)*r%i,g=Ht(p,hh,i)*p%i,_=Ht(g,t,i)*g%i,R=Ht(_,e,i)*_%i,y=Ht(R,n,i)*R%i,M=Ht(y,s,i)*y%i,I=Ht(M,s,i)*y%i,A=Ht(I,t,i)*g%i;return{pow_p_5_8:Ht(A,wc,i)*r%i,b2:a}}function gh(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const yc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function mh(r,t){const e=xs.p,n=Yt(t*t*t,e),s=Yt(n*n*t,e),i=ph(r*s).pow_p_5_8;let o=Yt(r*n*i,e);const a=Yt(t*o*o,e),u=o,p=Yt(o*yc,e),g=a===r,_=a===Yt(-r,e),R=a===Yt(-r*yc,e);return g&&(o=u),(_||R)&&(o=p),Gf(o,e)&&(o=Yt(-o,e)),{isValid:g||_,value:o}}const wh=(()=>Kr(xs.p,void 0,!0))(),yh=(()=>({...xs,Fp:wh,hash:Df,adjustScalarBytes:gh,uvRatio:mh}))(),bi=(()=>lh(yh))();var Ia={exports:{}};const bh={},vh=Object.freeze(Object.defineProperty({__proto__:null,default:bh},Symbol.toStringTag,{value:"Module"})),Eh=va(vh);Ia.exports;(function(r){(function(t,e){function n(b,c){if(!b)throw new Error(c||"Assertion failed")}function s(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype,b.prototype=new d,b.prototype.constructor=b}function i(b,c,d){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(b||0,c||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Eh.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,d){return c.cmp(d)>0?c:d},i.min=function(c,d){return c.cmp(d)<0?c:d},i.prototype._init=function(c,d,m){if(typeof c=="number")return this._initNumber(c,d,m);if(typeof c=="object")return this._initArray(c,d,m);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var v=0;c[0]==="-"&&(v++,this.negative=1),v<c.length&&(d===16?this._parseHex(c,v,m):(this._parseBase(c,d,v),m==="le"&&this._initArray(this.toArray(),d,m)))},i.prototype._initNumber=function(c,d,m){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},i.prototype._initArray=function(c,d,m){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,k,N=0;if(m==="be")for(v=c.length-1,S=0;v>=0;v-=3)k=c[v]|c[v-1]<<8|c[v-2]<<16,this.words[S]|=k<<N&67108863,this.words[S+1]=k>>>26-N&67108863,N+=24,N>=26&&(N-=26,S++);else if(m==="le")for(v=0,S=0;v<c.length;v+=3)k=c[v]|c[v+1]<<8|c[v+2]<<16,this.words[S]|=k<<N&67108863,this.words[S+1]=k>>>26-N&67108863,N+=24,N>=26&&(N-=26,S++);return this._strip()};function a(b,c){var d=b.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+b)}function u(b,c,d){var m=a(b,d);return d-1>=c&&(m|=a(b,d-1)<<4),m}i.prototype._parseHex=function(c,d,m){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S=0,k=0,N;if(m==="be")for(v=c.length-1;v>=d;v-=2)N=u(c,d,v)<<S,this.words[k]|=N&67108863,S>=18?(S-=18,k+=1,this.words[k]|=N>>>26):S+=8;else{var E=c.length-d;for(v=E%2===0?d+1:d;v<c.length;v+=2)N=u(c,d,v)<<S,this.words[k]|=N&67108863,S>=18?(S-=18,k+=1,this.words[k]|=N>>>26):S+=8}this._strip()};function p(b,c,d,m){for(var v=0,S=0,k=Math.min(b.length,d),N=c;N<k;N++){var E=b.charCodeAt(N)-48;v*=m,E>=49?S=E-49+10:E>=17?S=E-17+10:S=E,n(E>=0&&S<m,"Invalid character"),v+=S}return v}i.prototype._parseBase=function(c,d,m){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=d)v++;v--,S=S/d|0;for(var k=c.length-m,N=k%v,E=Math.min(k,k-N)+m,h=0,B=m;B<E;B+=v)h=p(c,B,B+v,d),this.imuln(S),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(N!==0){var nt=1;for(h=p(c,B,c.length,d),B=0;B<N;B++)nt*=d;this.imuln(nt),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function g(b,c){b.words=c.words,b.length=c.length,b.negative=c.negative,b.red=c.red}if(i.prototype._move=function(c){g(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var R=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,d){c=c||10,d=d|0||1;var m;if(c===16||c==="hex"){m="";for(var v=0,S=0,k=0;k<this.length;k++){var N=this.words[k],E=((N<<v|S)&16777215).toString(16);S=N>>>24-v&16777215,v+=2,v>=26&&(v-=26,k--),S!==0||k!==this.length-1?m=R[6-E.length]+E+m:m=E+m}for(S!==0&&(m=S.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(c===(c|0)&&c>=2&&c<=36){var h=y[c],B=M[c];m="";var nt=this.clone();for(nt.negative=0;!nt.isZero();){var Q=nt.modrn(B).toString(c);nt=nt.idivn(B),nt.isZero()?m=Q+m:m=R[h-Q.length]+Q+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),i.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var I=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};i.prototype.toArrayLike=function(c,d,m){this._strip();var v=this.byteLength(),S=m||Math.max(1,v);n(v<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var k=I(c,S),N=d==="le"?"LE":"BE";return this["_toArrayLike"+N](k,v),k},i.prototype._toArrayLikeLE=function(c,d){for(var m=0,v=0,S=0,k=0;S<this.length;S++){var N=this.words[S]<<k|v;c[m++]=N&255,m<c.length&&(c[m++]=N>>8&255),m<c.length&&(c[m++]=N>>16&255),k===6?(m<c.length&&(c[m++]=N>>24&255),v=0,k=0):(v=N>>>24,k+=2)}if(m<c.length)for(c[m++]=v;m<c.length;)c[m++]=0},i.prototype._toArrayLikeBE=function(c,d){for(var m=c.length-1,v=0,S=0,k=0;S<this.length;S++){var N=this.words[S]<<k|v;c[m--]=N&255,m>=0&&(c[m--]=N>>8&255),m>=0&&(c[m--]=N>>16&255),k===6?(m>=0&&(c[m--]=N>>24&255),v=0,k=0):(v=N>>>24,k+=2)}if(m>=0)for(c[m--]=v;m>=0;)c[m--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var d=c,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},i.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,m=0;return d&8191||(m+=13,d>>>=13),d&127||(m+=7,d>>>=7),d&15||(m+=4,d>>>=4),d&3||(m+=2,d>>>=2),d&1||m++,m},i.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function A(b){for(var c=new Array(b.bitLength()),d=0;d<c.length;d++){var m=d/26|0,v=d%26;c[d]=b.words[m]>>>v&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(c+=m,m!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&c.words[m];return this.length=d.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var d,m;this.length>c.length?(d=this,m=c):(d=c,m=this);for(var v=0;v<m.length;v++)this.words[v]=d.words[v]^m.words[v];if(this!==d)for(;v<d.length;v++)this.words[v]=d.words[v];return this.length=d.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,m=c%26;this._expand(d),m>0&&d--;for(var v=0;v<d;v++)this.words[v]=~this.words[v]&67108863;return m>0&&(this.words[v]=~this.words[v]&67108863>>26-m),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var m=c/26|0,v=c%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<v:this.words[m]=this.words[m]&~(1<<v),this._strip()},i.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var m,v;this.length>c.length?(m=this,v=c):(m=c,v=this);for(var S=0,k=0;k<v.length;k++)d=(m.words[k]|0)+(v.words[k]|0)+S,this.words[k]=d&67108863,S=d>>>26;for(;S!==0&&k<m.length;k++)d=(m.words[k]|0)+S,this.words[k]=d&67108863,S=d>>>26;if(this.length=m.length,S!==0)this.words[this.length]=S,this.length++;else if(m!==this)for(;k<m.length;k++)this.words[k]=m.words[k];return this},i.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var m=this.cmp(c);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,S;m>0?(v=this,S=c):(v=c,S=this);for(var k=0,N=0;N<S.length;N++)d=(v.words[N]|0)-(S.words[N]|0)+k,k=d>>26,this.words[N]=d&67108863;for(;k!==0&&N<v.length;N++)d=(v.words[N]|0)+k,k=d>>26,this.words[N]=d&67108863;if(k===0&&N<v.length&&v!==this)for(;N<v.length;N++)this.words[N]=v.words[N];return this.length=Math.max(this.length,N),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function T(b,c,d){d.negative=c.negative^b.negative;var m=b.length+c.length|0;d.length=m,m=m-1|0;var v=b.words[0]|0,S=c.words[0]|0,k=v*S,N=k&67108863,E=k/67108864|0;d.words[0]=N;for(var h=1;h<m;h++){for(var B=E>>>26,nt=E&67108863,Q=Math.min(h,c.length-1),rt=Math.max(0,h-b.length+1);rt<=Q;rt++){var Rt=h-rt|0;v=b.words[Rt]|0,S=c.words[rt]|0,k=v*S+nt,B+=k/67108864|0,nt=k&67108863}d.words[h]=nt|0,E=B|0}return E!==0?d.words[h]=E|0:d.length--,d._strip()}var C=function(c,d,m){var v=c.words,S=d.words,k=m.words,N=0,E,h,B,nt=v[0]|0,Q=nt&8191,rt=nt>>>13,Rt=v[1]|0,yt=Rt&8191,vt=Rt>>>13,wn=v[2]|0,xt=wn&8191,Pt=wn>>>13,yn=v[3]|0,Bt=yn&8191,qt=yn>>>13,xi=v[4]|0,Lt=xi&8191,Kt=xi>>>13,Ai=v[5]|0,Ft=Ai&8191,kt=Ai>>>13,qe=v[6]|0,Nt=qe&8191,$t=qe>>>13,en=v[7]|0,jt=en&8191,w=en>>>13,l=v[8]|0,f=l&8191,x=l>>>13,U=v[9]|0,P=U&8191,$=U>>>13,mt=S[0]|0,pt=mt&8191,dt=mt>>>13,Tt=S[1]|0,ht=Tt&8191,Xt=Tt>>>13,tc=S[2]|0,Qt=tc&8191,te=tc>>>13,ec=S[3]|0,ee=ec&8191,ne=ec>>>13,nc=S[4]|0,re=nc&8191,ie=nc>>>13,rc=S[5]|0,se=rc&8191,oe=rc>>>13,ic=S[6]|0,ae=ic&8191,ce=ic>>>13,sc=S[7]|0,ue=sc&8191,le=sc>>>13,oc=S[8]|0,fe=oc&8191,he=oc>>>13,ac=S[9]|0,de=ac&8191,pe=ac>>>13;m.negative=c.negative^d.negative,m.length=19,E=Math.imul(Q,pt),h=Math.imul(Q,dt),h=h+Math.imul(rt,pt)|0,B=Math.imul(rt,dt);var zs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(zs>>>26)|0,zs&=67108863,E=Math.imul(yt,pt),h=Math.imul(yt,dt),h=h+Math.imul(vt,pt)|0,B=Math.imul(vt,dt),E=E+Math.imul(Q,ht)|0,h=h+Math.imul(Q,Xt)|0,h=h+Math.imul(rt,ht)|0,B=B+Math.imul(rt,Xt)|0;var qs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(qs>>>26)|0,qs&=67108863,E=Math.imul(xt,pt),h=Math.imul(xt,dt),h=h+Math.imul(Pt,pt)|0,B=Math.imul(Pt,dt),E=E+Math.imul(yt,ht)|0,h=h+Math.imul(yt,Xt)|0,h=h+Math.imul(vt,ht)|0,B=B+Math.imul(vt,Xt)|0,E=E+Math.imul(Q,Qt)|0,h=h+Math.imul(Q,te)|0,h=h+Math.imul(rt,Qt)|0,B=B+Math.imul(rt,te)|0;var Ks=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,E=Math.imul(Bt,pt),h=Math.imul(Bt,dt),h=h+Math.imul(qt,pt)|0,B=Math.imul(qt,dt),E=E+Math.imul(xt,ht)|0,h=h+Math.imul(xt,Xt)|0,h=h+Math.imul(Pt,ht)|0,B=B+Math.imul(Pt,Xt)|0,E=E+Math.imul(yt,Qt)|0,h=h+Math.imul(yt,te)|0,h=h+Math.imul(vt,Qt)|0,B=B+Math.imul(vt,te)|0,E=E+Math.imul(Q,ee)|0,h=h+Math.imul(Q,ne)|0,h=h+Math.imul(rt,ee)|0,B=B+Math.imul(rt,ne)|0;var $s=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+($s>>>26)|0,$s&=67108863,E=Math.imul(Lt,pt),h=Math.imul(Lt,dt),h=h+Math.imul(Kt,pt)|0,B=Math.imul(Kt,dt),E=E+Math.imul(Bt,ht)|0,h=h+Math.imul(Bt,Xt)|0,h=h+Math.imul(qt,ht)|0,B=B+Math.imul(qt,Xt)|0,E=E+Math.imul(xt,Qt)|0,h=h+Math.imul(xt,te)|0,h=h+Math.imul(Pt,Qt)|0,B=B+Math.imul(Pt,te)|0,E=E+Math.imul(yt,ee)|0,h=h+Math.imul(yt,ne)|0,h=h+Math.imul(vt,ee)|0,B=B+Math.imul(vt,ne)|0,E=E+Math.imul(Q,re)|0,h=h+Math.imul(Q,ie)|0,h=h+Math.imul(rt,re)|0,B=B+Math.imul(rt,ie)|0;var js=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(js>>>26)|0,js&=67108863,E=Math.imul(Ft,pt),h=Math.imul(Ft,dt),h=h+Math.imul(kt,pt)|0,B=Math.imul(kt,dt),E=E+Math.imul(Lt,ht)|0,h=h+Math.imul(Lt,Xt)|0,h=h+Math.imul(Kt,ht)|0,B=B+Math.imul(Kt,Xt)|0,E=E+Math.imul(Bt,Qt)|0,h=h+Math.imul(Bt,te)|0,h=h+Math.imul(qt,Qt)|0,B=B+Math.imul(qt,te)|0,E=E+Math.imul(xt,ee)|0,h=h+Math.imul(xt,ne)|0,h=h+Math.imul(Pt,ee)|0,B=B+Math.imul(Pt,ne)|0,E=E+Math.imul(yt,re)|0,h=h+Math.imul(yt,ie)|0,h=h+Math.imul(vt,re)|0,B=B+Math.imul(vt,ie)|0,E=E+Math.imul(Q,se)|0,h=h+Math.imul(Q,oe)|0,h=h+Math.imul(rt,se)|0,B=B+Math.imul(rt,oe)|0;var Hs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,E=Math.imul(Nt,pt),h=Math.imul(Nt,dt),h=h+Math.imul($t,pt)|0,B=Math.imul($t,dt),E=E+Math.imul(Ft,ht)|0,h=h+Math.imul(Ft,Xt)|0,h=h+Math.imul(kt,ht)|0,B=B+Math.imul(kt,Xt)|0,E=E+Math.imul(Lt,Qt)|0,h=h+Math.imul(Lt,te)|0,h=h+Math.imul(Kt,Qt)|0,B=B+Math.imul(Kt,te)|0,E=E+Math.imul(Bt,ee)|0,h=h+Math.imul(Bt,ne)|0,h=h+Math.imul(qt,ee)|0,B=B+Math.imul(qt,ne)|0,E=E+Math.imul(xt,re)|0,h=h+Math.imul(xt,ie)|0,h=h+Math.imul(Pt,re)|0,B=B+Math.imul(Pt,ie)|0,E=E+Math.imul(yt,se)|0,h=h+Math.imul(yt,oe)|0,h=h+Math.imul(vt,se)|0,B=B+Math.imul(vt,oe)|0,E=E+Math.imul(Q,ae)|0,h=h+Math.imul(Q,ce)|0,h=h+Math.imul(rt,ae)|0,B=B+Math.imul(rt,ce)|0;var Vs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,E=Math.imul(jt,pt),h=Math.imul(jt,dt),h=h+Math.imul(w,pt)|0,B=Math.imul(w,dt),E=E+Math.imul(Nt,ht)|0,h=h+Math.imul(Nt,Xt)|0,h=h+Math.imul($t,ht)|0,B=B+Math.imul($t,Xt)|0,E=E+Math.imul(Ft,Qt)|0,h=h+Math.imul(Ft,te)|0,h=h+Math.imul(kt,Qt)|0,B=B+Math.imul(kt,te)|0,E=E+Math.imul(Lt,ee)|0,h=h+Math.imul(Lt,ne)|0,h=h+Math.imul(Kt,ee)|0,B=B+Math.imul(Kt,ne)|0,E=E+Math.imul(Bt,re)|0,h=h+Math.imul(Bt,ie)|0,h=h+Math.imul(qt,re)|0,B=B+Math.imul(qt,ie)|0,E=E+Math.imul(xt,se)|0,h=h+Math.imul(xt,oe)|0,h=h+Math.imul(Pt,se)|0,B=B+Math.imul(Pt,oe)|0,E=E+Math.imul(yt,ae)|0,h=h+Math.imul(yt,ce)|0,h=h+Math.imul(vt,ae)|0,B=B+Math.imul(vt,ce)|0,E=E+Math.imul(Q,ue)|0,h=h+Math.imul(Q,le)|0,h=h+Math.imul(rt,ue)|0,B=B+Math.imul(rt,le)|0;var Gs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,E=Math.imul(f,pt),h=Math.imul(f,dt),h=h+Math.imul(x,pt)|0,B=Math.imul(x,dt),E=E+Math.imul(jt,ht)|0,h=h+Math.imul(jt,Xt)|0,h=h+Math.imul(w,ht)|0,B=B+Math.imul(w,Xt)|0,E=E+Math.imul(Nt,Qt)|0,h=h+Math.imul(Nt,te)|0,h=h+Math.imul($t,Qt)|0,B=B+Math.imul($t,te)|0,E=E+Math.imul(Ft,ee)|0,h=h+Math.imul(Ft,ne)|0,h=h+Math.imul(kt,ee)|0,B=B+Math.imul(kt,ne)|0,E=E+Math.imul(Lt,re)|0,h=h+Math.imul(Lt,ie)|0,h=h+Math.imul(Kt,re)|0,B=B+Math.imul(Kt,ie)|0,E=E+Math.imul(Bt,se)|0,h=h+Math.imul(Bt,oe)|0,h=h+Math.imul(qt,se)|0,B=B+Math.imul(qt,oe)|0,E=E+Math.imul(xt,ae)|0,h=h+Math.imul(xt,ce)|0,h=h+Math.imul(Pt,ae)|0,B=B+Math.imul(Pt,ce)|0,E=E+Math.imul(yt,ue)|0,h=h+Math.imul(yt,le)|0,h=h+Math.imul(vt,ue)|0,B=B+Math.imul(vt,le)|0,E=E+Math.imul(Q,fe)|0,h=h+Math.imul(Q,he)|0,h=h+Math.imul(rt,fe)|0,B=B+Math.imul(rt,he)|0;var Zs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,E=Math.imul(P,pt),h=Math.imul(P,dt),h=h+Math.imul($,pt)|0,B=Math.imul($,dt),E=E+Math.imul(f,ht)|0,h=h+Math.imul(f,Xt)|0,h=h+Math.imul(x,ht)|0,B=B+Math.imul(x,Xt)|0,E=E+Math.imul(jt,Qt)|0,h=h+Math.imul(jt,te)|0,h=h+Math.imul(w,Qt)|0,B=B+Math.imul(w,te)|0,E=E+Math.imul(Nt,ee)|0,h=h+Math.imul(Nt,ne)|0,h=h+Math.imul($t,ee)|0,B=B+Math.imul($t,ne)|0,E=E+Math.imul(Ft,re)|0,h=h+Math.imul(Ft,ie)|0,h=h+Math.imul(kt,re)|0,B=B+Math.imul(kt,ie)|0,E=E+Math.imul(Lt,se)|0,h=h+Math.imul(Lt,oe)|0,h=h+Math.imul(Kt,se)|0,B=B+Math.imul(Kt,oe)|0,E=E+Math.imul(Bt,ae)|0,h=h+Math.imul(Bt,ce)|0,h=h+Math.imul(qt,ae)|0,B=B+Math.imul(qt,ce)|0,E=E+Math.imul(xt,ue)|0,h=h+Math.imul(xt,le)|0,h=h+Math.imul(Pt,ue)|0,B=B+Math.imul(Pt,le)|0,E=E+Math.imul(yt,fe)|0,h=h+Math.imul(yt,he)|0,h=h+Math.imul(vt,fe)|0,B=B+Math.imul(vt,he)|0,E=E+Math.imul(Q,de)|0,h=h+Math.imul(Q,pe)|0,h=h+Math.imul(rt,de)|0,B=B+Math.imul(rt,pe)|0;var Ys=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,E=Math.imul(P,ht),h=Math.imul(P,Xt),h=h+Math.imul($,ht)|0,B=Math.imul($,Xt),E=E+Math.imul(f,Qt)|0,h=h+Math.imul(f,te)|0,h=h+Math.imul(x,Qt)|0,B=B+Math.imul(x,te)|0,E=E+Math.imul(jt,ee)|0,h=h+Math.imul(jt,ne)|0,h=h+Math.imul(w,ee)|0,B=B+Math.imul(w,ne)|0,E=E+Math.imul(Nt,re)|0,h=h+Math.imul(Nt,ie)|0,h=h+Math.imul($t,re)|0,B=B+Math.imul($t,ie)|0,E=E+Math.imul(Ft,se)|0,h=h+Math.imul(Ft,oe)|0,h=h+Math.imul(kt,se)|0,B=B+Math.imul(kt,oe)|0,E=E+Math.imul(Lt,ae)|0,h=h+Math.imul(Lt,ce)|0,h=h+Math.imul(Kt,ae)|0,B=B+Math.imul(Kt,ce)|0,E=E+Math.imul(Bt,ue)|0,h=h+Math.imul(Bt,le)|0,h=h+Math.imul(qt,ue)|0,B=B+Math.imul(qt,le)|0,E=E+Math.imul(xt,fe)|0,h=h+Math.imul(xt,he)|0,h=h+Math.imul(Pt,fe)|0,B=B+Math.imul(Pt,he)|0,E=E+Math.imul(yt,de)|0,h=h+Math.imul(yt,pe)|0,h=h+Math.imul(vt,de)|0,B=B+Math.imul(vt,pe)|0;var Js=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Js>>>26)|0,Js&=67108863,E=Math.imul(P,Qt),h=Math.imul(P,te),h=h+Math.imul($,Qt)|0,B=Math.imul($,te),E=E+Math.imul(f,ee)|0,h=h+Math.imul(f,ne)|0,h=h+Math.imul(x,ee)|0,B=B+Math.imul(x,ne)|0,E=E+Math.imul(jt,re)|0,h=h+Math.imul(jt,ie)|0,h=h+Math.imul(w,re)|0,B=B+Math.imul(w,ie)|0,E=E+Math.imul(Nt,se)|0,h=h+Math.imul(Nt,oe)|0,h=h+Math.imul($t,se)|0,B=B+Math.imul($t,oe)|0,E=E+Math.imul(Ft,ae)|0,h=h+Math.imul(Ft,ce)|0,h=h+Math.imul(kt,ae)|0,B=B+Math.imul(kt,ce)|0,E=E+Math.imul(Lt,ue)|0,h=h+Math.imul(Lt,le)|0,h=h+Math.imul(Kt,ue)|0,B=B+Math.imul(Kt,le)|0,E=E+Math.imul(Bt,fe)|0,h=h+Math.imul(Bt,he)|0,h=h+Math.imul(qt,fe)|0,B=B+Math.imul(qt,he)|0,E=E+Math.imul(xt,de)|0,h=h+Math.imul(xt,pe)|0,h=h+Math.imul(Pt,de)|0,B=B+Math.imul(Pt,pe)|0;var Xs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,E=Math.imul(P,ee),h=Math.imul(P,ne),h=h+Math.imul($,ee)|0,B=Math.imul($,ne),E=E+Math.imul(f,re)|0,h=h+Math.imul(f,ie)|0,h=h+Math.imul(x,re)|0,B=B+Math.imul(x,ie)|0,E=E+Math.imul(jt,se)|0,h=h+Math.imul(jt,oe)|0,h=h+Math.imul(w,se)|0,B=B+Math.imul(w,oe)|0,E=E+Math.imul(Nt,ae)|0,h=h+Math.imul(Nt,ce)|0,h=h+Math.imul($t,ae)|0,B=B+Math.imul($t,ce)|0,E=E+Math.imul(Ft,ue)|0,h=h+Math.imul(Ft,le)|0,h=h+Math.imul(kt,ue)|0,B=B+Math.imul(kt,le)|0,E=E+Math.imul(Lt,fe)|0,h=h+Math.imul(Lt,he)|0,h=h+Math.imul(Kt,fe)|0,B=B+Math.imul(Kt,he)|0,E=E+Math.imul(Bt,de)|0,h=h+Math.imul(Bt,pe)|0,h=h+Math.imul(qt,de)|0,B=B+Math.imul(qt,pe)|0;var Qs=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,E=Math.imul(P,re),h=Math.imul(P,ie),h=h+Math.imul($,re)|0,B=Math.imul($,ie),E=E+Math.imul(f,se)|0,h=h+Math.imul(f,oe)|0,h=h+Math.imul(x,se)|0,B=B+Math.imul(x,oe)|0,E=E+Math.imul(jt,ae)|0,h=h+Math.imul(jt,ce)|0,h=h+Math.imul(w,ae)|0,B=B+Math.imul(w,ce)|0,E=E+Math.imul(Nt,ue)|0,h=h+Math.imul(Nt,le)|0,h=h+Math.imul($t,ue)|0,B=B+Math.imul($t,le)|0,E=E+Math.imul(Ft,fe)|0,h=h+Math.imul(Ft,he)|0,h=h+Math.imul(kt,fe)|0,B=B+Math.imul(kt,he)|0,E=E+Math.imul(Lt,de)|0,h=h+Math.imul(Lt,pe)|0,h=h+Math.imul(Kt,de)|0,B=B+Math.imul(Kt,pe)|0;var to=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(to>>>26)|0,to&=67108863,E=Math.imul(P,se),h=Math.imul(P,oe),h=h+Math.imul($,se)|0,B=Math.imul($,oe),E=E+Math.imul(f,ae)|0,h=h+Math.imul(f,ce)|0,h=h+Math.imul(x,ae)|0,B=B+Math.imul(x,ce)|0,E=E+Math.imul(jt,ue)|0,h=h+Math.imul(jt,le)|0,h=h+Math.imul(w,ue)|0,B=B+Math.imul(w,le)|0,E=E+Math.imul(Nt,fe)|0,h=h+Math.imul(Nt,he)|0,h=h+Math.imul($t,fe)|0,B=B+Math.imul($t,he)|0,E=E+Math.imul(Ft,de)|0,h=h+Math.imul(Ft,pe)|0,h=h+Math.imul(kt,de)|0,B=B+Math.imul(kt,pe)|0;var eo=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(eo>>>26)|0,eo&=67108863,E=Math.imul(P,ae),h=Math.imul(P,ce),h=h+Math.imul($,ae)|0,B=Math.imul($,ce),E=E+Math.imul(f,ue)|0,h=h+Math.imul(f,le)|0,h=h+Math.imul(x,ue)|0,B=B+Math.imul(x,le)|0,E=E+Math.imul(jt,fe)|0,h=h+Math.imul(jt,he)|0,h=h+Math.imul(w,fe)|0,B=B+Math.imul(w,he)|0,E=E+Math.imul(Nt,de)|0,h=h+Math.imul(Nt,pe)|0,h=h+Math.imul($t,de)|0,B=B+Math.imul($t,pe)|0;var no=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(no>>>26)|0,no&=67108863,E=Math.imul(P,ue),h=Math.imul(P,le),h=h+Math.imul($,ue)|0,B=Math.imul($,le),E=E+Math.imul(f,fe)|0,h=h+Math.imul(f,he)|0,h=h+Math.imul(x,fe)|0,B=B+Math.imul(x,he)|0,E=E+Math.imul(jt,de)|0,h=h+Math.imul(jt,pe)|0,h=h+Math.imul(w,de)|0,B=B+Math.imul(w,pe)|0;var ro=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(ro>>>26)|0,ro&=67108863,E=Math.imul(P,fe),h=Math.imul(P,he),h=h+Math.imul($,fe)|0,B=Math.imul($,he),E=E+Math.imul(f,de)|0,h=h+Math.imul(f,pe)|0,h=h+Math.imul(x,de)|0,B=B+Math.imul(x,pe)|0;var io=(N+E|0)+((h&8191)<<13)|0;N=(B+(h>>>13)|0)+(io>>>26)|0,io&=67108863,E=Math.imul(P,de),h=Math.imul(P,pe),h=h+Math.imul($,de)|0,B=Math.imul($,pe);var so=(N+E|0)+((h&8191)<<13)|0;return N=(B+(h>>>13)|0)+(so>>>26)|0,so&=67108863,k[0]=zs,k[1]=qs,k[2]=Ks,k[3]=$s,k[4]=js,k[5]=Hs,k[6]=Vs,k[7]=Gs,k[8]=Zs,k[9]=Ys,k[10]=Js,k[11]=Xs,k[12]=Qs,k[13]=to,k[14]=eo,k[15]=no,k[16]=ro,k[17]=io,k[18]=so,N!==0&&(k[19]=N,m.length++),m};Math.imul||(C=T);function L(b,c,d){d.negative=c.negative^b.negative,d.length=b.length+c.length;for(var m=0,v=0,S=0;S<d.length-1;S++){var k=v;v=0;for(var N=m&67108863,E=Math.min(S,c.length-1),h=Math.max(0,S-b.length+1);h<=E;h++){var B=S-h,nt=b.words[B]|0,Q=c.words[h]|0,rt=nt*Q,Rt=rt&67108863;k=k+(rt/67108864|0)|0,Rt=Rt+N|0,N=Rt&67108863,k=k+(Rt>>>26)|0,v+=k>>>26,k&=67108863}d.words[S]=N,m=k,k=v}return m!==0?d.words[S]=m:d.length--,d._strip()}function W(b,c,d){return L(b,c,d)}i.prototype.mulTo=function(c,d){var m,v=this.length+c.length;return this.length===10&&c.length===10?m=C(this,c,d):v<63?m=T(this,c,d):v<1024?m=L(this,c,d):m=W(this,c,d),m},i.prototype.mul=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},i.prototype.mulf=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),W(this,c,d)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var m=0,v=0;v<this.length;v++){var S=(this.words[v]|0)*c,k=(S&67108863)+(m&67108863);m>>=26,m+=S/67108864|0,m+=k>>>26,this.words[v]=k&67108863}return m!==0&&(this.words[v]=m,this.length++),this.length=c===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var d=A(c);if(d.length===0)return new i(1);for(var m=this,v=0;v<d.length&&d[v]===0;v++,m=m.sqr());if(++v<d.length)for(var S=m.sqr();v<d.length;v++,S=S.sqr())d[v]!==0&&(m=m.mul(S));return m},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26,v=67108863>>>26-d<<26-d,S;if(d!==0){var k=0;for(S=0;S<this.length;S++){var N=this.words[S]&v,E=(this.words[S]|0)-N<<d;this.words[S]=E|k,k=N>>>26-d}k&&(this.words[S]=k,this.length++)}if(m!==0){for(S=this.length-1;S>=0;S--)this.words[S+m]=this.words[S];for(S=0;S<m;S++)this.words[S]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,d,m){n(typeof c=="number"&&c>=0);var v;d?v=(d-d%26)/26:v=0;var S=c%26,k=Math.min((c-S)/26,this.length),N=67108863^67108863>>>S<<S,E=m;if(v-=k,v=Math.max(0,v),E){for(var h=0;h<k;h++)E.words[h]=this.words[h];E.length=k}if(k!==0)if(this.length>k)for(this.length-=k,h=0;h<this.length;h++)this.words[h]=this.words[h+k];else this.words[0]=0,this.length=1;var B=0;for(h=this.length-1;h>=0&&(B!==0||h>=v);h--){var nt=this.words[h]|0;this.words[h]=B<<26-S|nt>>>S,B=nt&N}return E&&B!==0&&(E.words[E.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,d,m){return n(this.negative===0),this.iushrn(c,d,m)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26,v=1<<d;if(this.length<=m)return!1;var S=this.words[m];return!!(S&v)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,m=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var v=67108863^67108863>>>d<<d;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,d,m){var v=c.length+m,S;this._expand(v);var k,N=0;for(S=0;S<c.length;S++){k=(this.words[S+m]|0)+N;var E=(c.words[S]|0)*d;k-=E&67108863,N=(k>>26)-(E/67108864|0),this.words[S+m]=k&67108863}for(;S<this.length-m;S++)k=(this.words[S+m]|0)+N,N=k>>26,this.words[S+m]=k&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,S=0;S<this.length;S++)k=-(this.words[S]|0)+N,N=k>>26,this.words[S]=k&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,d){var m=this.length-c.length,v=this.clone(),S=c,k=S.words[S.length-1]|0,N=this._countBits(k);m=26-N,m!==0&&(S=S.ushln(m),v.iushln(m),k=S.words[S.length-1]|0);var E=v.length-S.length,h;if(d!=="mod"){h=new i(null),h.length=E+1,h.words=new Array(h.length);for(var B=0;B<h.length;B++)h.words[B]=0}var nt=v.clone()._ishlnsubmul(S,1,E);nt.negative===0&&(v=nt,h&&(h.words[E]=1));for(var Q=E-1;Q>=0;Q--){var rt=(v.words[S.length+Q]|0)*67108864+(v.words[S.length+Q-1]|0);for(rt=Math.min(rt/k|0,67108863),v._ishlnsubmul(S,rt,Q);v.negative!==0;)rt--,v.negative=0,v._ishlnsubmul(S,1,Q),v.isZero()||(v.negative^=1);h&&(h.words[Q]=rt)}return h&&h._strip(),v._strip(),d!=="div"&&m!==0&&v.iushrn(m),{div:h||null,mod:v}},i.prototype.divmod=function(c,d,m){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,S,k;return this.negative!==0&&c.negative===0?(k=this.neg().divmod(c,d),d!=="mod"&&(v=k.div.neg()),d!=="div"&&(S=k.mod.neg(),m&&S.negative!==0&&S.iadd(c)),{div:v,mod:S}):this.negative===0&&c.negative!==0?(k=this.divmod(c.neg(),d),d!=="mod"&&(v=k.div.neg()),{div:v,mod:k.mod}):this.negative&c.negative?(k=this.neg().divmod(c.neg(),d),d!=="div"&&(S=k.mod.neg(),m&&S.negative!==0&&S.isub(c)),{div:k.div,mod:S}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,d)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(c):d.mod,v=c.ushrn(1),S=c.andln(1),k=m.cmp(v);return k<0||S===1&&k===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var m=(1<<26)%c,v=0,S=this.length-1;S>=0;S--)v=(m*v+(this.words[S]|0))%c;return d?-v:v},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var m=0,v=this.length-1;v>=0;v--){var S=(this.words[v]|0)+m*67108864;this.words[v]=S/c|0,m=S%c}return this._strip(),d?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,m=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var v=new i(1),S=new i(0),k=new i(0),N=new i(1),E=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++E;for(var h=m.clone(),B=d.clone();!d.isZero();){for(var nt=0,Q=1;!(d.words[0]&Q)&&nt<26;++nt,Q<<=1);if(nt>0)for(d.iushrn(nt);nt-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(h),S.isub(B)),v.iushrn(1),S.iushrn(1);for(var rt=0,Rt=1;!(m.words[0]&Rt)&&rt<26;++rt,Rt<<=1);if(rt>0)for(m.iushrn(rt);rt-- >0;)(k.isOdd()||N.isOdd())&&(k.iadd(h),N.isub(B)),k.iushrn(1),N.iushrn(1);d.cmp(m)>=0?(d.isub(m),v.isub(k),S.isub(N)):(m.isub(d),k.isub(v),N.isub(S))}return{a:k,b:N,gcd:m.iushln(E)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,m=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var v=new i(1),S=new i(0),k=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var N=0,E=1;!(d.words[0]&E)&&N<26;++N,E<<=1);if(N>0)for(d.iushrn(N);N-- >0;)v.isOdd()&&v.iadd(k),v.iushrn(1);for(var h=0,B=1;!(m.words[0]&B)&&h<26;++h,B<<=1);if(h>0)for(m.iushrn(h);h-- >0;)S.isOdd()&&S.iadd(k),S.iushrn(1);d.cmp(m)>=0?(d.isub(m),v.isub(S)):(m.isub(d),S.isub(v))}var nt;return d.cmpn(1)===0?nt=v:nt=S,nt.cmpn(0)<0&&nt.iadd(c),nt},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),m=c.clone();d.negative=0,m.negative=0;for(var v=0;d.isEven()&&m.isEven();v++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var S=d.cmp(m);if(S<0){var k=d;d=m,m=k}else if(S===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(v)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,m=(c-d)/26,v=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=v,this;for(var S=v,k=m;S!==0&&k<this.length;k++){var N=this.words[k]|0;N+=S,S=N>>>26,N&=67108863,this.words[k]=N}return S!==0&&(this.words[k]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var v=this.words[0]|0;m=v===c?0:v<c?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var v=this.words[m]|0,S=c.words[m]|0;if(v!==S){v<S?d=-1:v>S&&(d=1);break}}return d},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new K(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var O={k256:null,p224:null,p192:null,p25519:null};function q(b,c){this.name=b,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},q.prototype.ireduce=function(c){var d=c,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var v=m<this.n?-1:d.ucmp(this.p);return v===0?(d.words[0]=0,d.length=1):v>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},q.prototype.split=function(c,d){c.iushrn(this.n,0,d)},q.prototype.imulK=function(c){return c.imul(this.k)};function j(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(j,q),j.prototype.split=function(c,d){for(var m=4194303,v=Math.min(c.length,9),S=0;S<v;S++)d.words[S]=c.words[S];if(d.length=v,c.length<=9){c.words[0]=0,c.length=1;return}var k=c.words[9];for(d.words[d.length++]=k&m,S=10;S<c.length;S++){var N=c.words[S]|0;c.words[S-10]=(N&m)<<4|k>>>22,k=N}k>>>=22,c.words[S-10]=k,k===0&&c.length>10?c.length-=10:c.length-=9},j.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,m=0;m<c.length;m++){var v=c.words[m]|0;d+=v*977,c.words[m]=d&67108863,d=v*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function G(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(G,q);function D(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,q);function V(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(V,q),V.prototype.imulK=function(c){for(var d=0,m=0;m<c.length;m++){var v=(c.words[m]|0)*19+d,S=v&67108863;v>>>=26,c.words[m]=S,d=v}return d!==0&&(c.words[c.length++]=d),c},i._prime=function(c){if(O[c])return O[c];var d;if(c==="k256")d=new j;else if(c==="p224")d=new G;else if(c==="p192")d=new D;else if(c==="p25519")d=new V;else throw new Error("Unknown prime "+c);return O[c]=d,d};function K(b){if(typeof b=="string"){var c=i._prime(b);this.m=c.p,this.prime=c}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}K.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},K.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},K.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(g(c,c.umod(this.m)._forceRed(this)),c)},K.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},K.prototype.add=function(c,d){this._verify2(c,d);var m=c.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},K.prototype.iadd=function(c,d){this._verify2(c,d);var m=c.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},K.prototype.sub=function(c,d){this._verify2(c,d);var m=c.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},K.prototype.isub=function(c,d){this._verify2(c,d);var m=c.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},K.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},K.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},K.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},K.prototype.isqr=function(c){return this.imul(c,c.clone())},K.prototype.sqr=function(c){return this.mul(c,c)},K.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(c,m)}for(var v=this.m.subn(1),S=0;!v.isZero()&&v.andln(1)===0;)S++,v.iushrn(1);n(!v.isZero());var k=new i(1).toRed(this),N=k.redNeg(),E=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,E).cmp(N)!==0;)h.redIAdd(N);for(var B=this.pow(h,v),nt=this.pow(c,v.addn(1).iushrn(1)),Q=this.pow(c,v),rt=S;Q.cmp(k)!==0;){for(var Rt=Q,yt=0;Rt.cmp(k)!==0;yt++)Rt=Rt.redSqr();n(yt<rt);var vt=this.pow(B,new i(1).iushln(rt-yt-1));nt=nt.redMul(vt),B=vt.redSqr(),Q=Q.redMul(B),rt=yt}return nt},K.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},K.prototype.pow=function(c,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var m=4,v=new Array(1<<m);v[0]=new i(1).toRed(this),v[1]=c;for(var S=2;S<v.length;S++)v[S]=this.mul(v[S-1],c);var k=v[0],N=0,E=0,h=d.bitLength()%26;for(h===0&&(h=26),S=d.length-1;S>=0;S--){for(var B=d.words[S],nt=h-1;nt>=0;nt--){var Q=B>>nt&1;if(k!==v[0]&&(k=this.sqr(k)),Q===0&&N===0){E=0;continue}N<<=1,N|=Q,E++,!(E!==m&&(S!==0||nt!==0))&&(k=this.mul(k,v[N]),E=0,N=0)}h=26}return k},K.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},K.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},i.mont=function(c){return new H(c)};function H(b){K.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(H,K),H.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},H.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},H.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var m=c.imul(d),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=m.isub(v).iushrn(this.shift),k=S;return S.cmp(this.m)>=0?k=S.isub(this.m):S.cmpn(0)<0&&(k=S.iadd(this.m)),k._forceRed(this)},H.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new i(0)._forceRed(this);var m=c.mul(d),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=m.isub(v).iushrn(this.shift),k=S;return S.cmp(this.m)>=0?k=S.isub(this.m):S.cmpn(0)<0&&(k=S.iadd(this.m)),k._forceRed(this)},H.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,sn)})(Ia);var Au=Ia.exports;const bc=wi(Au);var zo={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=gt,n=e.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof u=="string"?p.fill(a,u):p.fill(a):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(zo,zo.exports);var Bu=zo.exports,ki=Bu.Buffer;function _h(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=ki.from(y)),!ki.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var M=0,I=0,A=0,T=y.length;A!==T&&y[A]===0;)A++,M++;for(var C=(T-A)*p+1>>>0,L=new Uint8Array(C);A!==T;){for(var W=y[A],O=0,q=C-1;(W!==0||O<I)&&q!==-1;q--,O++)W+=256*L[q]>>>0,L[q]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");I=O,A++}for(var j=C-I;j!==C&&L[j]===0;)j++;for(var G=a.repeat(M);j<C;++j)G+=r.charAt(L[j]);return G}function _(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return ki.alloc(0);for(var M=0,I=0,A=0;y[M]===a;)I++,M++;for(var T=(y.length-M)*u+1>>>0,C=new Uint8Array(T);M<y.length;){var L=y.charCodeAt(M);if(L>255)return;var W=t[L];if(W===255)return;for(var O=0,q=T-1;(W!==0||O<A)&&q!==-1;q--,O++)W+=o*C[q]>>>0,C[q]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");A=O,M++}for(var j=T-A;j!==T&&C[j]===0;)j++;var G=ki.allocUnsafe(I+(T-j));G.fill(0,0,I);for(var D=I;j!==T;)G[D++]=C[j++];return G}function R(y){var M=_(y);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:_,decode:R}}var Sh=_h,xh=Sh,Ah="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Bh=xh(Ah);const Ae=wi(Bh),vc=lu;var xe={},Ti=Bu.Buffer;function Mh(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=Ti.from(y)),!Ti.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var M=0,I=0,A=0,T=y.length;A!==T&&y[A]===0;)A++,M++;for(var C=(T-A)*p+1>>>0,L=new Uint8Array(C);A!==T;){for(var W=y[A],O=0,q=C-1;(W!==0||O<I)&&q!==-1;q--,O++)W+=256*L[q]>>>0,L[q]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");I=O,A++}for(var j=C-I;j!==C&&L[j]===0;)j++;for(var G=a.repeat(M);j<C;++j)G+=r.charAt(L[j]);return G}function _(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return Ti.alloc(0);for(var M=0,I=0,A=0;y[M]===a;)I++,M++;for(var T=(y.length-M)*u+1>>>0,C=new Uint8Array(T);M<y.length;){var L=y.charCodeAt(M);if(L>255)return;var W=t[L];if(W===255)return;for(var O=0,q=T-1;(W!==0||O<A)&&q!==-1;q--,O++)W+=o*C[q]>>>0,C[q]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");A=O,M++}for(var j=T-A;j!==T&&C[j]===0;)j++;var G=Ti.allocUnsafe(I+(T-j));G.fill(0,0,I);for(var D=I;j!==T;)G[D++]=C[j++];return G}function R(y){var M=_(y);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:_,decode:R}}var Ih=Mh,Rh=Ih,kh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Th=Rh(kh);function xn(r,t,e){return t<=r&&r<=e}function As(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Ch(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,u=o&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function Lh(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var rs=-1;function Ra(r){this.tokens=[].slice.call(r)}Ra.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():rs},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Or=-1;function po(r,t){if(r)throw TypeError("Decoder error");return t||65533}var is="utf-8";function ss(r,t){if(!(this instanceof ss))return new ss(r,t);if(r=r!==void 0?String(r).toLowerCase():is,r!==is)throw new Error("Encoding not supported. Only utf-8 is supported");t=As(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ss.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=As(e),this._streaming||(this._decoder=new Nh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Ra(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Or);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Or)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Lh(i)}};function os(r,t){if(!(this instanceof os))return new os(r,t);if(r=r!==void 0?String(r).toLowerCase():is,r!==is)throw new Error("Encoding not supported. Only utf-8 is supported");t=As(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}os.prototype={encode:function(t,e){t=t?String(t):"",e=As(e),this._streaming||(this._encoder=new Uh(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Ra(Ch(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Or);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Or;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Nh(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,u){if(u===rs&&s!==0)return s=0,po(t);if(u===rs)return Or;if(s===0){if(xn(u,0,127))return u;if(xn(u,194,223))s=1,e=u-192;else if(xn(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,e=u-224;else if(xn(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,e=u-240;else return po(t);return e=e<<6*s,null}if(!xn(u,i,o))return e=s=n=0,i=128,o=191,a.prepend(u),po(t);if(i=128,o=191,n+=1,e+=u-128<<6*(s-n),n!==s)return null;var p=e;return e=s=n=0,p}}function Uh(r){r.fatal,this.handler=function(t,e){if(e===rs)return Or;if(xn(e,0,127))return e;var n,s;xn(e,128,2047)?(n=1,s=192):xn(e,2048,65535)?(n=2,s=224):xn(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Oh=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ss,TextEncoder:os},Symbol.toStringTag,{value:"Module"})),Ph=va(Oh);var Fh=sn&&sn.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Wh=sn&&sn.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),dn=sn&&sn.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},Dh=sn&&sn.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Fh(t,r,e);return Wh(t,r),t},Mu=sn&&sn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xe,"__esModule",{value:!0});var Iu=xe.deserializeUnchecked=Nu=xe.deserialize=Lu=xe.serialize=xe.BinaryReader=xe.BinaryWriter=xe.BorshError=xe.baseDecode=xe.baseEncode=void 0;const Dn=Mu(Au),Ru=Mu(Th),zh=Dh(Ph),qh=typeof TextDecoder!="function"?zh.TextDecoder:TextDecoder,Kh=new qh("utf-8",{fatal:!0});function $h(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Ru.default.encode(Buffer.from(r))}xe.baseEncode=$h;function jh(r){return Buffer.from(Ru.default.decode(r))}xe.baseDecode=jh;const go=1024;class Oe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xe.BorshError=Oe;class ku{constructor(){this.buf=Buffer.alloc(go),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(go)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Dn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Dn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Dn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Dn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(go)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}xe.BinaryWriter=ku;function pn(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Oe("Reached the end of buffer when deserializing")}throw i}}}class Ze{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Dn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Dn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Dn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Dn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Oe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Kh.decode(e)}catch(n){throw new Oe(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}dn([pn],Ze.prototype,"readU8",null);dn([pn],Ze.prototype,"readU16",null);dn([pn],Ze.prototype,"readU32",null);dn([pn],Ze.prototype,"readU64",null);dn([pn],Ze.prototype,"readU128",null);dn([pn],Ze.prototype,"readU256",null);dn([pn],Ze.prototype,"readU512",null);dn([pn],Ze.prototype,"readString",null);dn([pn],Ze.prototype,"readFixedArray",null);dn([pn],Ze.prototype,"readArray",null);xe.BinaryReader=Ze;function Tu(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Zn(r,t,e,n,s){try{if(typeof n=="string")s[`write${Tu(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Oe(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Oe(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)Zn(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{Zn(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),Zn(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{Zn(r,t,o,n.key,s),Zn(r,t,i,n.value,s)});break}default:throw new Oe(`FieldType ${n} unrecognized`)}else Cu(r,e,s)}catch(i){throw i instanceof Oe&&i.addToFieldPath(t),i}}function Cu(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Oe(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Zn(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){e.writeU8(i),Zn(r,o,t[o],a,e);break}}}else throw new Oe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Hh(r,t,e=ku){const n=new e;return Cu(r,t,n),n.toArray()}var Lu=xe.serialize=Hh;function Yn(r,t,e,n){try{if(typeof e=="string")return n[`read${Tu(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(Yn(r,null,e[0],n));return s}else return n.readArray(()=>Yn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Yn(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=Yn(r,t,e.key,n),u=Yn(r,t,e.value,n);s.set(a,u)}return s}return ka(r,e,n)}catch(s){throw s instanceof Oe&&s.addToFieldPath(t),s}}function ka(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Oe(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=Yn(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new Oe(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=Yn(r,i,o,e);return new t({[i]:a})}throw new Oe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Vh(r,t,e,n=Ze){const s=new n(e),i=ka(r,t,s);if(s.offset<e.length)throw new Oe(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var Nu=xe.deserialize=Vh;function Gh(r,t,e,n=Ze){const s=new n(e);return ka(r,t,s)}Iu=xe.deserializeUnchecked=Gh;var z={};Object.defineProperty(z,"__esModule",{value:!0});z.s16=z.s8=z.nu64be=z.u48be=z.u40be=z.u32be=z.u24be=z.u16be=_e=z.nu64=z.u48=z.u40=at=z.u32=z.u24=Xe=z.u16=St=z.u8=or=z.offset=z.greedy=z.Constant=z.UTF8=z.CString=z.Blob=z.Boolean=z.BitField=z.BitStructure=z.VariantLayout=z.Union=z.UnionLayoutDiscriminator=z.UnionDiscriminator=z.Structure=z.Sequence=z.DoubleBE=z.Double=z.FloatBE=z.Float=z.NearInt64BE=z.NearInt64=z.NearUInt64BE=z.NearUInt64=z.IntBE=z.Int=z.UIntBE=z.UInt=z.OffsetLayout=z.GreedyCount=z.ExternalLayout=z.bindConstructorLayout=z.nameWithProperty=z.Layout=z.uint8ArrayToBuffer=z.checkUint8Array=void 0;z.constant=z.utf8=z.cstr=Ct=z.blob=z.unionLayoutDiscriminator=z.union=Ce=z.seq=z.bits=it=z.struct=z.f64be=z.f64=z.f32be=z.f32=z.ns64be=z.s48be=z.s40be=z.s32be=z.s24be=z.s16be=je=z.ns64=z.s48=z.s40=z.s32=z.s24=void 0;const Ta=gt;function $r(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}z.checkUint8Array=$r;function _t(r){return $r(r),Ta.Buffer.from(r.buffer,r.byteOffset,r.length)}z.uint8ArrayToBuffer=_t;class At{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}z.Layout=At;function Ca(r,t){return t.property?r+"["+t.property+"]":r}z.nameWithProperty=Ca;function Zh(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof At))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}z.bindConstructorLayout=Zh;class We extends At{isCount(){throw new Error("ExternalLayout is abstract")}}z.ExternalLayout=We;class Uu extends We{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){$r(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}z.GreedyCount=Uu;class La extends We{constructor(t,e=0,n){if(!(t instanceof At))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof tn||this.layout instanceof rn}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}z.OffsetLayout=La;class tn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _t(t).readUIntLE(e,this.span)}encode(t,e,n=0){return _t(e).writeUIntLE(t,n,this.span),this.span}}z.UInt=tn;class rn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _t(t).readUIntBE(e,this.span)}encode(t,e,n=0){return _t(e).writeUIntBE(t,n,this.span),this.span}}z.UIntBE=rn;class ur extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _t(t).readIntLE(e,this.span)}encode(t,e,n=0){return _t(e).writeIntLE(t,n,this.span),this.span}}z.Int=ur;class jr extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _t(t).readIntBE(e,this.span)}encode(t,e,n=0){return _t(e).writeIntBE(t,n,this.span),this.span}}z.IntBE=jr;const qo=Math.pow(2,32);function Bs(r){const t=Math.floor(r/qo),e=r-t*qo;return{hi32:t,lo32:e}}function Ms(r,t){return r*qo+t}class Ou extends At{constructor(t){super(8,t)}decode(t,e=0){const n=_t(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return Ms(i,s)}encode(t,e,n=0){const s=Bs(t),i=_t(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}z.NearUInt64=Ou;class Pu extends At{constructor(t){super(8,t)}decode(t,e=0){const n=_t(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return Ms(s,i)}encode(t,e,n=0){const s=Bs(t),i=_t(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}z.NearUInt64BE=Pu;class Fu extends At{constructor(t){super(8,t)}decode(t,e=0){const n=_t(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return Ms(i,s)}encode(t,e,n=0){const s=Bs(t),i=_t(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}z.NearInt64=Fu;class Wu extends At{constructor(t){super(8,t)}decode(t,e=0){const n=_t(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return Ms(s,i)}encode(t,e,n=0){const s=Bs(t),i=_t(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}z.NearInt64BE=Wu;class Du extends At{constructor(t){super(4,t)}decode(t,e=0){return _t(t).readFloatLE(e)}encode(t,e,n=0){return _t(e).writeFloatLE(t,n),4}}z.Float=Du;class zu extends At{constructor(t){super(4,t)}decode(t,e=0){return _t(t).readFloatBE(e)}encode(t,e,n=0){return _t(e).writeFloatBE(t,n),4}}z.FloatBE=zu;class qu extends At{constructor(t){super(8,t)}decode(t,e=0){return _t(t).readDoubleLE(e)}encode(t,e,n=0){return _t(e).writeDoubleLE(t,n),8}}z.Double=qu;class Ku extends At{constructor(t){super(8,t)}decode(t,e=0){return _t(t).readDoubleBE(e)}encode(t,e,n=0){return _t(e).writeDoubleBE(t,n),8}}z.DoubleBE=Ku;class $u extends At{constructor(t,e,n){if(!(t instanceof At))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof We&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof We)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof We&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof We&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,a)=>o+s.encode(a,e,n+o),0);return this.count instanceof We&&this.count.encode(t.length,e,n),i}}z.Sequence=$u;class ju extends At{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof At,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){$r(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const p=t[a.property];p!==void 0&&(o=a.encode(p,e,n),0>u&&(u=a.getSpan(e,n)))}i=n,n+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}z.Structure=ju;class Na{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}z.UnionDiscriminator=Na;class as extends Na{constructor(t,e){if(!(t instanceof We&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}z.UnionLayoutDiscriminator=as;class Ua extends At{constructor(t,e,n){let s;if(t instanceof tn||t instanceof rn)s=new as(new La(t));else if(t instanceof We&&t.isCount())s=new as(t);else if(t instanceof Na)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof At))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof tn||t instanceof rn)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof tn||t instanceof rn,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(t,e+u)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(t[i.property],e,n),a+o.encode(t[o.property],e,n+a)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Hu(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}z.Union=Ua;class Hu extends At{constructor(t,e,n,s){if(!(t instanceof Ua))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof At))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}z.VariantLayout=Hu;function yr(r){return 0>r&&(r+=4294967296),r}class Oa extends At{constructor(t,e,n){if(!(t instanceof tn||t instanceof rn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=yr(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Pa(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Vu(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}z.BitStructure=Oa;class Pa{constructor(t,e,n){if(!(t instanceof Oa))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,a)=>o+a.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=yr(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return yr(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==yr(t&this.valueMask))throw new TypeError(Ca("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=yr(t<<this.start);this.container._packedSetValue(yr(e&~this.wordMask)|n)}}z.BitField=Pa;let Vu=class extends Pa{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};z.Boolean=Vu;class Gu extends At{constructor(t,e){if(!(t instanceof We&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof We||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),_t(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof We&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Ca("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=_t(t);return _t(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof We&&this.length.encode(s,e,n),s}}z.Blob=Gu;class Zu extends At{constructor(t){super(-1,t)}getSpan(t,e=0){$r(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return _t(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ta.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=_t(e);return s.copy(o,n),o[n+i]=0,i+1}}z.CString=Zu;class Yu extends At{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return $r(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return _t(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ta.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(_t(e),n),i}}z.UTF8=Yu;class Ju extends At{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}z.Constant=Ju;z.greedy=(r,t)=>new Uu(r,t);var or=z.offset=(r,t,e)=>new La(r,t,e),St=z.u8=r=>new tn(1,r),Xe=z.u16=r=>new tn(2,r);z.u24=r=>new tn(3,r);var at=z.u32=r=>new tn(4,r);z.u40=r=>new tn(5,r);z.u48=r=>new tn(6,r);var _e=z.nu64=r=>new Ou(r);z.u16be=r=>new rn(2,r);z.u24be=r=>new rn(3,r);z.u32be=r=>new rn(4,r);z.u40be=r=>new rn(5,r);z.u48be=r=>new rn(6,r);z.nu64be=r=>new Pu(r);z.s8=r=>new ur(1,r);z.s16=r=>new ur(2,r);z.s24=r=>new ur(3,r);z.s32=r=>new ur(4,r);z.s40=r=>new ur(5,r);z.s48=r=>new ur(6,r);var je=z.ns64=r=>new Fu(r);z.s16be=r=>new jr(2,r);z.s24be=r=>new jr(3,r);z.s32be=r=>new jr(4,r);z.s40be=r=>new jr(5,r);z.s48be=r=>new jr(6,r);z.ns64be=r=>new Wu(r);z.f32=r=>new Du(r);z.f32be=r=>new zu(r);z.f64=r=>new qu(r);z.f64be=r=>new Ku(r);var it=z.struct=(r,t,e)=>new ju(r,t,e);z.bits=(r,t,e)=>new Oa(r,t,e);var Ce=z.seq=(r,t,e)=>new $u(r,t,e);z.union=(r,t,e)=>new Ua(r,t,e);z.unionLayoutDiscriminator=(r,t)=>new as(r,t);var Ct=z.blob=(r,t)=>new Gu(r,t);z.cstr=r=>new Zu(r);z.utf8=(r,t)=>new Yu(r,t);z.constant=(r,t)=>new Ju(r,t);var Yh=8078e3,Jh=8078001,Xh=8078004,Qh=8078005,td=8078006,ed=8078011;function Xu(r){return Array.isArray(r)?"%5B"+r.map(Xu).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function nd([r,t]){return`${r}=${Xu(t)}`}function rd(r){const t=Object.entries(r).map(nd).join("&");return btoa(t)}function id(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${rd(t)}'`),`${e}\``}}var kr=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...a}=e;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=id(t,n);super(i,s);ge(this,"cause",this.cause);ge(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function sd(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function od(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(sd(t,r));return r.write(t,e,0),e}})}function ad(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function wr(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function cd(r,t){if(wr(r)!==wr(t))throw new kr(Xh);if(wr(r)&&wr(t)&&r.fixedSize!==t.fixedSize)throw new kr(Qh,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!wr(r)&&!wr(t)&&r.maxSize!==t.maxSize)throw new kr(td,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function ud(r,t,e=0){if(t.length-e<=0)throw new kr(Yh,{codecDescription:r})}function ld(r,t,e,n=0){const s=e.length-n;if(s<t)throw new kr(Jh,{bytesLength:s,codecDescription:r,expected:t})}function fd(r,t,e,n){if(n<t||n>e)throw new kr(ed,{codecDescription:r,max:e,min:t,value:n})}function Qu(r){return(r==null?void 0:r.endian)!==1}function hd(r){return od({fixedSize:r.size,write(t,e,n){r.range&&fd(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,Qu(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function dd(r){return ad({fixedSize:r.size,read(t,e=0){ud(r.name,t,e),ld(r.name,r.size,t,e);const n=new DataView(pd(t,e,r.size));return[r.get(n,Qu(r.config)),e+r.size]}})}function pd(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var gd=(r={})=>hd({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),md=(r={})=>dd({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),wd=(r={})=>cd(gd(r),md(r));class yd extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function bd(r){return vi(r)&&typeof r[Symbol.iterator]=="function"}function vi(r){return typeof r=="object"&&r!=null}function cs(r){return vi(r)&&!Array.isArray(r)}function on(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function vd(r){const{done:t,value:e}=r.next();return t?void 0:e}function Ed(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${on(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*Ec(r,t,e,n){bd(r)||(r=[r]);for(const s of r){const i=Ed(s,t,e,n);i&&(yield i)}}function*Fa(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let u="valid";for(const p of t.validator(r,a))p.explanation=e.message,u="not_valid",yield[p,void 0];for(let[p,g,_]of t.entries(r,a)){const R=Fa(g,_,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,g],coerce:i,mask:o,message:e.message});for(const y of R)y[0]?(u=y[0].refinement!=null?"not_refined":"not_valid",yield[y[0],void 0]):i&&(g=y[1],p===void 0?r=g:r instanceof Map?r.set(p,g):r instanceof Set?r.add(g):vi(r)&&(g!==void 0||p in r)&&(r[p]=g))}if(u!=="not_valid")for(const p of t.refiner(r,a))p.explanation=e.message,u="not_refined",yield[p,void 0];u==="valid"&&(yield[void 0,r])}let gn=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(u,p)=>{const g=s(u,p);return Ec(g,p,this,u)}:this.validator=()=>[],i?this.refiner=(u,p)=>{const g=i(u,p);return Ec(g,p,this,u)}:this.refiner=()=>[]}assert(t,e){return _d(t,this,e)}create(t,e){return X(t,this,e)}is(t){return tl(t,this)}mask(t,e){return Sd(t,this,e)}validate(t,e={}){return Ei(t,this,e)}};function _d(r,t,e){const n=Ei(r,t,{message:e});if(n[0])throw n[0]}function X(r,t,e){const n=Ei(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Sd(r,t,e){const n=Ei(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function tl(r,t){return!Ei(r,t)[0]}function Ei(r,t,e={}){const n=Fa(r,t,e),s=vd(n);return s[0]?[new yd(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function lr(r,t){return new gn({type:r,schema:null,validator:t})}function xd(){return lr("any",()=>!0)}function tt(r){return new gn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${on(t)}`}})}function hn(){return lr("boolean",r=>typeof r=="boolean")}function Wa(r){return lr("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${on(t)}`)}function Dt(r){const t=on(r),e=typeof r;return new gn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${on(n)}`}})}function Ad(){return lr("never",()=>!1)}function et(r){return new gn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function F(){return lr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${on(r)}`)}function ut(r){return new gn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function el(r,t){return new gn({type:"record",schema:null,*entries(e){if(vi(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return cs(e)||`Expected an object, but received: ${on(e)}`},coercer(e){return cs(e)?{...e}:e}})}function J(){return lr("string",r=>typeof r=="string"||`Expected a string, but received: ${on(r)}`)}function Da(r){const t=Ad();return new gn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${on(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(r){const t=Object.keys(r);return new gn({type:"type",schema:r,*entries(e){if(vi(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return cs(e)||`Expected an object, but received: ${on(e)}`},coercer(e){return cs(e)?{...e}:e}})}function Pe(r){const t=r.map(e=>e.type).join(" | ");return new gn({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Fa(e,i,n),[a]=o;if(a[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${on(e)}`,...s]}})}function Hr(){return lr("unknown",()=>!0)}function _i(r,t,e){return new gn({...r,coercer:(n,s)=>tl(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Ci,Bd=new Uint8Array(16);function nl(){if(!Ci&&(Ci=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ci))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ci(Bd)}const Md=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Is(r){return typeof r=="string"&&Md.test(r)}var Ee=[];for(var mo=0;mo<256;++mo)Ee.push((mo+256).toString(16).substr(1));function Rs(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ee[r[t+0]]+Ee[r[t+1]]+Ee[r[t+2]]+Ee[r[t+3]]+"-"+Ee[r[t+4]]+Ee[r[t+5]]+"-"+Ee[r[t+6]]+Ee[r[t+7]]+"-"+Ee[r[t+8]]+Ee[r[t+9]]+"-"+Ee[r[t+10]]+Ee[r[t+11]]+Ee[r[t+12]]+Ee[r[t+13]]+Ee[r[t+14]]+Ee[r[t+15]]).toLowerCase();if(!Is(e))throw TypeError("Stringified UUID is invalid");return e}var _c,wo,yo=0,bo=0;function Id(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||_c,o=r.clockseq!==void 0?r.clockseq:wo;if(i==null||o==null){var a=r.random||(r.rng||nl)();i==null&&(i=_c=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=wo=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:bo+1,g=u-yo+(p-bo)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||u>yo)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yo=u,bo=p,wo=o,u+=122192928e5;var _=((u&268435455)*1e4+p)%4294967296;s[n++]=_>>>24&255,s[n++]=_>>>16&255,s[n++]=_>>>8&255,s[n++]=_&255;var R=u/4294967296*1e4&268435455;s[n++]=R>>>8&255,s[n++]=R&255,s[n++]=R>>>24&15|16,s[n++]=R>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var y=0;y<6;++y)s[n+y]=i[y];return t||Rs(s)}function rl(r){if(!Is(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Rd(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var kd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Td="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function il(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=Rd(s)),typeof i=="string"&&(i=rl(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=u[p];return o}return Rs(u)}try{n.name=r}catch{}return n.DNS=kd,n.URL=Td,n}function Cd(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Ld(Nd(Ud(r),r.length*8))}function Ld(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function sl(r){return(r+64>>>9<<4)+14+1}function Nd(r,t){r[t>>5]|=128<<t%32,r[sl(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,u=n,p=s,g=i;e=Ie(e,n,s,i,r[o],7,-680876936),i=Ie(i,e,n,s,r[o+1],12,-389564586),s=Ie(s,i,e,n,r[o+2],17,606105819),n=Ie(n,s,i,e,r[o+3],22,-1044525330),e=Ie(e,n,s,i,r[o+4],7,-176418897),i=Ie(i,e,n,s,r[o+5],12,1200080426),s=Ie(s,i,e,n,r[o+6],17,-1473231341),n=Ie(n,s,i,e,r[o+7],22,-45705983),e=Ie(e,n,s,i,r[o+8],7,1770035416),i=Ie(i,e,n,s,r[o+9],12,-1958414417),s=Ie(s,i,e,n,r[o+10],17,-42063),n=Ie(n,s,i,e,r[o+11],22,-1990404162),e=Ie(e,n,s,i,r[o+12],7,1804603682),i=Ie(i,e,n,s,r[o+13],12,-40341101),s=Ie(s,i,e,n,r[o+14],17,-1502002290),n=Ie(n,s,i,e,r[o+15],22,1236535329),e=Re(e,n,s,i,r[o+1],5,-165796510),i=Re(i,e,n,s,r[o+6],9,-1069501632),s=Re(s,i,e,n,r[o+11],14,643717713),n=Re(n,s,i,e,r[o],20,-373897302),e=Re(e,n,s,i,r[o+5],5,-701558691),i=Re(i,e,n,s,r[o+10],9,38016083),s=Re(s,i,e,n,r[o+15],14,-660478335),n=Re(n,s,i,e,r[o+4],20,-405537848),e=Re(e,n,s,i,r[o+9],5,568446438),i=Re(i,e,n,s,r[o+14],9,-1019803690),s=Re(s,i,e,n,r[o+3],14,-187363961),n=Re(n,s,i,e,r[o+8],20,1163531501),e=Re(e,n,s,i,r[o+13],5,-1444681467),i=Re(i,e,n,s,r[o+2],9,-51403784),s=Re(s,i,e,n,r[o+7],14,1735328473),n=Re(n,s,i,e,r[o+12],20,-1926607734),e=ke(e,n,s,i,r[o+5],4,-378558),i=ke(i,e,n,s,r[o+8],11,-2022574463),s=ke(s,i,e,n,r[o+11],16,1839030562),n=ke(n,s,i,e,r[o+14],23,-35309556),e=ke(e,n,s,i,r[o+1],4,-1530992060),i=ke(i,e,n,s,r[o+4],11,1272893353),s=ke(s,i,e,n,r[o+7],16,-155497632),n=ke(n,s,i,e,r[o+10],23,-1094730640),e=ke(e,n,s,i,r[o+13],4,681279174),i=ke(i,e,n,s,r[o],11,-358537222),s=ke(s,i,e,n,r[o+3],16,-722521979),n=ke(n,s,i,e,r[o+6],23,76029189),e=ke(e,n,s,i,r[o+9],4,-640364487),i=ke(i,e,n,s,r[o+12],11,-421815835),s=ke(s,i,e,n,r[o+15],16,530742520),n=ke(n,s,i,e,r[o+2],23,-995338651),e=Te(e,n,s,i,r[o],6,-198630844),i=Te(i,e,n,s,r[o+7],10,1126891415),s=Te(s,i,e,n,r[o+14],15,-1416354905),n=Te(n,s,i,e,r[o+5],21,-57434055),e=Te(e,n,s,i,r[o+12],6,1700485571),i=Te(i,e,n,s,r[o+3],10,-1894986606),s=Te(s,i,e,n,r[o+10],15,-1051523),n=Te(n,s,i,e,r[o+1],21,-2054922799),e=Te(e,n,s,i,r[o+8],6,1873313359),i=Te(i,e,n,s,r[o+15],10,-30611744),s=Te(s,i,e,n,r[o+6],15,-1560198380),n=Te(n,s,i,e,r[o+13],21,1309151649),e=Te(e,n,s,i,r[o+4],6,-145523070),i=Te(i,e,n,s,r[o+11],10,-1120210379),s=Te(s,i,e,n,r[o+2],15,718787259),n=Te(n,s,i,e,r[o+9],21,-343485551),e=zn(e,a),n=zn(n,u),s=zn(s,p),i=zn(i,g)}return[e,n,s,i]}function Ud(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(sl(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function zn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Od(r,t){return r<<t|r>>>32-t}function ks(r,t,e,n,s,i){return zn(Od(zn(zn(t,r),zn(n,i)),s),e)}function Ie(r,t,e,n,s,i,o){return ks(t&e|~t&n,r,t,s,i,o)}function Re(r,t,e,n,s,i,o){return ks(t&n|e&~n,r,t,s,i,o)}function ke(r,t,e,n,s,i,o){return ks(t^e^n,r,t,s,i,o)}function Te(r,t,e,n,s,i,o){return ks(e^(t|~n),r,t,s,i,o)}var Pd=il("v3",48,Cd);const Fd=Pd;function Wd(r,t,e){r=r||{};var n=r.random||(r.rng||nl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Rs(n)}function Dd(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function vo(r,t){return r<<t|r>>>32-t}function zd(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),u=0;u<o;++u){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=r[u*64+g*4]<<24|r[u*64+g*4+1]<<16|r[u*64+g*4+2]<<8|r[u*64+g*4+3];a[u]=p}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<o;++_){for(var R=new Uint32Array(80),y=0;y<16;++y)R[y]=a[_][y];for(var M=16;M<80;++M)R[M]=vo(R[M-3]^R[M-8]^R[M-14]^R[M-16],1);for(var I=e[0],A=e[1],T=e[2],C=e[3],L=e[4],W=0;W<80;++W){var O=Math.floor(W/20),q=vo(I,5)+Dd(O,A,T,C)+L+t[O]+R[W]>>>0;L=C,C=T,T=vo(A,30)>>>0,A=I,I=q}e[0]=e[0]+I>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+T>>>0,e[3]=e[3]+C>>>0,e[4]=e[4]+L>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var qd=il("v5",80,zd);const Kd=qd,$d="00000000-0000-0000-0000-000000000000";function jd(r){if(!Is(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Hd=Object.freeze(Object.defineProperty({__proto__:null,NIL:$d,parse:rl,stringify:Rs,v1:Id,v3:Fd,v4:Wd,v5:Kd,validate:Is,version:jd},Symbol.toStringTag,{value:"Module"})),ol=va(Hd),Vd=ol.v4,Gd=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Vd()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var Zd=Gd;const Yd=ol.v4,Jd=Zd,fi=function(r,t){if(!(this instanceof fi))return new fi(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Yd()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var Xd=fi;fi.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const p=typeof n=="function";try{i=Jd(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return n(g);throw g}if(!p)return i}let u;try{u=JSON.stringify(i,this.options.replacer)}catch(p){return n(p)}return this.callServer(u,function(p,g){s._parseResponse(p,g,n)}),i};fi.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const Qd=wi(Xd);var al={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,p,g){this.fn=u,this.context=p,this.once=g||!1}function i(u,p,g,_,R){if(typeof g!="function")throw new TypeError("The listener must be a function");var y=new s(g,_||u,R),M=e?e+p:p;return u._events[M]?u._events[M].fn?u._events[M]=[u._events[M],y]:u._events[M].push(y):(u._events[M]=y,u._eventsCount++),u}function o(u,p){--u._eventsCount===0?u._events=new n:delete u._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],g,_;if(this._eventsCount===0)return p;for(_ in g=this._events)t.call(g,_)&&p.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},a.prototype.listeners=function(p){var g=e?e+p:p,_=this._events[g];if(!_)return[];if(_.fn)return[_.fn];for(var R=0,y=_.length,M=new Array(y);R<y;R++)M[R]=_[R].fn;return M},a.prototype.listenerCount=function(p){var g=e?e+p:p,_=this._events[g];return _?_.fn?1:_.length:0},a.prototype.emit=function(p,g,_,R,y,M){var I=e?e+p:p;if(!this._events[I])return!1;var A=this._events[I],T=arguments.length,C,L;if(A.fn){switch(A.once&&this.removeListener(p,A.fn,void 0,!0),T){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,g),!0;case 3:return A.fn.call(A.context,g,_),!0;case 4:return A.fn.call(A.context,g,_,R),!0;case 5:return A.fn.call(A.context,g,_,R,y),!0;case 6:return A.fn.call(A.context,g,_,R,y,M),!0}for(L=1,C=new Array(T-1);L<T;L++)C[L-1]=arguments[L];A.fn.apply(A.context,C)}else{var W=A.length,O;for(L=0;L<W;L++)switch(A[L].once&&this.removeListener(p,A[L].fn,void 0,!0),T){case 1:A[L].fn.call(A[L].context);break;case 2:A[L].fn.call(A[L].context,g);break;case 3:A[L].fn.call(A[L].context,g,_);break;case 4:A[L].fn.call(A[L].context,g,_,R);break;default:if(!C)for(O=1,C=new Array(T-1);O<T;O++)C[O-1]=arguments[O];A[L].fn.apply(A[L].context,C)}}return!0},a.prototype.on=function(p,g,_){return i(this,p,g,_,!1)},a.prototype.once=function(p,g,_){return i(this,p,g,_,!0)},a.prototype.removeListener=function(p,g,_,R){var y=e?e+p:p;if(!this._events[y])return this;if(!g)return o(this,y),this;var M=this._events[y];if(M.fn)M.fn===g&&(!R||M.once)&&(!_||M.context===_)&&o(this,y);else{for(var I=0,A=[],T=M.length;I<T;I++)(M[I].fn!==g||R&&!M[I].once||_&&M[I].context!==_)&&A.push(M[I]);A.length?this._events[y]=A.length===1?A[0]:A:o(this,y)}return this},a.prototype.removeAllListeners=function(p){var g;return p?(g=e?e+p:p,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(al);var t0=al.exports;const za=wi(t0);var e0=class extends za{constructor(t,e,n){super();ge(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function n0(r,t){return new e0(r,t)}var r0=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},i0=class extends za{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},u,p){super();ge(this,"address");ge(this,"rpc_id");ge(this,"queue");ge(this,"options");ge(this,"autoconnect");ge(this,"ready");ge(this,"reconnect");ge(this,"reconnect_timer_id");ge(this,"reconnect_interval");ge(this,"max_reconnects");ge(this,"rest_options");ge(this,"current_reconnects");ge(this,"generate_request_id");ge(this,"socket");ge(this,"webSocketFactory");ge(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new r0,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(u),s,p=>{if(p)return o(p);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=gt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class cl extends su{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,vf(t);const n=Aa(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Lr(i)}update(t){return es(this),this.iHash.update(t),this}digestInto(t){es(this),fn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ul=(r,t,e)=>new cl(r,t).update(e).digest();ul.create=(r,t)=>new cl(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sc(r){r.lowS!==void 0&&cr("lowS",r.lowS),r.prehash!==void 0&&cr("prehash",r.prehash)}class s0 extends Error{constructor(t=""){super(t)}}const _n={Err:s0,_tlv:{encode:(r,t)=>{const{Err:e}=_n;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Ri(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Ri(s.length/2|128):"";return Ri(r)+i+s+t},decode(r,t){const{Err:e}=_n;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const p=t.subarray(n,n+u);if(p.length!==u)throw new e("tlv.decode: length bytes not complete");if(p[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const g of p)o=o<<8|g;if(n+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=_n;if(r<si)throw new t("integer: negative integers are not allowed");let e=Ri(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=_n;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Es(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=_n,s=Zt("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,i),{v:p,l:g}=n.decode(2,u);if(g.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(p)}},hexFromSig(r){const{_tlv:t,_int:e}=_n,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},si=BigInt(0),oi=BigInt(1),o0=BigInt(2),Li=BigInt(3),a0=BigInt(4);function c0(r,t,e){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,t)),e)}return n}function ll(r,t,e){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Zt("private key",i);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const u=new Uint8Array(n);u.set(a,u.length-a.length),a=u}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(e&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function u0(r,t={}){const{Fp:e,Fn:n}=xu("weierstrass",r,t),{h:s,n:i}=r;yi(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(G,D,V){const{x:K,y:H}=D.toAffine(),b=e.toBytes(K);if(cr("isCompressed",V),V){a();const c=!e.isOdd(H);return Mn(fl(c),b)}else return Mn(Uint8Array.of(4),b,e.toBytes(H))}function p(G){fn(G);const D=e.BYTES,V=D+1,K=2*D+1,H=G.length,b=G[0],c=G.subarray(1);if(H===V&&(b===2||b===3)){const d=e.fromBytes(c);if(!e.isValid(d))throw new Error("bad point: is not on curve, wrong x");const m=R(d);let v;try{v=e.sqrt(m)}catch(N){const E=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+E)}a();const S=e.isOdd(v);return(b&1)===1!==S&&(v=e.neg(v)),{x:d,y:v}}else if(H===K&&b===4){const d=e.fromBytes(c.subarray(D*0,D*1)),m=e.fromBytes(c.subarray(D*1,D*2));if(!y(d,m))throw new Error("bad point: is not on curve");return{x:d,y:m}}else throw new Error(`bad point: got length ${H}, expected compressed=${V} or uncompressed=${K}`)}const g=t.toBytes||u,_=t.fromBytes||p,R=c0(e,r.a,r.b);function y(G,D){const V=e.sqr(D),K=R(G);return e.eql(V,K)}if(!y(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const M=e.mul(e.pow(r.a,Li),a0),I=e.mul(e.sqr(r.b),BigInt(27));if(e.is0(e.add(M,I)))throw new Error("bad curve params: a or b");function A(G,D,V=!1){if(!e.isValid(D)||V&&e.is0(D))throw new Error(`bad point coordinate ${G}`);return D}function T(G){if(!(G instanceof O))throw new Error("ProjectivePoint expected")}const C=ns((G,D)=>{const{px:V,py:K,pz:H}=G;if(e.eql(H,e.ONE))return{x:V,y:K};const b=G.is0();D==null&&(D=b?e.ONE:e.inv(H));const c=e.mul(V,D),d=e.mul(K,D),m=e.mul(H,D);if(b)return{x:e.ZERO,y:e.ZERO};if(!e.eql(m,e.ONE))throw new Error("invZ was invalid");return{x:c,y:d}}),L=ns(G=>{if(G.is0()){if(t.allowInfinityPoint&&!e.is0(G.py))return;throw new Error("bad point: ZERO")}const{x:D,y:V}=G.toAffine();if(!e.isValid(D)||!e.isValid(V))throw new Error("bad point: x or y not field elements");if(!y(D,V))throw new Error("bad point: equation left != right");if(!G.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function W(G,D,V,K,H){return V=new O(e.mul(V.px,G),V.py,V.pz),D=ii(K,D),V=ii(H,V),D.add(V)}class O{constructor(D,V,K){this.px=A("x",D),this.py=A("y",V,!0),this.pz=A("z",K),Object.freeze(this)}static fromAffine(D){const{x:V,y:K}=D||{};if(!D||!e.isValid(V)||!e.isValid(K))throw new Error("invalid affine point");if(D instanceof O)throw new Error("projective point not allowed");return e.is0(V)&&e.is0(K)?O.ZERO:new O(V,K,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(D){return bu(O,"pz",D)}static fromBytes(D){return fn(D),O.fromHex(D)}static fromHex(D){const V=O.fromAffine(_(Zt("pointHex",D)));return V.assertValidity(),V}static fromPrivateKey(D){const V=ll(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return O.BASE.multiply(V(D))}static msm(D,V){return Su(O,n,D,V)}precompute(D=8,V=!0){return j.setWindowSize(this,D),V||this.multiply(Li),this}_setWindowSize(D){this.precompute(D)}assertValidity(){L(this)}hasEvenY(){const{y:D}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(D)}equals(D){T(D);const{px:V,py:K,pz:H}=this,{px:b,py:c,pz:d}=D,m=e.eql(e.mul(V,d),e.mul(b,H)),v=e.eql(e.mul(K,d),e.mul(c,H));return m&&v}negate(){return new O(this.px,e.neg(this.py),this.pz)}double(){const{a:D,b:V}=r,K=e.mul(V,Li),{px:H,py:b,pz:c}=this;let d=e.ZERO,m=e.ZERO,v=e.ZERO,S=e.mul(H,H),k=e.mul(b,b),N=e.mul(c,c),E=e.mul(H,b);return E=e.add(E,E),v=e.mul(H,c),v=e.add(v,v),d=e.mul(D,v),m=e.mul(K,N),m=e.add(d,m),d=e.sub(k,m),m=e.add(k,m),m=e.mul(d,m),d=e.mul(E,d),v=e.mul(K,v),N=e.mul(D,N),E=e.sub(S,N),E=e.mul(D,E),E=e.add(E,v),v=e.add(S,S),S=e.add(v,S),S=e.add(S,N),S=e.mul(S,E),m=e.add(m,S),N=e.mul(b,c),N=e.add(N,N),S=e.mul(N,E),d=e.sub(d,S),v=e.mul(N,k),v=e.add(v,v),v=e.add(v,v),new O(d,m,v)}add(D){T(D);const{px:V,py:K,pz:H}=this,{px:b,py:c,pz:d}=D;let m=e.ZERO,v=e.ZERO,S=e.ZERO;const k=r.a,N=e.mul(r.b,Li);let E=e.mul(V,b),h=e.mul(K,c),B=e.mul(H,d),nt=e.add(V,K),Q=e.add(b,c);nt=e.mul(nt,Q),Q=e.add(E,h),nt=e.sub(nt,Q),Q=e.add(V,H);let rt=e.add(b,d);return Q=e.mul(Q,rt),rt=e.add(E,B),Q=e.sub(Q,rt),rt=e.add(K,H),m=e.add(c,d),rt=e.mul(rt,m),m=e.add(h,B),rt=e.sub(rt,m),S=e.mul(k,Q),m=e.mul(N,B),S=e.add(m,S),m=e.sub(h,S),S=e.add(h,S),v=e.mul(m,S),h=e.add(E,E),h=e.add(h,E),B=e.mul(k,B),Q=e.mul(N,Q),h=e.add(h,B),B=e.sub(E,B),B=e.mul(k,B),Q=e.add(Q,B),E=e.mul(h,Q),v=e.add(v,E),E=e.mul(rt,Q),m=e.mul(nt,m),m=e.sub(m,E),E=e.mul(nt,h),S=e.mul(rt,S),S=e.add(S,E),new O(m,v,S)}subtract(D){return this.add(D.negate())}is0(){return this.equals(O.ZERO)}multiply(D){const{endo:V}=t;if(!n.isValidNot0(D))throw new Error("invalid scalar: out of range");let K,H;const b=c=>j.wNAFCached(this,c,O.normalizeZ);if(V){const{k1neg:c,k1:d,k2neg:m,k2:v}=V.splitScalar(D),{p:S,f:k}=b(d),{p:N,f:E}=b(v);H=k.add(E),K=W(V.beta,S,N,c,m)}else{const{p:c,f:d}=b(D);K=c,H=d}return O.normalizeZ([K,H])[0]}multiplyUnsafe(D){const{endo:V}=t,K=this;if(!n.isValid(D))throw new Error("invalid scalar: out of range");if(D===si||K.is0())return O.ZERO;if(D===oi)return K;if(j.hasPrecomputes(this))return this.multiply(D);if(V){const{k1neg:H,k1:b,k2neg:c,k2:d}=V.splitScalar(D),{p1:m,p2:v}=nh(O,K,b,d);return W(V.beta,m,v,H,c)}else return j.wNAFCachedUnsafe(K,D)}multiplyAndAddUnsafe(D,V,K){const H=this.multiplyUnsafe(V).add(D.multiplyUnsafe(K));return H.is0()?void 0:H}toAffine(D){return C(this,D)}isTorsionFree(){const{isTorsionFree:D}=t;return s===oi?!0:D?D(O,this):j.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:D}=t;return s===oi?this:D?D(O,this):this.multiplyUnsafe(s)}toBytes(D=!0){return cr("isCompressed",D),this.assertValidity(),g(O,this,D)}toRawBytes(D=!0){return this.toBytes(D)}toHex(D=!0){return Nr(this.toBytes(D))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}O.BASE=new O(r.Gx,r.Gy,e.ONE),O.ZERO=new O(e.ZERO,e.ONE,e.ZERO),O.Fp=e,O.Fn=n;const q=n.BITS,j=_u(O,t.endo?Math.ceil(q/2):q);return O}function fl(r){return Uint8Array.of(r?2:3)}function l0(r,t,e={}){yi(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||au,s=t.hmac||((K,...H)=>ul(t.hash,K,Mn(...H))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:u}=o;function p(K){const H=a>>oi;return K>H}function g(K){return p(K)?o.neg(K):K}function _(K,H){if(!o.isValidNot0(H))throw new Error(`invalid signature ${K}: out of range 1..CURVE.n`)}class R{constructor(H,b,c){_("r",H),_("s",b),this.r=H,this.s=b,c!=null&&(this.recovery=c),Object.freeze(this)}static fromCompact(H){const b=o.BYTES,c=Zt("compactSignature",H,b*2);return new R(o.fromBytes(c.subarray(0,b)),o.fromBytes(c.subarray(b,b*2)))}static fromDER(H){const{r:b,s:c}=_n.toSig(Zt("DER",H));return new R(b,c)}assertValidity(){}addRecoveryBit(H){return new R(this.r,this.s,H)}recoverPublicKey(H){const b=i.ORDER,{r:c,s:d,recovery:m}=this;if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");if(a*o0<b&&m>1)throw new Error("recovery id is ambiguous for h>1 curve");const S=m===2||m===3?c+a:c;if(!i.isValid(S))throw new Error("recovery id 2 or 3 invalid");const k=i.toBytes(S),N=r.fromHex(Mn(fl((m&1)===0),k)),E=o.inv(S),h=L(Zt("msgHash",H)),B=o.create(-h*E),nt=o.create(d*E),Q=r.BASE.multiplyUnsafe(B).add(N.multiplyUnsafe(nt));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,o.neg(this.s),this.recovery):this}toBytes(H){if(H==="compact")return Mn(o.toBytes(this.r),o.toBytes(this.s));if(H==="der")return xa(_n.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Nr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Nr(this.toBytes("compact"))}}const y=ll(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),M={isValidPrivateKey(K){try{return y(K),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const K=a;return Qf(n(yu(K)),K)},precompute(K=8,H=r.BASE){return H.precompute(K,!1)}};function I(K,H=!0){return r.fromPrivateKey(K).toBytes(H)}function A(K){if(typeof K=="bigint")return!1;if(K instanceof r)return!0;const b=Zt("key",K).length,c=i.BYTES,d=c+1,m=2*c+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===d))return b===d||b===m}function T(K,H,b=!0){if(A(K)===!0)throw new Error("first arg must be private key");if(A(H)===!1)throw new Error("second arg must be public key");return r.fromHex(H).multiply(y(K)).toBytes(b)}const C=t.bits2int||function(K){if(K.length>8192)throw new Error("input is too large");const H=Es(K),b=K.length*8-u;return b>0?H>>BigInt(b):H},L=t.bits2int_modN||function(K){return o.create(C(K))},W=Ss(u);function O(K){return Br("num < 2^"+u,K,si,W),o.toBytes(K)}function q(K,H,b=j){if(["recovered","canonical"].some(nt=>nt in b))throw new Error("sign() legacy options not supported");const{hash:c}=t;let{lowS:d,prehash:m,extraEntropy:v}=b;d==null&&(d=!0),K=Zt("msgHash",K),Sc(b),m&&(K=Zt("prehashed msgHash",c(K)));const S=L(K),k=y(H),N=[O(k),O(S)];if(v!=null&&v!==!1){const nt=v===!0?n(i.BYTES):v;N.push(Zt("extraEntropy",nt))}const E=Mn(...N),h=S;function B(nt){const Q=C(nt);if(!o.isValidNot0(Q))return;const rt=o.inv(Q),Rt=r.BASE.multiply(Q).toAffine(),yt=o.create(Rt.x);if(yt===si)return;const vt=o.create(rt*o.create(h+yt*k));if(vt===si)return;let wn=(Rt.x===yt?0:2)|Number(Rt.y&oi),xt=vt;return d&&p(vt)&&(xt=g(vt),wn^=1),new R(yt,xt,wn)}return{seed:E,k2sig:B}}const j={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function D(K,H,b=j){const{seed:c,k2sig:d}=q(K,H,b);return Kf(t.hash.outputLen,o.BYTES,s)(c,d)}r.BASE.precompute(8);function V(K,H,b,c=G){const d=K;H=Zt("msgHash",H),b=Zt("publicKey",b),Sc(c);const{lowS:m,prehash:v,format:S}=c;if("strict"in c)throw new Error("options.strict was renamed to lowS");if(S!==void 0&&!["compact","der","js"].includes(S))throw new Error('format must be "compact", "der" or "js"');const k=typeof d=="string"||Sa(d),N=!k&&!S&&typeof d=="object"&&d!==null&&typeof d.r=="bigint"&&typeof d.s=="bigint";if(!k&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E,h;try{if(N)if(S===void 0||S==="js")E=new R(d.r,d.s);else throw new Error("invalid format");if(k){try{S!=="compact"&&(E=R.fromDER(d))}catch(xt){if(!(xt instanceof _n.Err))throw xt}!E&&S!=="der"&&(E=R.fromCompact(d))}h=r.fromHex(b)}catch{return!1}if(!E||m&&E.hasHighS())return!1;v&&(H=t.hash(H));const{r:B,s:nt}=E,Q=L(H),rt=o.inv(nt),Rt=o.create(Q*rt),yt=o.create(B*rt),vt=r.BASE.multiplyUnsafe(Rt).add(h.multiplyUnsafe(yt));return vt.is0()?!1:o.create(vt.x)===B}return Object.freeze({getPublicKey:I,getSharedSecret:T,sign:D,verify:V,utils:M,Point:r,Signature:R})}function f0(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Kr(t.n,r.nBitLength),s={Fp:e,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:s}}function h0(r){const{CURVE:t,curveOpts:e}=f0(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:n}}function d0(r,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:r})}function p0(r){const{CURVE:t,curveOpts:e,ecdsaOpts:n}=h0(r),s=u0(t,e),i=l0(s,n,e);return d0(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function g0(r,t){const e=n=>p0({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const us={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const m0=BigInt(1),Ko=BigInt(2),xc=(r,t)=>(r+t/Ko)/t;function w0(r){const t=us.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),p=r*r*r%t,g=p*p*r%t,_=Ht(g,e,t)*g%t,R=Ht(_,e,t)*g%t,y=Ht(R,Ko,t)*p%t,M=Ht(y,s,t)*y%t,I=Ht(M,i,t)*M%t,A=Ht(I,a,t)*I%t,T=Ht(A,u,t)*A%t,C=Ht(T,a,t)*I%t,L=Ht(C,e,t)*g%t,W=Ht(L,o,t)*M%t,O=Ht(W,n,t)*p%t,q=Ht(O,Ko,t);if(!$o.eql($o.sqr(q),r))throw new Error("Cannot find square root");return q}const $o=Kr(us.p,void 0,void 0,{sqrt:w0}),y0=g0({...us,Fp:$o,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=us.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-m0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=xc(i*r,t),u=xc(-n*r,t);let p=Yt(r-a*e-u*s,t),g=Yt(-a*n-u*i,t);const _=p>o,R=g>o;if(_&&(p=t-p),R&&(g=t-g),p>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:_,k1:p,k2neg:R,k2:g}}}},lu);bi.utils.randomPrivateKey;bi.getPublicKey;function Ac(r){try{return bi.ExtendedPoint.fromHex(r),!0}catch{return!1}}const hl=(r,t)=>bi.sign(r,t.slice(0,32)),b0=bi.verify,Pr=r=>gt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?gt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):gt.Buffer.from(r);class v0{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(Lu(Fi,this))}static decode(t){return Nu(Fi,this,t)}static decodeUnchecked(t){return Iu(Fi,this,t)}}const Fi=new Map;var dl;const E0=32,Kn=32;function _0(r){return r._bn!==void 0}let Bc=1;class lt extends v0{constructor(t){if(super({}),this._bn=void 0,_0(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Ae.decode(t);if(e.length!=Kn)throw new Error("Invalid public key input");this._bn=new bc(e)}else this._bn=new bc(t);if(this._bn.byteLength()>Kn)throw new Error("Invalid public key input")}}static unique(){const t=new lt(Bc);return Bc+=1,new lt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===Kn)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),n.toBuffer()]),i=vc(s);return new lt(i)}static createProgramAddressSync(t,e){let n=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>E0)throw new TypeError("Max seed length exceeded");n=gt.Buffer.concat([n,Pr(i)])}),n=gt.Buffer.concat([n,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=vc(n);if(Ac(s))throw new Error("Invalid seeds, address must fall off the curve");return new lt(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(gt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new lt(t);return Ac(e.toBytes())}}dl=lt;lt.default=new dl("11111111111111111111111111111111");Fi.set(lt,{kind:"struct",fields:[["_bn","u256"]]});new lt("BPFLoader1111111111111111111111111111111111");const Tr=1280-40-8,qa=127,hi=64;class pl extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(pl.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class gl extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(gl.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Yr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Yr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ls{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const bt=(r="publicKey")=>Ct(32,r),S0=(r="signature")=>Ct(64,r),Mr=(r="string")=>{const t=it([at("length"),at("lengthPadding"),Ct(or(at(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const u={chars:gt.Buffer.from(i,"utf8")};return n(u,o,a)},s.alloc=i=>at().span+at().span+gt.Buffer.from(i,"utf8").length,s},x0=(r="authorized")=>it([bt("staker"),bt("withdrawer")],r),A0=(r="lockup")=>it([je("unixTimestamp"),je("epoch"),bt("custodian")],r),B0=(r="voteInit")=>it([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),St("commission")],r),M0=(r="voteAuthorizeWithSeedArgs")=>it([at("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),Mr("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],r);function He(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Ve(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Ot(r,t){if(!r)throw new Error(t||"Assertion failed")}class Ts{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const u=s(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new Ts(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ot(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),n=t.filter(([,u])=>u.isSigner&&!u.isWritable),s=t.filter(([,u])=>!u.isSigner&&u.isWritable),i=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Ot(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Ot(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([u])=>new lt(u)),...n.map(([u])=>new lt(u)),...s.map(([u])=>new lt(u)),...i.map(([u])=>new lt(u))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new lt(i),u=t.findIndex(p=>p.equals(a));u>=0&&(Ot(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const ml="Reached end of buffer unexpectedly";function An(r){if(r.length===0)throw new Error(ml);return r.shift()}function Ge(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(ml);return r.splice(...t)}class In{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new lt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ls(this.staticAccountKeys)}static compile(t){const e=Ts.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new ls(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Ae.encode(a.data)}));return new In({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ve(e,t);const n=this.instructions.map(_=>{const{accounts:R,programIdIndex:y}=_,M=Array.from(Ae.decode(_.data));let I=[];Ve(I,R.length);let A=[];return Ve(A,M.length),{programIdIndex:y,keyIndicesCount:gt.Buffer.from(I),keyIndices:R,dataLength:gt.Buffer.from(A),data:M}});let s=[];Ve(s,n.length);let i=gt.Buffer.alloc(Tr);gt.Buffer.from(s).copy(i);let o=s.length;n.forEach(_=>{const y=it([St("programIdIndex"),Ct(_.keyIndicesCount.length,"keyIndicesCount"),Ce(St("keyIndex"),_.keyIndices.length,"keyIndices"),Ct(_.dataLength.length,"dataLength"),Ce(St("userdatum"),_.data.length,"data")]).encode(_,i,o);o+=y}),i=i.slice(0,o);const a=it([Ct(1,"numRequiredSignatures"),Ct(1,"numReadonlySignedAccounts"),Ct(1,"numReadonlyUnsignedAccounts"),Ct(e.length,"keyCount"),Ce(bt("key"),t,"keys"),bt("recentBlockhash")]),u={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(_=>Pr(_.toBytes())),recentBlockhash:Ae.decode(this.recentBlockhash)};let p=gt.Buffer.alloc(2048);const g=a.encode(u,p);return i.copy(p,g),p.slice(0,g+i.length)}static from(t){let e=[...t];const n=An(e);if(n!==(n&qa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=An(e),i=An(e),o=He(e);let a=[];for(let R=0;R<o;R++){const y=Ge(e,0,Kn);a.push(new lt(gt.Buffer.from(y)))}const u=Ge(e,0,Kn),p=He(e);let g=[];for(let R=0;R<p;R++){const y=An(e),M=He(e),I=Ge(e,0,M),A=He(e),T=Ge(e,0,A),C=Ae.encode(gt.Buffer.from(T));g.push({programIdIndex:y,accounts:I,data:C})}const _={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Ae.encode(gt.Buffer.from(u)),accountKeys:a,instructions:g};return new In(_)}}class di{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ls(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Ts.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const g of i){const _=e.extractTableLookup(g);if(_!==void 0){const[R,{writable:y,readonly:M}]=_;n.push(R),s.writable.push(...y),s.readonly.push(...M)}}const[o,a]=e.getMessageComponents(),p=new ls(a,s).compileInstructions(t.instructions);return new di({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const t=Array();Ve(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Ve(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ve(i,this.addressTableLookups.length);const o=it([St("prefix"),it([St("numRequiredSignatures"),St("numReadonlySignedAccounts"),St("numReadonlyUnsignedAccounts")],"header"),Ct(t.length,"staticAccountKeysLength"),Ce(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),Ct(n.length,"instructionsLength"),Ct(e.length,"serializedInstructions"),Ct(i.length,"addressTableLookupsLength"),Ct(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Tr),u=128,p=o.encode({prefix:u,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:Ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,p)}serializeInstructions(){let t=0;const e=new Uint8Array(Tr);for(const n of this.compiledInstructions){const s=Array();Ve(s,n.accountKeyIndexes.length);const i=Array();Ve(i,n.data.length);const o=it([St("programIdIndex"),Ct(s.length,"encodedAccountKeyIndexesLength"),Ce(St(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ct(i.length,"encodedDataLength"),Ct(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Tr);for(const n of this.addressTableLookups){const s=Array();Ve(s,n.writableIndexes.length);const i=Array();Ve(i,n.readonlyIndexes.length);const o=it([bt("accountKey"),Ct(s.length,"encodedWritableIndexesLength"),Ce(St(),n.writableIndexes.length,"writableIndexes"),Ct(i.length,"encodedReadonlyIndexesLength"),Ce(St(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=An(e),s=n&qa;Ot(n!==s,"Expected versioned message but received legacy message");const i=s;Ot(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:An(e),numReadonlySignedAccounts:An(e),numReadonlyUnsignedAccounts:An(e)},a=[],u=He(e);for(let M=0;M<u;M++)a.push(new lt(Ge(e,0,Kn)));const p=Ae.encode(Ge(e,0,Kn)),g=He(e),_=[];for(let M=0;M<g;M++){const I=An(e),A=He(e),T=Ge(e,0,A),C=He(e),L=new Uint8Array(Ge(e,0,C));_.push({programIdIndex:I,accountKeyIndexes:T,data:L})}const R=He(e),y=[];for(let M=0;M<R;M++){const I=new lt(Ge(e,0,Kn)),A=He(e),T=Ge(e,0,A),C=He(e),L=Ge(e,0,C);y.push({accountKey:I,writableIndexes:T,readonlyIndexes:L})}return new di({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:_,addressTableLookups:y})}}const Cs={deserializeMessageVersion(r){const t=r[0],e=t&qa;return e===t?"legacy":e},deserialize:r=>{const t=Cs.deserializeMessageVersion(r);if(t==="legacy")return In.from(r);if(t===0)return di.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Un=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const I0=gt.Buffer.alloc(hi).fill(0);class Mc{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Qe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Mc(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(T=>{i.push({...T})});const A=I.programId.toString();s.includes(A)||s.push(A)}),s.forEach(I=>{i.push({pubkey:new lt(I),isSigner:!1,isWritable:!1})});const o=[];i.forEach(I=>{const A=I.pubkey.toString(),T=o.findIndex(C=>C.pubkey.toString()===A);T>-1?(o[T].isWritable=o[T].isWritable||I.isWritable,o[T].isSigner=o[T].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,A){if(I.isSigner!==A.isSigner)return I.isSigner?-1:1;if(I.isWritable!==A.isWritable)return I.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",T)});const a=o.findIndex(I=>I.pubkey.equals(n));if(a>-1){const[I]=o.splice(a,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const I of this.signatures){const A=o.findIndex(T=>T.pubkey.equals(I.publicKey));if(A>-1)o[A].isSigner||(o[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let u=0,p=0,g=0;const _=[],R=[];o.forEach(({pubkey:I,isSigner:A,isWritable:T})=>{A?(_.push(I.toString()),u+=1,T||(p+=1)):(R.push(I.toString()),T||(g+=1))});const y=_.concat(R),M=e.map(I=>{const{data:A,programId:T}=I;return{programIdIndex:y.indexOf(T.toString()),accounts:I.keys.map(C=>y.indexOf(C.pubkey.toString())),data:Ae.encode(A)}});return M.forEach(I=>{Ot(I.programIdIndex>=0),I.accounts.forEach(A=>Ot(A>=0))}),new In({header:{numRequiredSignatures:u,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:y,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=hl(n,s.secretKey);this._addSignature(s.publicKey,Pr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Ot(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):b0(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Ve(n,e.length);const s=n.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return Ot(e.length<256),gt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(Ot(o.length===64,"signature has invalid length"),gt.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),Ot(i.length<=Tr,`Transaction too large: ${i.length} > ${Tr}`),i}get keys(){return Ot(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ot(this.instructions.length===1),this.instructions[0].programId}get data(){return Ot(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=He(e);let s=[];for(let i=0;i<n;i++){const o=Ge(e,0,hi);s.push(Ae.encode(gt.Buffer.from(o)))}return Qe.populate(In.from(e),s)}static populate(t,e=[]){const n=new Qe;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==Ae.encode(I0)?null:Ae.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Mc({keys:i,programId:t.accountKeys[s.programIdIndex],data:Ae.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class $n{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ot(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(hi));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ve(e,this.signatures.length);const n=it([Ct(e.length,"encodedSignaturesLength"),Ce(S0(),this.signatures.length,"signatures"),Ct(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=He(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Ge(e,0,hi)));const i=Cs.deserialize(new Uint8Array(e));return new $n(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));Ot(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=hl(e,s.secretKey)}}addSignature(t,e){Ot(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ot(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const R0=160,k0=64,T0=R0/k0,C0=1e3/T0;new lt("SysvarC1ock11111111111111111111111111111111");new lt("SysvarEpochSchedu1e111111111111111111111111");new lt("Sysvar1nstructions1111111111111111111111111");new lt("SysvarRecentB1ockHashes11111111111111111111");new lt("SysvarRent111111111111111111111111111111111");new lt("SysvarRewards111111111111111111111111111111");new lt("SysvarS1otHashes111111111111111111111111111");new lt("SysvarS1otHistory11111111111111111111111111");new lt("SysvarStakeHistory1111111111111111111111111");class Ic extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(u=>u)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class ot extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function br(r){return new Promise(t=>setTimeout(t,r))}const L0=_e("lamportsPerSignature"),wl=it([at("version"),at("state"),bt("authorizedPubkey"),bt("nonce"),it([L0],"feeCalculator")]);wl.span;class Ka{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=wl.decode(Pr(t),0);return new Ka({authorizedPubkey:new lt(e.authorizedPubkey),nonce:new lt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Fr(r){const t=Ct(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=wd();return s.decode=(o,a)=>{const u=e(o,a);return i.decode(u)},s.encode=(o,a,u)=>{const p=i.encode(o);return n(p,a,u)},s}Object.freeze({Create:{index:0,layout:it([at("instruction"),je("lamports"),je("space"),bt("programId")])},Assign:{index:1,layout:it([at("instruction"),bt("programId")])},Transfer:{index:2,layout:it([at("instruction"),Fr("lamports")])},CreateWithSeed:{index:3,layout:it([at("instruction"),bt("base"),Mr("seed"),je("lamports"),je("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:it([at("instruction")])},WithdrawNonceAccount:{index:5,layout:it([at("instruction"),je("lamports")])},InitializeNonceAccount:{index:6,layout:it([at("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:it([at("instruction"),bt("authorized")])},Allocate:{index:8,layout:it([at("instruction"),je("space")])},AllocateWithSeed:{index:9,layout:it([at("instruction"),bt("base"),Mr("seed"),je("space"),bt("programId")])},AssignWithSeed:{index:10,layout:it([at("instruction"),bt("base"),Mr("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:it([at("instruction"),Fr("lamports"),Mr("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:it([at("instruction")])}});new lt("11111111111111111111111111111111");new lt("BPFLoader2111111111111111111111111111111111");function N0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eo,Rc;function U0(){if(Rc)return Eo;Rc=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,a,u,p,g,_;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(_=r.call(n),_==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=e(n[i],!0)+",";return o>-1&&(a+=e(n[i],!0)),a+"]"}else if(_==="[object Object]"){for(u=t(n).sort(),o=u.length,a="",i=0;i<o;)p=u[i],g=e(n[p],!1),g!==void 0&&(a&&(a+=","),a+=JSON.stringify(p)+":"+g),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Eo=function(n){var s=e(n,!1);if(s!==void 0)return""+s},Eo}var O0=U0(),kc=N0(O0);const Gr=32;function _o(r){let t=0;for(;r>1;)r/=2,t++;return t}function P0(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class F0{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=_o(P0(t+Gr+1))-_o(Gr)-1,n=this.getSlotsInEpoch(e),s=t-(n-Gr);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Gr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+_o(Gr)):this.slotsPerEpoch}}var W0=globalThis.fetch;class D0 extends i0{constructor(t,e,n){const s=i=>{const o=n0(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function z0(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Tc=56;class Cc{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=z0(q0,t),n=t.length-Tc;Ot(n>=0,"lookup table is invalid"),Ot(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=it([Ce(bt(),s,"addresses")]).decode(t.slice(Tc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new lt(e.authority[0]):void 0,addresses:i.map(o=>new lt(o))}}}const q0={index:1,layout:it([at("typeIndex"),Fr("deactivationSlot"),_e("lastExtendedSlot"),St("lastExtendedStartIndex"),St(),Ce(bt(),or(St(),-1),"authority")])},K0=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function $0(r){const t=r.match(K0);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${i}`}const zt=_i(Wa(lt),J(),r=>new lt(r)),yl=Da([J(),Dt("base64")]),$a=_i(Wa(gt.Buffer),yl,r=>gt.Buffer.from(r[0],"base64")),j0=30*1e3;function H0(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Mt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Lc(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function bl(r){return Pe([Z({jsonrpc:Dt("2.0"),id:J(),result:r}),Z({jsonrpc:Dt("2.0"),id:J(),error:Z({code:Hr(),message:J(),data:ut(xd())})})])}const V0=bl(Hr());function wt(r){return _i(bl(r),V0,t=>"error"in t?t:{...t,result:X(t.result,r)})}function Gt(r){return wt(Z({context:Z({slot:F()}),value:r}))}function Ls(r){return Z({context:Z({slot:F()}),value:r})}function So(r,t){return r===0?new di({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new lt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new In(t)}const G0=Z({foundation:F(),foundationTerm:F(),initial:F(),taper:F(),terminal:F()}),Z0=wt(tt(et(Z({epoch:F(),effectiveSlot:F(),amount:F(),postBalance:F(),commission:ut(et(F()))})))),Y0=tt(Z({slot:F(),prioritizationFee:F()})),J0=Z({total:F(),validator:F(),foundation:F(),epoch:F()}),X0=Z({epoch:F(),slotIndex:F(),slotsInEpoch:F(),absoluteSlot:F(),blockHeight:ut(F()),transactionCount:ut(F())}),Q0=Z({slotsPerEpoch:F(),leaderScheduleSlotOffset:F(),warmup:hn(),firstNormalEpoch:F(),firstNormalSlot:F()}),tp=el(J(),tt(F())),fr=et(Pe([Z({}),J()])),ep=Z({err:fr}),np=Dt("receivedSignature"),rp=Z({"solana-core":J(),"feature-set":ut(F())}),ip=Z({program:J(),programId:zt,parsed:Hr()}),sp=Z({programId:zt,accounts:tt(zt),data:J()}),Nc=Gt(Z({err:et(Pe([Z({}),J()])),logs:et(tt(J())),accounts:ut(et(tt(et(Z({executable:hn(),owner:J(),lamports:F(),data:tt(J()),rentEpoch:ut(F())}))))),unitsConsumed:ut(F()),returnData:ut(et(Z({programId:J(),data:Da([J(),Dt("base64")])}))),innerInstructions:ut(et(tt(Z({index:F(),instructions:tt(Pe([ip,sp]))}))))})),op=Gt(Z({byIdentity:el(J(),tt(F())),range:Z({firstSlot:F(),lastSlot:F()})}));function ap(r,t,e,n,s,i){const o=e||W0;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(g,_)=>{const R=await new Promise((y,M)=>{try{n(g,_,(I,A)=>y([I,A]))}catch(I){M(I)}});return await o(...R)}),new Qd(async(g,_)=>{const R={method:"POST",body:g,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},ag)};try{let y=5,M,I=500;for(;u?M=await u(r,R):M=await o(r,R),!(M.status!==429||s===!0||(y-=1,y===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${I}ms delay...`),await br(I),I*=2;const A=await M.text();M.ok?_(null,A):_(new Error(`${M.status} ${M.statusText}: ${A}`))}catch(y){y instanceof Error&&_(y)}},{})}function cp(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function up(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const lp=wt(G0),fp=wt(J0),hp=wt(Y0),dp=wt(X0),pp=wt(Q0),gp=wt(tp),mp=wt(F()),wp=Gt(Z({total:F(),circulating:F(),nonCirculating:F(),nonCirculatingAccounts:tt(zt)})),jo=Z({amount:J(),uiAmount:et(F()),decimals:F(),uiAmountString:ut(J())}),yp=Gt(tt(Z({address:zt,amount:J(),uiAmount:et(F()),decimals:F(),uiAmountString:ut(J())}))),bp=Gt(tt(Z({pubkey:zt,account:Z({executable:hn(),owner:zt,lamports:F(),data:$a,rentEpoch:F()})}))),Ho=Z({program:J(),parsed:Hr(),space:F()}),vp=Gt(tt(Z({pubkey:zt,account:Z({executable:hn(),owner:zt,lamports:F(),data:Ho,rentEpoch:F()})}))),Ep=Gt(tt(Z({lamports:F(),address:zt}))),pi=Z({executable:hn(),owner:zt,lamports:F(),data:$a,rentEpoch:F()}),_p=Z({pubkey:zt,account:pi}),Sp=_i(Pe([Wa(gt.Buffer),Ho]),Pe([yl,Ho]),r=>Array.isArray(r)?X(r,$a):r),Vo=Z({executable:hn(),owner:zt,lamports:F(),data:Sp,rentEpoch:F()}),xp=Z({pubkey:zt,account:Vo}),Ap=Z({state:Pe([Dt("active"),Dt("inactive"),Dt("activating"),Dt("deactivating")]),active:F(),inactive:F()}),Bp=wt(tt(Z({signature:J(),slot:F(),err:fr,memo:et(J()),blockTime:ut(et(F()))}))),Mp=wt(tt(Z({signature:J(),slot:F(),err:fr,memo:et(J()),blockTime:ut(et(F()))}))),Ip=Z({subscription:F(),result:Ls(pi)}),Rp=Z({pubkey:zt,account:pi}),kp=Z({subscription:F(),result:Ls(Rp)}),Tp=Z({parent:F(),slot:F(),root:F()}),Cp=Z({subscription:F(),result:Tp}),Lp=Pe([Z({type:Pe([Dt("firstShredReceived"),Dt("completed"),Dt("optimisticConfirmation"),Dt("root")]),slot:F(),timestamp:F()}),Z({type:Dt("createdBank"),parent:F(),slot:F(),timestamp:F()}),Z({type:Dt("frozen"),slot:F(),timestamp:F(),stats:Z({numTransactionEntries:F(),numSuccessfulTransactions:F(),numFailedTransactions:F(),maxTransactionsPerEntry:F()})}),Z({type:Dt("dead"),slot:F(),timestamp:F(),err:J()})]),Np=Z({subscription:F(),result:Lp}),Up=Z({subscription:F(),result:Ls(Pe([ep,np]))}),Op=Z({subscription:F(),result:F()}),Pp=Z({pubkey:J(),gossip:et(J()),tpu:et(J()),rpc:et(J()),version:et(J())}),Uc=Z({votePubkey:J(),nodePubkey:J(),activatedStake:F(),epochVoteAccount:hn(),epochCredits:tt(Da([F(),F(),F()])),commission:F(),lastVote:F(),rootSlot:et(F())}),Fp=wt(Z({current:tt(Uc),delinquent:tt(Uc)})),Wp=Pe([Dt("processed"),Dt("confirmed"),Dt("finalized")]),Dp=Z({slot:F(),confirmations:et(F()),err:fr,confirmationStatus:ut(Wp)}),zp=Gt(tt(et(Dp))),qp=wt(F()),vl=Z({accountKey:zt,writableIndexes:tt(F()),readonlyIndexes:tt(F())}),ja=Z({signatures:tt(J()),message:Z({accountKeys:tt(J()),header:Z({numRequiredSignatures:F(),numReadonlySignedAccounts:F(),numReadonlyUnsignedAccounts:F()}),instructions:tt(Z({accounts:tt(F()),data:J(),programIdIndex:F()})),recentBlockhash:J(),addressTableLookups:ut(tt(vl))})}),El=Z({pubkey:zt,signer:hn(),writable:hn(),source:ut(Pe([Dt("transaction"),Dt("lookupTable")]))}),_l=Z({accountKeys:tt(El),signatures:tt(J())}),Sl=Z({parsed:Hr(),program:J(),programId:zt}),xl=Z({accounts:tt(zt),data:J(),programId:zt}),Kp=Pe([xl,Sl]),$p=Pe([Z({parsed:Hr(),program:J(),programId:J()}),Z({accounts:tt(J()),data:J(),programId:J()})]),Al=_i(Kp,$p,r=>"accounts"in r?X(r,xl):X(r,Sl)),Bl=Z({signatures:tt(J()),message:Z({accountKeys:tt(El),instructions:tt(Al),recentBlockhash:J(),addressTableLookups:ut(et(tt(vl)))})}),fs=Z({accountIndex:F(),mint:J(),owner:ut(J()),programId:ut(J()),uiTokenAmount:jo}),Ml=Z({writable:tt(zt),readonly:tt(zt)}),Ns=Z({err:fr,fee:F(),innerInstructions:ut(et(tt(Z({index:F(),instructions:tt(Z({accounts:tt(F()),data:J(),programIdIndex:F()}))})))),preBalances:tt(F()),postBalances:tt(F()),logMessages:ut(et(tt(J()))),preTokenBalances:ut(et(tt(fs))),postTokenBalances:ut(et(tt(fs))),loadedAddresses:ut(Ml),computeUnitsConsumed:ut(F())}),Ha=Z({err:fr,fee:F(),innerInstructions:ut(et(tt(Z({index:F(),instructions:tt(Al)})))),preBalances:tt(F()),postBalances:tt(F()),logMessages:ut(et(tt(J()))),preTokenBalances:ut(et(tt(fs))),postTokenBalances:ut(et(tt(fs))),loadedAddresses:ut(Ml),computeUnitsConsumed:ut(F())}),Vr=Pe([Dt(0),Dt("legacy")]),hr=Z({pubkey:J(),lamports:F(),postBalance:et(F()),rewardType:et(J()),commission:ut(et(F()))}),jp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:tt(Z({transaction:ja,meta:et(Ns),version:ut(Vr)})),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Hp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Vp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:tt(Z({transaction:_l,meta:et(Ns),version:ut(Vr)})),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Gp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:tt(Z({transaction:Bl,meta:et(Ha),version:ut(Vr)})),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Zp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:tt(Z({transaction:_l,meta:et(Ha),version:ut(Vr)})),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Yp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),rewards:ut(tt(hr)),blockTime:et(F()),blockHeight:et(F())}))),Jp=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),transactions:tt(Z({transaction:ja,meta:et(Ns)})),rewards:ut(tt(hr)),blockTime:et(F())}))),Oc=wt(et(Z({blockhash:J(),previousBlockhash:J(),parentSlot:F(),signatures:tt(J()),blockTime:et(F())}))),xo=wt(et(Z({slot:F(),meta:et(Ns),blockTime:ut(et(F())),transaction:ja,version:ut(Vr)}))),Ni=wt(et(Z({slot:F(),transaction:Bl,meta:et(Ha),blockTime:ut(et(F())),version:ut(Vr)}))),Xp=Gt(Z({blockhash:J(),lastValidBlockHeight:F()})),Qp=Gt(hn()),tg=Z({slot:F(),numTransactions:F(),numSlots:F(),samplePeriodSecs:F()}),eg=wt(tt(tg)),ng=Gt(et(Z({feeCalculator:Z({lamportsPerSignature:F()})}))),rg=wt(J()),ig=wt(J()),sg=Z({err:fr,logs:tt(J()),signature:J()}),og=Z({result:Ls(sg),subscription:F()}),ag={"solana-client":"js/1.0.0-maintenance"};class cg{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:_,config:R}=Mt(g),y=this._buildArgs([],_,void 0,R),M=kc(y);return p[M]=p[M]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",y),A=X(I,wt(F()));if("error"in A)throw new ot(A.error,"failed to get block height information");return A.result}finally{delete p[M]}})(),await p[M]}})();let n,s,i,o,a,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=H0(t),this._rpcWsEndpoint=n||$0(t),this._rpcClient=ap(t,s,i,o,a,u),this._rpcRequest=cp(this._rpcClient),this._rpcBatchRequest=up(this._rpcClient),this._rpcWebSocket=new D0(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=X(o,Gt(F()));if("error"in a)throw new ot(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=X(e,wt(et(F())));if("error"in n)throw new ot(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=X(t,wt(F()));if("error"in e)throw new ot(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=X(t,mp);if("error"in e)throw new ot(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=X(n,wp);if("error"in s)throw new ot(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=X(s,Gt(jo));if("error"in i)throw new ot(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=X(s,Gt(jo));if("error"in i)throw new ot(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Mt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",a),p=X(u,bp);if("error"in p)throw new ot(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=X(o,vp);if("error"in a)throw new ot(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=X(s,Ep);if("error"in i)throw new ot(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=X(s,yp);if("error"in i)throw new ot(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=X(o,Gt(et(pi)));if("error"in a)throw new ot(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=X(o,Gt(et(Vo)));if("error"in a)throw new ot(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),u=X(a,Gt(tt(et(Vo))));if("error"in u)throw new ot(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),u=X(a,Gt(tt(et(pi))));if("error"in u)throw new ot(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Mt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=X(a,wt(Ap));if("error"in u)throw new ot(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Mt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Lc(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),p=tt(_p),g=o.withContext===!0?X(u,Gt(p)):X(u,wt(p));if("error"in g)throw new ot(g.error,`failed to get accounts owned by program ${t.toBase58()}`);return g.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=X(o,wt(tt(xp)));if("error"in a)throw new ot(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Ae.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Ot(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((u,p)=>{try{n=this.onSignature(e,(_,R)=>{n=void 0;const y={context:R,value:_};u({__type:Un.PROCESSED,response:y})},t);const g=new Promise(_=>{n==null?_():s=this._onSubscriptionStateChange(n,R=>{R==="subscribed"&&_()})});(async()=>{if(await g,i)return;const _=await this.getSignatureStatus(e);if(i||_==null)return;const{context:R,value:y}=_;if(y!=null)if(y!=null&&y.err)p(y.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(y.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(y.confirmationStatus==="processed"||y.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:Un.PROCESSED,response:{context:R,value:y}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(_=>{const R=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let y=await R();if(!i){for(;y<=n;)if(await br(1e3),i||(y=await R(),i))return;_({__type:Un.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),p=this.getCancellationPromise(e);let g;try{const _=await Promise.race([p,u,o]);if(_.__type===Un.PROCESSED)g=_.response;else throw new pl(s)}finally{i=!0,a()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const u=new Promise(y=>{let M=i,I=null;const A=async()=>{try{const{context:T,value:C}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return I=T.slot,C==null?void 0:C.nonce}catch{return M}};(async()=>{if(M=await A(),!a)for(;;){if(i!==M){y({__type:Un.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await br(2e3),a||(M=await A(),a))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let R;try{const y=await Promise.race([_,g,u]);if(y.__type===Un.PROCESSED)R=y.response;else{let M;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(y.slotInWhichNonceDidAdvance??n)){await br(400);continue}M=I;break}if(M!=null&&M.value){const I=t||"finalized",{confirmationStatus:A}=M.value;switch(I){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new Yr(o);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new Yr(o);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new Yr(o);break;default:}R={context:M.context,value:{err:M.value.err}}}else throw new Yr(o)}}finally{a=!0,p()}return R}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(u=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:Un.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const u=await Promise.race([o,s]);if(u.__type===Un.PROCESSED)a=u.response;else throw new gl(e,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=X(t,wt(tt(Pp)));if("error"in e)throw new ot(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=X(n,Fp);if("error"in s)throw new ot(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=X(i,wt(F()));if("error"in o)throw new ot(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=X(i,wt(J()));if("error"in o)throw new ot(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=X(s,wt(tt(zt)));if("error"in i)throw new ot(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Ot(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=X(s,zp);if("error"in i)throw new ot(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=X(i,wt(F()));if("error"in o)throw new ot(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=X(n,lp);if("error"in s)throw new ot(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Mt(n),o=this._buildArgs([t.map(p=>p.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=X(a,Z0);if("error"in u)throw new ot(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=X(t,fp);if("error"in e)throw new ot(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=X(i,dp);if("error"in o)throw new ot(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=X(t,pp);if("error"in e)throw new ot(e.error,"failed to get epoch schedule");const n=e.result;return new F0(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=X(t,gp);if("error"in e)throw new ot(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=X(s,qp);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=X(e,eg);if("error"in n)throw new ot(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=X(s,ng);if("error"in i)throw new ot(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=Pr(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=X(i,Gt(et(F())));if("error"in o)throw new ot(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=X(s,hp);if("error"in i)throw new ot(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=X(i,Xp);if("error"in o)throw new ot(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=X(o,Qp);if("error"in a)throw new ot(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=X(t,wt(rp));if("error"in e)throw new ot(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=X(t,wt(J()));if("error"in e)throw new ot(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=X(o,Vp);if("error"in a)throw a.error;return a.result}case"none":{const a=X(o,Hp);if("error"in a)throw a.error;return a.result}default:{const a=X(o,jp);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:p,meta:g,version:_})=>({meta:g,transaction:{...p,message:So(_,p.message)},version:_}))}:null}}}catch(a){throw new ot(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=X(o,Zp);if("error"in a)throw a.error;return a.result}case"none":{const a=X(o,Yp);if("error"in a)throw a.error;return a.result}default:{const a=X(o,Gp);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ot(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...u}=t;n=a,e=u}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=X(i,op);if("error"in o)throw new ot(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=X(o,xo);if("error"in a)throw new ot(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:So(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=X(o,Ni);if("error"in a)throw new ot(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=X(u,Ni);if("error"in p)throw new ot(p.error,"failed to get transactions");return p.result})}async getTransactions(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=X(u,xo);if("error"in p)throw new ot(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:So(g.version,g.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=X(s,Jp);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:p})=>{const g=new In(u.message);return{meta:p,transaction:{...u,message:g}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:p})=>({meta:p,transaction:Qe.populate(u.message,u.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=X(i,wt(tt(F())));if("error"in o)throw new ot(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=X(s,Oc);if("error"in i)throw new ot(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=X(s,Oc);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=X(s,xo);if("error"in i)throw new ot(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new In(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Qe.populate(a,u)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=X(s,Ni);if("error"in i)throw new ot(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=X(o,Ni);if("error"in a)throw new ot(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=X(i,Bp);if("error"in o)throw new ot(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=X(i,Mp);if("error"in o)throw new ot(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Cc({key:t,state:Cc.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Ka.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=X(n,rg);if("error"in s)throw new ot(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await br(100);const n=Date.now()-this._blockhashInfo.lastFetch>=j0;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await br(C0/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=X(i,Gt(F()));if("error"in o)throw new ot(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const I=t.serialize(),A=gt.Buffer.from(I).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const T=e||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(T.innerInstructions=e.innerInstructions);const C=[A,T],L=await this._rpcRequest("simulateTransaction",C),W=X(L,Nc);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(t instanceof Qe){let M=t;s=new Qe,s.feePayer=M.feePayer,s.instructions=t.instructions,s.nonceInfo=M.nonceInfo,s.signatures=M.signatures}else s=Qe.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let M=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(M);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const A=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else M=!0}}const o=s._compile(),a=o.serialize(),p=s._serialize(a).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const M=(Array.isArray(n)?n:o.nonProgramIds()).map(I=>I.toBase58());g.accounts={encoding:"base64",addresses:M}}i&&(g.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(g.innerInstructions=e.innerInstructions);const _=[p,g],R=await this._rpcRequest("simulateTransaction",_),y=X(R,Nc);if("error"in y){let M;if("data"in y.error&&(M=y.error.data.logs,M&&Array.isArray(M))){const I=`
    `,A=I+M.join(I);console.error(y.error.message,A)}throw new Ic({action:"simulate",signature:"",transactionMessage:y.error.message,logs:M})}return y.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=Pr(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),u=X(a,ig);if("error"in u){let p;throw"data"in u.error&&(p=u.error.data.logs),new Ic({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:p})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=X(t,Ip);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=kc([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Ot(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Mt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=X(t,kp);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Mt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Lc(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=X(t,og);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=X(t,Cp);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=X(t,Np);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=X(t,Up);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(u,p)=>{e(u,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=X(t,Op);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:it([at("instruction"),Fr("recentSlot"),St("bumpSeed")])},FreezeLookupTable:{index:1,layout:it([at("instruction")])},ExtendLookupTable:{index:2,layout:it([at("instruction"),Fr(),Ce(bt(),or(at(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:it([at("instruction")])},CloseLookupTable:{index:4,layout:it([at("instruction")])}});new lt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:it([St("instruction"),at("units"),at("additionalFee")])},RequestHeapFrame:{index:1,layout:it([St("instruction"),at("bytes")])},SetComputeUnitLimit:{index:2,layout:it([St("instruction"),at("units")])},SetComputeUnitPrice:{index:3,layout:it([St("instruction"),Fr("microLamports")])}});new lt("ComputeBudget111111111111111111111111111111");it([St("numSignatures"),St("padding"),Xe("signatureOffset"),Xe("signatureInstructionIndex"),Xe("publicKeyOffset"),Xe("publicKeyInstructionIndex"),Xe("messageDataOffset"),Xe("messageDataSize"),Xe("messageInstructionIndex")]);new lt("Ed25519SigVerify111111111111111111111111111");y0.utils.isValidPrivateKey;it([St("numSignatures"),Xe("signatureOffset"),St("signatureInstructionIndex"),Xe("ethAddressOffset"),St("ethAddressInstructionIndex"),Xe("messageDataOffset"),Xe("messageDataSize"),St("messageInstructionIndex"),Ct(20,"ethAddress"),Ct(64,"signature"),St("recoveryId")]);new lt("KeccakSecp256k11111111111111111111111111111");var Il;new lt("StakeConfig11111111111111111111111111111111");class Rl{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Il=Rl;Rl.default=new Il(0,0,lt.default);Object.freeze({Initialize:{index:0,layout:it([at("instruction"),x0(),A0()])},Authorize:{index:1,layout:it([at("instruction"),bt("newAuthorized"),at("stakeAuthorizationType")])},Delegate:{index:2,layout:it([at("instruction")])},Split:{index:3,layout:it([at("instruction"),je("lamports")])},Withdraw:{index:4,layout:it([at("instruction"),je("lamports")])},Deactivate:{index:5,layout:it([at("instruction")])},Merge:{index:7,layout:it([at("instruction")])},AuthorizeWithSeed:{index:8,layout:it([at("instruction"),bt("newAuthorized"),at("stakeAuthorizationType"),Mr("authoritySeed"),bt("authorityOwner")])}});new lt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:it([at("instruction"),B0()])},Authorize:{index:1,layout:it([at("instruction"),bt("newAuthorized"),at("voteAuthorizationType")])},Withdraw:{index:3,layout:it([at("instruction"),je("lamports")])},UpdateValidatorIdentity:{index:4,layout:it([at("instruction")])},AuthorizeWithSeed:{index:10,layout:it([at("instruction"),M0()])}});new lt("Vote111111111111111111111111111111111111111");new lt("Va1idator1nfo111111111111111111111111111111");Z({name:J(),website:ut(J()),details:ut(J()),iconUrl:ut(J()),keybaseUsername:ut(J())});new lt("Vote111111111111111111111111111111111111111");it([bt("nodePubkey"),bt("authorizedWithdrawer"),St("commission"),_e(),Ce(it([_e("slot"),at("confirmationCount")]),or(at(),-8),"votes"),St("rootSlotValid"),_e("rootSlot"),_e(),Ce(it([_e("epoch"),bt("authorizedVoter")]),or(at(),-8),"authorizedVoters"),it([Ce(it([bt("authorizedPubkey"),_e("epochOfLastAuthorizedSwitch"),_e("targetEpoch")]),32,"buf"),_e("idx"),St("isEmpty")],"priorVoters"),_e(),Ce(it([_e("epoch"),_e("credits"),_e("prevCredits")]),or(at(),-8),"epochCredits"),it([_e("slot"),_e("timestamp")],"lastTimestamp")]);const Pc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function iy(r,t){const e=t===!1?"http":"https";if(!r)return Pc[e].devnet;const n=Pc[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}const sy=1e9,kl=ft.createContext({});function ug(){return ft.useContext(kl)}const oy=({children:r,endpoint:t,config:e={commitment:"confirmed"}})=>{const n=ft.useMemo(()=>new cg(t,e),[t,e]);return Ea.createElement(kl.Provider,{value:{connection:n}},r)};class Le extends Error{constructor(t,e){super(t),this.error=e}}class gi extends Le{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class ay extends Le{constructor(){super(...arguments),this.name="WalletLoadError"}}class Jr extends Le{constructor(){super(...arguments),this.name="WalletConfigError"}}class hs extends Le{constructor(){super(...arguments),this.name="WalletConnectionError"}}class lg extends Le{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class fg extends Le{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Ir extends Le{constructor(){super(...arguments),this.name="WalletAccountError"}}class Tl extends Le{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class ln extends Le{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Qn extends Le{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class tr extends Le{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Cl extends Le{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class Fc extends Le{constructor(){super(...arguments),this.name="WalletSignInError"}}var Jt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Jt||(Jt={}));class Ll extends za{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const s=this.publicKey;if(!s)throw new ln;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function cy(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const i of t)i()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function uy(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function er(r){return"version"in r}class hg extends Ll{async sendTransaction(t,e,n={}){let s=!0;try{if(er(t)){if(!this.supportedTransactionVersions)throw new Qn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new Qn(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const i=t.serialize();return await e.sendRawTransaction(i,n)}catch(i){throw i instanceof tr?(s=!1,i):new Qn(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;t=await this.prepareTransaction(t,e,o),i!=null&&i.length&&t.partialSign(...i),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(i){throw i instanceof tr?(s=!1,i):new Qn(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(er(n)){if(!this.supportedTransactionVersions)throw new tr("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new tr(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class dg extends hg{}class pg extends dg{}const De="solana:signAndSendTransaction",ar="solana:signIn",Fn="solana:signMessage",Vt="solana:signTransaction",Va="standard:connect",Go="standard:disconnect",Ga="standard:events";function gg(r){return Va in r.features&&Ga in r.features&&(De in r.features||Vt in r.features)}var Wc;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Wc||(Wc={}));class Dc extends Le{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const mg=[],Us={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){nn("call","select")},connect(){return Promise.reject(nn("call","connect"))},disconnect(){return Promise.reject(nn("call","disconnect"))},sendTransaction(){return Promise.reject(nn("call","sendTransaction"))},signTransaction(){return Promise.reject(nn("call","signTransaction"))},signAllTransactions(){return Promise.reject(nn("call","signAllTransactions"))},signMessage(){return Promise.reject(nn("call","signMessage"))},signIn(){return Promise.reject(nn("call","signIn"))}};Object.defineProperty(Us,"wallets",{get(){return nn("read","wallets"),mg}});Object.defineProperty(Us,"wallet",{get(){return nn("read","wallet"),null}});Object.defineProperty(Us,"publicKey",{get(){return nn("read","publicKey"),null}});function nn(r,t){const e=new Error(`You have tried to ${r} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const Nl=ft.createContext(Us);function ly(){return ft.useContext(Nl)}function wg(r,t){const e=ft.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return t}),n=e[0],s=ft.useRef(!0);return ft.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),e}var yg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ul={},Ye={};let Za;const bg=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ye.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ye.getSymbolTotalCodewords=function(t){return bg[t]};Ye.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};Ye.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Za=t};Ye.isKanjiModeEnabled=function(){return typeof Za<"u"};Ye.toSJIS=function(t){return Za(t)};var Os={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return t(n)}catch{return s}}})(Os);function Ol(){this.buffer=[],this.length=0}Ol.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var vg=Ol;function Si(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Si.prototype.set=function(r,t,e,n){const s=r*this.size+t;this.data[s]=e,n&&(this.reservedBit[s]=!0)};Si.prototype.get=function(r,t){return this.data[r*this.size+t]};Si.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};Si.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var Eg=Si,Pl={};(function(r){const t=Ye.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let u=1;u<s-1;u++)a[u]=a[u-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let u=0;u<o;u++)a===0&&u===0||a===0&&u===o-1||a===o-1&&u===0||s.push([i[a],i[u]]);return s}})(Pl);var Fl={};const _g=Ye.getSymbolSize,zc=7;Fl.getPositions=function(t){const e=_g(t);return[[0,0],[e-zc,0],[0,e-zc]]};var Wl={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,u=0,p=null,g=null;for(let _=0;_<i;_++){a=u=0,p=g=null;for(let R=0;R<i;R++){let y=s.get(_,R);y===p?a++:(a>=5&&(o+=t.N1+(a-5)),p=y,a=1),y=s.get(R,_),y===g?u++:(u>=5&&(o+=t.N1+(u-5)),g=y,u=1)}a>=5&&(o+=t.N1+(a-5)),u>=5&&(o+=t.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let u=0;u<i-1;u++){const p=s.get(a,u)+s.get(a,u+1)+s.get(a+1,u)+s.get(a+1,u+1);(p===4||p===0)&&o++}return o*t.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,u=0;for(let p=0;p<i;p++){a=u=0;for(let g=0;g<i;g++)a=a<<1&2047|s.get(p,g),g>=10&&(a===1488||a===93)&&o++,u=u<<1&2047|s.get(g,p),g>=10&&(u===1488||u===93)&&o++}return o*t.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function e(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let u=0;u<o;u++)i.isReserved(u,a)||i.xor(u,a,e(s,u,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,u=1/0;for(let p=0;p<o;p++){i(p),r.applyMask(p,s);const g=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(p,s),g<u&&(u=g,a=p)}return a}})(Wl);var Ps={};const qn=Os,Ui=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Oi=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ps.getBlocksCount=function(t,e){switch(e){case qn.L:return Ui[(t-1)*4+0];case qn.M:return Ui[(t-1)*4+1];case qn.Q:return Ui[(t-1)*4+2];case qn.H:return Ui[(t-1)*4+3];default:return}};Ps.getTotalCodewordsCount=function(t,e){switch(e){case qn.L:return Oi[(t-1)*4+0];case qn.M:return Oi[(t-1)*4+1];case qn.Q:return Oi[(t-1)*4+2];case qn.H:return Oi[(t-1)*4+3];default:return}};var Dl={},Fs={};const ai=new Uint8Array(512),ds=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)ai[e]=t,ds[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)ai[e]=ai[e-255]})();Fs.log=function(t){if(t<1)throw new Error("log("+t+")");return ds[t]};Fs.exp=function(t){return ai[t]};Fs.mul=function(t,e){return t===0||e===0?0:ai[ds[t]+ds[e]]};(function(r){const t=Fs;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=t.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=t.mul(s[u],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(Dl);const zl=Dl;function Ya(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Ya.prototype.initialize=function(t){this.degree=t,this.genPoly=zl.generateECPolynomial(this.degree)};Ya.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=zl.mod(e,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var Sg=Ya,ql={},jn={},Ja={};Ja.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var mn={};const Kl="[0-9]+",xg="[A-Z $%*+\\-./:]+";let mi="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";mi=mi.replace(/u/g,"\\u");const Ag="(?:(?![A-Z0-9 $%*+\\-./:]|"+mi+`)(?:.|[\r
]))+`;mn.KANJI=new RegExp(mi,"g");mn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");mn.BYTE=new RegExp(Ag,"g");mn.NUMERIC=new RegExp(Kl,"g");mn.ALPHANUMERIC=new RegExp(xg,"g");const Bg=new RegExp("^"+mi+"$"),Mg=new RegExp("^"+Kl+"$"),Ig=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");mn.testKanji=function(t){return Bg.test(t)};mn.testNumeric=function(t){return Mg.test(t)};mn.testAlphanumeric=function(t){return Ig.test(t)};(function(r){const t=Ja,e=mn;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(jn);(function(r){const t=Ye,e=Ps,n=Os,s=jn,i=Ja,o=7973,a=t.getBCHDigit(o);function u(R,y,M){for(let I=1;I<=40;I++)if(y<=r.getCapacity(I,M,R))return I}function p(R,y){return s.getCharCountIndicator(R,y)+4}function g(R,y){let M=0;return R.forEach(function(I){const A=p(I.mode,y);M+=A+I.getBitsLength()}),M}function _(R,y){for(let M=1;M<=40;M++)if(g(R,M)<=r.getCapacity(M,y,s.MIXED))return M}r.from=function(y,M){return i.isValid(y)?parseInt(y,10):M},r.getCapacity=function(y,M,I){if(!i.isValid(y))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=s.BYTE);const A=t.getSymbolTotalCodewords(y),T=e.getTotalCodewordsCount(y,M),C=(A-T)*8;if(I===s.MIXED)return C;const L=C-p(I,y);switch(I){case s.NUMERIC:return Math.floor(L/10*3);case s.ALPHANUMERIC:return Math.floor(L/11*2);case s.KANJI:return Math.floor(L/13);case s.BYTE:default:return Math.floor(L/8)}},r.getBestVersionForData=function(y,M){let I;const A=n.from(M,n.M);if(Array.isArray(y)){if(y.length>1)return _(y,A);if(y.length===0)return 1;I=y[0]}else I=y;return u(I.mode,I.getLength(),A)},r.getEncodedBits=function(y){if(!i.isValid(y)||y<7)throw new Error("Invalid QR Code version");let M=y<<12;for(;t.getBCHDigit(M)-a>=0;)M^=o<<t.getBCHDigit(M)-a;return y<<12|M}})(ql);var $l={};const Zo=Ye,jl=1335,Rg=21522,qc=Zo.getBCHDigit(jl);$l.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;Zo.getBCHDigit(s)-qc>=0;)s^=jl<<Zo.getBCHDigit(s)-qc;return(n<<10|s)^Rg};var Hl={};const kg=jn;function Wr(r){this.mode=kg.NUMERIC,this.data=r.toString()}Wr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Wr.prototype.getLength=function(){return this.data.length};Wr.prototype.getBitsLength=function(){return Wr.getBitsLength(this.data.length)};Wr.prototype.write=function(t){let e,n,s;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),s=parseInt(n,10),t.put(s,i*3+1))};var Tg=Wr;const Cg=jn,Ao=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Dr(r){this.mode=Cg.ALPHANUMERIC,this.data=r}Dr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Dr.prototype.getLength=function(){return this.data.length};Dr.prototype.getBitsLength=function(){return Dr.getBitsLength(this.data.length)};Dr.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=Ao.indexOf(this.data[e])*45;n+=Ao.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(Ao.indexOf(this.data[e]),6)};var Lg=Dr;const Ng=jn;function zr(r){this.mode=Ng.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}zr.getBitsLength=function(t){return t*8};zr.prototype.getLength=function(){return this.data.length};zr.prototype.getBitsLength=function(){return zr.getBitsLength(this.data.length)};zr.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};var Ug=zr;const Og=jn,Pg=Ye;function qr(r){this.mode=Og.KANJI,this.data=r}qr.getBitsLength=function(t){return t*13};qr.prototype.getLength=function(){return this.data.length};qr.prototype.getBitsLength=function(){return qr.getBitsLength(this.data.length)};qr.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=Pg.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};var Fg=qr,Vl={exports:{}};(function(r){var t={single_source_shortest_paths:function(e,n,s){var i={},o={};o[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var u,p,g,_,R,y,M,I,A;!a.empty();){u=a.pop(),p=u.value,_=u.cost,R=e[p]||{};for(g in R)R.hasOwnProperty(g)&&(y=R[g],M=_+y,I=o[g],A=typeof o[g]>"u",(A||I>M)&&(o[g]=M,a.push(g,M),i[g]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var T=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(T)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Vl);var Wg=Vl.exports;(function(r){const t=jn,e=Tg,n=Lg,s=Ug,i=Fg,o=mn,a=Ye,u=Wg;function p(T){return unescape(encodeURIComponent(T)).length}function g(T,C,L){const W=[];let O;for(;(O=T.exec(L))!==null;)W.push({data:O[0],index:O.index,mode:C,length:O[0].length});return W}function _(T){const C=g(o.NUMERIC,t.NUMERIC,T),L=g(o.ALPHANUMERIC,t.ALPHANUMERIC,T);let W,O;return a.isKanjiModeEnabled()?(W=g(o.BYTE,t.BYTE,T),O=g(o.KANJI,t.KANJI,T)):(W=g(o.BYTE_KANJI,t.BYTE,T),O=[]),C.concat(L,W,O).sort(function(j,G){return j.index-G.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function R(T,C){switch(C){case t.NUMERIC:return e.getBitsLength(T);case t.ALPHANUMERIC:return n.getBitsLength(T);case t.KANJI:return i.getBitsLength(T);case t.BYTE:return s.getBitsLength(T)}}function y(T){return T.reduce(function(C,L){const W=C.length-1>=0?C[C.length-1]:null;return W&&W.mode===L.mode?(C[C.length-1].data+=L.data,C):(C.push(L),C)},[])}function M(T){const C=[];for(let L=0;L<T.length;L++){const W=T[L];switch(W.mode){case t.NUMERIC:C.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:C.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:C.push([W,{data:W.data,mode:t.BYTE,length:p(W.data)}]);break;case t.BYTE:C.push([{data:W.data,mode:t.BYTE,length:p(W.data)}])}}return C}function I(T,C){const L={},W={start:{}};let O=["start"];for(let q=0;q<T.length;q++){const j=T[q],G=[];for(let D=0;D<j.length;D++){const V=j[D],K=""+q+D;G.push(K),L[K]={node:V,lastCount:0},W[K]={};for(let H=0;H<O.length;H++){const b=O[H];L[b]&&L[b].node.mode===V.mode?(W[b][K]=R(L[b].lastCount+V.length,V.mode)-R(L[b].lastCount,V.mode),L[b].lastCount+=V.length):(L[b]&&(L[b].lastCount=V.length),W[b][K]=R(V.length,V.mode)+4+t.getCharCountIndicator(V.mode,C))}}O=G}for(let q=0;q<O.length;q++)W[O[q]].end=0;return{map:W,table:L}}function A(T,C){let L;const W=t.getBestModeForData(T);if(L=t.from(C,W),L!==t.BYTE&&L.bit<W.bit)throw new Error('"'+T+'" cannot be encoded with mode '+t.toString(L)+`.
 Suggested mode is: `+t.toString(W));switch(L===t.KANJI&&!a.isKanjiModeEnabled()&&(L=t.BYTE),L){case t.NUMERIC:return new e(T);case t.ALPHANUMERIC:return new n(T);case t.KANJI:return new i(T);case t.BYTE:return new s(T)}}r.fromArray=function(C){return C.reduce(function(L,W){return typeof W=="string"?L.push(A(W,null)):W.data&&L.push(A(W.data,W.mode)),L},[])},r.fromString=function(C,L){const W=_(C,a.isKanjiModeEnabled()),O=M(W),q=I(O,L),j=u.find_path(q.map,"start","end"),G=[];for(let D=1;D<j.length-1;D++)G.push(q.table[j[D]].node);return r.fromArray(y(G))},r.rawSplit=function(C){return r.fromArray(_(C,a.isKanjiModeEnabled()))}})(Hl);const Ws=Ye,Bo=Os,Dg=vg,zg=Eg,qg=Pl,Kg=Fl,Yo=Wl,Jo=Ps,$g=Sg,ps=ql,jg=$l,Hg=jn,Mo=Hl;function Vg(r,t){const e=r.size,n=Kg.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||e<=i+a))for(let u=-1;u<=7;u++)o+u<=-1||e<=o+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?r.set(i+a,o+u,!0,!0):r.set(i+a,o+u,!1,!0))}}function Gg(r){const t=r.size;for(let e=8;e<t-8;e++){const n=e%2===0;r.set(e,6,n,!0),r.set(6,e,n,!0)}}function Zg(r,t){const e=qg.getPositions(t);for(let n=0;n<e.length;n++){const s=e[n][0],i=e[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?r.set(s+o,i+a,!0,!0):r.set(s+o,i+a,!1,!0)}}function Yg(r,t){const e=r.size,n=ps.getEncodedBits(t);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+e-8-3,o=(n>>a&1)===1,r.set(s,i,o,!0),r.set(i,s,o,!0)}function Io(r,t,e){const n=r.size,s=jg.getEncodedBits(t,e);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?r.set(i,8,o,!0):i<8?r.set(i+1,8,o,!0):r.set(n-15+i,8,o,!0),i<8?r.set(8,n-i-1,o,!0):i<9?r.set(8,15-i-1+1,o,!0):r.set(8,15-i-1,o,!0);r.set(n-8,8,1,!0)}function Jg(r,t){const e=r.size;let n=-1,s=e-1,i=7,o=0;for(let a=e-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!r.isReserved(s,a-u)){let p=!1;o<t.length&&(p=(t[o]>>>i&1)===1),r.set(s,a-u,p),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||e<=s){s-=n,n=-n;break}}}function Xg(r,t,e){const n=new Dg;e.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),Hg.getCharCountIndicator(u.mode,r)),u.write(n)});const s=Ws.getSymbolTotalCodewords(r),i=Jo.getTotalCodewordsCount(r,t),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let u=0;u<a;u++)n.put(u%2?17:236,8);return Qg(n,r,t)}function Qg(r,t,e){const n=Ws.getSymbolTotalCodewords(t),s=Jo.getTotalCodewordsCount(t,e),i=n-s,o=Jo.getBlocksCount(t,e),a=n%o,u=o-a,p=Math.floor(n/o),g=Math.floor(i/o),_=g+1,R=p-g,y=new $g(R);let M=0;const I=new Array(o),A=new Array(o);let T=0;const C=new Uint8Array(r.buffer);for(let j=0;j<o;j++){const G=j<u?g:_;I[j]=C.slice(M,M+G),A[j]=y.encode(I[j]),M+=G,T=Math.max(T,G)}const L=new Uint8Array(n);let W=0,O,q;for(O=0;O<T;O++)for(q=0;q<o;q++)O<I[q].length&&(L[W++]=I[q][O]);for(O=0;O<R;O++)for(q=0;q<o;q++)L[W++]=A[q][O];return L}function tm(r,t,e,n){let s;if(Array.isArray(r))s=Mo.fromArray(r);else if(typeof r=="string"){let p=t;if(!p){const g=Mo.rawSplit(r);p=ps.getBestVersionForData(g,e)}s=Mo.fromString(r,p||40)}else throw new Error("Invalid data");const i=ps.getBestVersionForData(s,e);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Xg(t,e,s),a=Ws.getSymbolSize(t),u=new zg(a);return Vg(u,t),Gg(u),Zg(u,t),Io(u,e,0),t>=7&&Yg(u,t),Jg(u,o),isNaN(n)&&(n=Yo.getBestMask(u,Io.bind(null,u,e))),Yo.applyMask(n,u),Io(u,e,n),{modules:u,version:t,errorCorrectionLevel:e,maskPattern:n,segments:s}}Ul.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Bo.M,s,i;return typeof e<"u"&&(n=Bo.from(e.errorCorrectionLevel,Bo.M),s=ps.from(e.version),i=Yo.from(e.maskPattern),e.toSJISFunc&&Ws.setToSJISFunction(e.toSJISFunc)),tm(t,s,n,i)};var Gl={},Xa={};(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,u=r.getScale(o,i),p=Math.floor((o+i.margin*2)*u),g=i.margin*u,_=[i.color.light,i.color.dark];for(let R=0;R<p;R++)for(let y=0;y<p;y++){let M=(R*p+y)*4,I=i.color.light;if(R>=g&&y>=g&&R<p-g&&y<p-g){const A=Math.floor((R-g)/u),T=Math.floor((y-g)/u);I=_[a[A*o+T]?1:0]}n[M++]=I.r,n[M++]=I.g,n[M++]=I.b,n[M]=I.a}}})(Xa);(function(r){const t=Xa;function e(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let u=a,p=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(p=n()),u=t.getOptions(u);const g=t.getImageWidth(i.modules.size,u),_=p.getContext("2d"),R=_.createImageData(g,g);return t.qrToImageData(R.data,i,u),e(_,p,g),_.putImageData(R,0,0),p},r.renderToDataURL=function(i,o,a){let u=a;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const p=r.render(i,o,u),g=u.type||"image/png",_=u.rendererOpts||{};return p.toDataURL(g,_.quality)}})(Gl);var Zl={};const em=Xa;function Kc(r,t){const e=r.a/255,n=t+'="'+r.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function Ro(r,t,e){let n=r+t;return typeof e<"u"&&(n+=" "+e),n}function nm(r,t,e){let n="",s=0,i=!1,o=0;for(let a=0;a<r.length;a++){const u=Math.floor(a%t),p=Math.floor(a/t);!u&&!i&&(i=!0),r[a]?(o++,a>0&&u>0&&r[a-1]||(n+=i?Ro("M",u+e,.5+p+e):Ro("m",s,0),s=0,i=!1),u+1<t&&r[a+1]||(n+=Ro("h",o),o=0)):s++}return n}Zl.render=function(t,e,n){const s=em.getOptions(e),i=t.modules.size,o=t.modules.data,a=i+s.margin*2,u=s.color.light.a?"<path "+Kc(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",p="<path "+Kc(s.color.dark,"stroke")+' d="'+nm(o,i,s.margin)+'"/>',g='viewBox="0 0 '+a+" "+a+'"',R='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+u+p+`</svg>
`;return typeof n=="function"&&n(null,R),R};const rm=yg,Xo=Ul,Yl=Gl,im=Zl;function Qa(r,t,e,n,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!rm())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=e,e=t,t=n=void 0):o===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=e,e=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(e=t,t=n=void 0):o===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(u,p){try{const g=Xo.create(e,n);u(r(g,t,n))}catch(g){p(g)}})}try{const u=Xo.create(e,n);s(null,r(u,t,n))}catch(u){s(u)}}Xo.create;Qa.bind(null,Yl.render);Qa.bind(null,Yl.renderToDataURL);Qa.bind(null,function(r,t,e){return im.render(r,e)});const gs="solana:mainnet",sm="solana:devnet",om="solana:testnet",am="solana:localnet";function ko(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const cm="https://api.mainnet-beta.solana.com";function um(r){return r.includes(cm)?gs:/\bdevnet\b/i.test(r)?sm:/\btestnet\b/i.test(r)?om:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?am:gs}function lm(r){let t=`${r.domain} wants you to sign in with your Solana account:
`;t+=`${r.address}`,r.statement&&(t+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const n of r.resources)e.push(`- ${n}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}const Rn={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class kn extends Error{constructor(...t){const[e,n,s]=t;super(n),this.code=e,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class Jl extends Error{constructor(...t){const[e,n,s,i]=t;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function ye(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(_){o(_)}}function u(g){try{p(n.throw(g))}catch(_){o(_)}}function p(g){g.done?i(g.value):s(g.value).then(a,u)}p((n=n.apply(r,t||[])).next())})}function fm(r){return window.btoa(r)}function To(r,t){return ye(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s})}function hm(r){return lm(r)}function dm(r){return fm(hm(r))}const pm="solana:signTransactions",$c="solana:cloneAuthorization";function gm(r,t){return new Proxy({},{get(e,n){return n==="then"?null:(e[n]==null&&(e[n]=function(s){return ye(this,void 0,void 0,function*(){const{method:i,params:o}=mm(n,s,r),a=yield t(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield ym(o.sign_in_payload,a,t)),wm(n,a,r)})}),e[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function mm(r,t,e){let n=t,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(e==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(e){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function wm(r,t,e){switch(r){case"getCapabilities":{const n=t;switch(e){case"legacy":{const s=[pm];return n.supports_clone_authorization===!0&&s.push($c),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes($c)})}}}return t}function ym(r,t,e){var n;return ye(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=t.accounts[0].address,o=dm(Object.assign(Object.assign({},r),{domain:s,address:i})),a=yield e("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const nr=4;function bm(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(nr);return new DataView(t).setUint32(0,r,!1),new Uint8Array(t)}const Qo=12,Xl=65;function vm(r,t,e){return ye(this,void 0,void 0,function*(){const n=bm(t),s=new Uint8Array(Qo);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(tf(n,s),e,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function Ql(r,t){return ye(this,void 0,void 0,function*(){const e=r.slice(0,nr),n=r.slice(nr,nr+Qo),s=r.slice(nr+Qo),i=yield crypto.subtle.decrypt(tf(e,n),t,s);return Em().decode(i)})}function tf(r,t){return{additionalData:r,iv:t,name:"AES-GCM",tagLength:128}}let Co;function Em(){return Co===void 0&&(Co=new TextDecoder("utf-8")),Co}function _m(){return ye(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Lo(){return ye(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Sm(r){let t="";const e=new Uint8Array(r),n=e.byteLength;for(let s=0;s<n;s++)t+=String.fromCharCode(e[s]);return window.btoa(t)}function xm(){return ef(49152+Math.floor(Math.random()*(65535-49152+1)))}function ef(r){if(r<49152||r>65535)throw new kn(Rn.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Am(r){return r.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const Bm="solana-wallet";function jc(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Mm(r,t){let e=null;if(t){try{e=new URL(t)}catch{}if((e==null?void 0:e.protocol)!=="https:")throw new kn(Rn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${Bm}:/`));const n=r.startsWith("/")?r:[...jc(e.pathname),...jc(r)].join("/");return new URL(n,e)}function Im(r,t,e,n=["v1"]){return ye(this,void 0,void 0,function*(){const s=ef(t),i=yield crypto.subtle.exportKey("raw",r),o=Sm(i),a=Mm("v1/associate/local",e);return a.searchParams.set("association",Am(o)),a.searchParams.set("port",`${s}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}function Rm(r,t){return ye(this,void 0,void 0,function*(){const e=JSON.stringify(r),n=r.id;return vm(e,n,t)})}function km(r,t){return ye(this,void 0,void 0,function*(){const e=yield Ql(r,t),n=JSON.parse(e);if(Object.hasOwnProperty.call(n,"error"))throw new Jl(n.id,n.error.code,n.error.message);return n})}function Tm(r,t,e){return ye(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",r.slice(0,Xl),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},e,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Cm(r,t){return ye(this,void 0,void 0,function*(){const e=yield Ql(r,t),n=JSON.parse(e);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new kn(Rn.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const ms={Firefox:0,Other:1};function Lm(){return navigator.userAgent.indexOf("Firefox/")!==-1?ms.Firefox:ms.Other}function Nm(){return new Promise((r,t)=>{function e(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){e(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{e(),t()},3e3)})}let Zr=null;function Um(r){Zr==null&&(Zr=document.createElement("iframe"),Zr.style.display="none",document.body.appendChild(Zr)),Zr.contentWindow.location.href=r.toString()}function Om(r){return ye(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const t=Lm();switch(t){case ms.Firefox:Um(r);break;case ms.Other:{const e=Nm();window.location.assign(r),yield e;break}default:}}catch{throw new kn(Rn.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Pm(r,t){return ye(this,void 0,void 0,function*(){const e=xm(),n=yield Im(r,e,t);return yield Om(n),e})}const Hc={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Fm="com.solana.mobilewalletadapter.v1";function Wm(){if(typeof window>"u"||window.isSecureContext!==!0)throw new kn(Rn.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Dm(r){let t;try{t=new URL(r)}catch{throw new kn(Rn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new kn(Rn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Vc(r){return new DataView(r).getUint32(0,!1)}function zm(r,t){return ye(this,void 0,void 0,function*(){Wm();const e=yield _m(),s=`ws://localhost:${yield Pm(e.publicKey,t==null?void 0:t.baseUri)}/solana-wallet`;let i;const o=(()=>{const g=[...Hc.retryDelayScheduleMs];return()=>g.length>1?g.shift():g[0]})();let a=1,u=0,p={__type:"disconnected"};return new Promise((g,_)=>{let R;const y={},M=()=>ye(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}R.removeEventListener("open",M);const{associationKeypair:O}=p,q=yield Lo();R.send(yield To(q.publicKey,O.privateKey)),p={__type:"hello_req_sent",associationPublicKey:O.publicKey,ecdhPrivateKey:q.privateKey}}),I=O=>{O.wasClean?p={__type:"disconnected"}:_(new kn(Rn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${O.code}: ${O.reason}).`,{closeEvent:O})),C()},A=O=>ye(this,void 0,void 0,function*(){C(),Date.now()-i>=Hc.timeoutMs?_(new kn(Rn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(q=>{const j=o();L=window.setTimeout(q,j)}),W())}),T=O=>ye(this,void 0,void 0,function*(){const q=yield O.data.arrayBuffer();switch(p.__type){case"connecting":if(q.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const j=yield Lo();R.send(yield To(j.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:j.privateKey};break;case"connected":try{const G=q.slice(0,nr),D=Vc(G);if(D!==u+1)throw new Error("Encrypted message has invalid sequence number");u=D;const V=yield km(q,p.sharedSecret),K=y[V.id];delete y[V.id],K.resolve(V.result)}catch(G){if(G instanceof Jl){const D=y[G.jsonRpcMessageId];delete y[G.jsonRpcMessageId],D.reject(G)}else throw G}break;case"hello_req_sent":{if(q.byteLength===0){const H=yield Lo();R.send(yield To(H.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:H.privateKey};break}const G=yield Tm(q,p.associationPublicKey,p.ecdhPrivateKey),D=q.slice(Xl),V=D.byteLength!==0?yield(()=>ye(this,void 0,void 0,function*(){const H=D.slice(0,nr),b=Vc(H);if(b!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=b,Cm(D,G)}))():{protocol_version:"legacy"};p={__type:"connected",sharedSecret:G,sessionProperties:V};const K=gm(V.protocol_version,(H,b)=>ye(this,void 0,void 0,function*(){const c=a++;return R.send(yield Rm({id:c,jsonrpc:"2.0",method:H,params:b??{}},G)),new Promise((d,m)=>{y[c]={resolve(v){switch(H){case"authorize":case"reauthorize":{const{wallet_uri_base:S}=v;if(S!=null)try{Dm(S)}catch(k){m(k);return}break}}d(v)},reject:m}})}));try{g(yield r(K))}catch(H){_(H)}finally{C(),R.close()}break}}});let C,L;const W=()=>{C&&C(),p={__type:"connecting",associationKeypair:e},i===void 0&&(i=Date.now()),R=new WebSocket(s,[Fm]),R.addEventListener("open",M),R.addEventListener("close",I),R.addEventListener("error",A),R.addEventListener("message",T),C=()=>{window.clearTimeout(L),R.removeEventListener("open",M),R.removeEventListener("close",I),R.removeEventListener("error",A),R.removeEventListener("message",T)}};W()})})}function qm(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function g(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var M=0,I=0,A=0,T=y.length;A!==T&&y[A]===0;)A++,M++;for(var C=(T-A)*p+1>>>0,L=new Uint8Array(C);A!==T;){for(var W=y[A],O=0,q=C-1;(W!==0||O<I)&&q!==-1;q--,O++)W+=256*L[q]>>>0,L[q]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");I=O,A++}for(var j=C-I;j!==C&&L[j]===0;)j++;for(var G=a.repeat(M);j<C;++j)G+=r.charAt(L[j]);return G}function _(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;for(var M=0,I=0,A=0;y[M]===a;)I++,M++;for(var T=(y.length-M)*u+1>>>0,C=new Uint8Array(T);y[M];){var L=y.charCodeAt(M);if(L>255)return;var W=t[L];if(W===255)return;for(var O=0,q=T-1;(W!==0||O<A)&&q!==-1;q--,O++)W+=o*C[q]>>>0,C[q]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");A=O,M++}for(var j=T-A;j!==T&&C[j]===0;)j++;for(var G=new Uint8Array(I+(T-j)),D=I;j!==T;)G[D++]=C[j++];return G}function R(y){var M=_(y);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:g,decodeUnsafe:_,decode:R}}var Km=qm;const $m=Km,jm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Hm=$m(jm);const ta=wi(Hm);function No(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(e[n[s]]=r[n[s]]);return e}function Wi(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(_){o(_)}}function u(g){try{p(n.throw(g))}catch(_){o(_)}}function p(g){g.done?i(g.value):s(g.value).then(a,u)}p((n=n.apply(r,t||[])).next())})}function nf(r){return window.btoa(String.fromCharCode.call(null,...r))}function Uo(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function Gc(r){const t="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return nf(t)}function Vm(r){const e=r[0]*hi+1;return Cs.deserializeMessageVersion(r.slice(e,r.length))==="legacy"?Qe.from(r):$n.deserialize(r)}function Gm(r,t){return Wi(this,void 0,void 0,function*(){return yield zm(n=>r(Zm(n)),t)})}function Zm(r){return new Proxy({},{get(t,e){if(t[e]==null)switch(e){case"signAndSendTransactions":t[e]=function(n){var{minContextSlot:s,commitment:i,skipPreflight:o,maxRetries:a,waitForCommitmentToSendNextTransaction:u,transactions:p}=n,g=No(n,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Wi(this,void 0,void 0,function*(){const _=p.map(Gc),R={min_context_slot:s,commitment:i,skip_preflight:o,max_retries:a,wait_for_commitment_to_send_next_transaction:u},{signatures:y}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},g),Object.values(R).some(I=>I!=null)?{options:R}:null),{payloads:_}));return y.map(Uo).map(ta.encode)})};break;case"signMessages":t[e]=function(n){var{payloads:s}=n,i=No(n,["payloads"]);return Wi(this,void 0,void 0,function*(){const o=s.map(nf),{signed_payloads:a}=yield r.signMessages(Object.assign(Object.assign({},i),{payloads:o}));return a.map(Uo)})};break;case"signTransactions":t[e]=function(n){var{transactions:s}=n,i=No(n,["transactions"]);return Wi(this,void 0,void 0,function*(){const o=s.map(Gc),{signed_payloads:a}=yield r.signTransactions(Object.assign(Object.assign({},i),{payloads:o}));return a.map(Uo).map(Vm)})};break;default:{t[e]=r[e];break}}return t[e]},defineProperty(){return!1},deleteProperty(){return!1}})}function Ut(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(_){o(_)}}function u(g){try{p(n.throw(g))}catch(_){o(_)}}function p(g){g.done?i(g.value):s(g.value).then(a,u)}p((n=n.apply(r,t||[])).next())})}function Y(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function me(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e}var Xr,be,Hn,vr,rf,sf,of,Di;const Ym=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Jm=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,Xm=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Qm{constructor(){Xr.add(this),be.set(this,null),Hn.set(this,{}),vr.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),Y(this,Xr,"m",sf).call(this),Y(this,be,"f")&&(Y(this,be,"f").style.display="flex")},this.close=(t=void 0)=>{var e;console.debug("Modal close"),Y(this,Xr,"m",of).call(this),Y(this,be,"f")&&(Y(this,be,"f").style.display="none"),(e=Y(this,Hn,"f").close)===null||e===void 0||e.forEach(n=>n(t))},Di.set(this,t=>{t.key==="Escape"&&this.close(t)}),this.init=this.init.bind(this),me(this,be,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return Ut(this,void 0,void 0,function*(){console.log("Injecting modal"),Y(this,Xr,"m",rf).call(this)})}addEventListener(t,e){var n;return!((n=Y(this,Hn,"f")[t])===null||n===void 0)&&n.push(e)||(Y(this,Hn,"f")[t]=[e]),()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;Y(this,Hn,"f")[t]=(n=Y(this,Hn,"f")[t])===null||n===void 0?void 0:n.filter(s=>e!==s)}}be=new WeakMap,Hn=new WeakMap,vr=new WeakMap,Di=new WeakMap,Xr=new WeakSet,rf=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){Y(this,be,"f")||me(this,be,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}me(this,be,document.createElement("div"),"f"),Y(this,be,"f").id="mobile-wallet-adapter-embedded-root-ui",Y(this,be,"f").innerHTML=Ym,Y(this,be,"f").style.display="none";const t=Y(this,be,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");t&&(t.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent=Jm+this.contentStyles;const n=document.createElement("div");n.innerHTML=Xm,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(Y(this,be,"f")),document.body.appendChild(n)},sf=function(){if(!Y(this,be,"f")||Y(this,vr,"f"))return;[...Y(this,be,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e==null?void 0:e.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",Y(this,Di,"f")),me(this,vr,!0,"f")},of=function(){if(!Y(this,vr,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",Y(this,Di,"f")),!Y(this,be,"f")))return;[...Y(this,be,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e==null?void 0:e.removeEventListener("click",this.close)),me(this,vr,!1,"f")};const tw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function ew(r){return"version"in r}function nw(r){return window.btoa(String.fromCharCode.call(null,...r))}function Pi(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}var Er,rr,ea,na,ra,ia,Qr,Ue,En,On,_r,Sr,zi,ti,qi,sa,Ki,af,oa,$i,xr,aa,ei,ji,Ar,ni,Hi,ca,ua,Vi,la,fa,ha,Gi;const rw="Mobile Wallet Adapter",iw=64,sw=[De,Vt,Fn,ar];class ow{constructor(t){Er.add(this),rr.set(this,{}),ea.set(this,"1.0.0"),na.set(this,rw),ra.set(this,"https://solanamobile.com/wallets"),ia.set(this,tw),Qr.set(this,void 0),Ue.set(this,void 0),En.set(this,void 0),On.set(this,!1),_r.set(this,0),Sr.set(this,[]),zi.set(this,void 0),ti.set(this,void 0),qi.set(this,void 0),sa.set(this,(e,n)=>{var s;return!((s=Y(this,rr,"f")[e])===null||s===void 0)&&s.push(n)||(Y(this,rr,"f")[e]=[n]),()=>Y(this,Er,"m",af).call(this,e,n)}),oa.set(this,({silent:e}={})=>Ut(this,void 0,void 0,function*(){if(Y(this,On,"f")||this.connected)return{accounts:this.accounts};me(this,On,!0,"f");try{if(e){const n=yield Y(this,En,"f").get();if(n)yield Y(this,xr,"f").call(this,n);else return{accounts:this.accounts}}else yield Y(this,$i,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{me(this,On,!1,"f")}return{accounts:this.accounts}})),$i.set(this,e=>Ut(this,void 0,void 0,function*(){try{const n=yield Y(this,En,"f").get();if(n)return Y(this,xr,"f").call(this,n),n;const s=yield Y(this,zi,"f").select(Y(this,Sr,"f"));return yield Y(this,Ar,"f").call(this,i=>Ut(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:Y(this,Qr,"f"),sign_in_payload:e})]),u=Y(this,Hi,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:u,chain:s});return Promise.all([Y(this,aa,"f").call(this,o),Y(this,En,"f").set(p),Y(this,xr,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),xr.set(this,e=>Ut(this,void 0,void 0,function*(){var n;const s=Y(this,Ue,"f")==null||((n=Y(this,Ue,"f"))===null||n===void 0?void 0:n.accounts.length)!==e.accounts.length||Y(this,Ue,"f").accounts.some((i,o)=>i.address!==e.accounts[o].address);me(this,Ue,e,"f"),s&&Y(this,Er,"m",Ki).call(this,"change",{accounts:this.accounts})})),aa.set(this,e=>Ut(this,void 0,void 0,function*(){const n=e.features.includes("solana:signTransactions"),s=e.supports_sign_and_send_transactions,i=De in this.features!==s||Vt in this.features!==n;me(this,ti,Object.assign(Object.assign({},(s||!s&&!n)&&{[De]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Y(this,Vi,"f")}}),n&&{[Vt]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Y(this,la,"f")}}),"f"),i&&Y(this,Er,"m",Ki).call(this,"change",{features:this.features})})),ei.set(this,(e,n,s)=>Ut(this,void 0,void 0,function*(){try{const i=yield e.authorize({auth_token:n,identity:Y(this,Qr,"f"),chain:s}),o=Y(this,Hi,"f").call(this,i.accounts),a=Object.assign(Object.assign({},i),{accounts:o,chain:s});Promise.all([Y(this,En,"f").set(a),Y(this,xr,"f").call(this,a)])}catch(i){throw Y(this,ji,"f").call(this),new Error(i instanceof Error&&i.message||"Unknown error")}})),ji.set(this,()=>Ut(this,void 0,void 0,function*(){var e;Y(this,En,"f").clear(),me(this,On,!1,"f"),me(this,_r,(e=Y(this,_r,"f"),e++,e),"f"),me(this,Ue,void 0,"f"),Y(this,Er,"m",Ki).call(this,"change",{accounts:this.accounts})})),Ar.set(this,e=>Ut(this,void 0,void 0,function*(){var n;const s=(n=Y(this,Ue,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=Y(this,_r,"f");try{return yield Gm(e,i)}catch(a){throw Y(this,_r,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield Y(this,qi,"f").call(this,this)),a}})),ni.set(this,()=>{if(!Y(this,Ue,"f"))throw new Error("Wallet not connected");return{authToken:Y(this,Ue,"f").auth_token,chain:Y(this,Ue,"f").chain}}),Hi.set(this,e=>e.map(n=>{var s,i;const o=Pi(n.address);return{address:ta.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:Y(this,Sr,"f"),features:(i=n.features)!==null&&i!==void 0?i:sw}})),ca.set(this,e=>Ut(this,void 0,void 0,function*(){const{authToken:n,chain:s}=Y(this,ni,"f").call(this);try{return yield Y(this,Ar,"f").call(this,i=>Ut(this,void 0,void 0,function*(){return yield Y(this,ei,"f").call(this,i,n,s),yield i.signTransactions({transactions:e})}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),ua.set(this,(e,n)=>Ut(this,void 0,void 0,function*(){const{authToken:s,chain:i}=Y(this,ni,"f").call(this);try{return yield Y(this,Ar,"f").call(this,o=>Ut(this,void 0,void 0,function*(){const[a,u]=yield Promise.all([o.getCapabilities(),Y(this,ei,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{transactions:[e]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),Vi.set(this,(...e)=>Ut(this,void 0,void 0,function*(){const n=[];for(const s of e){const i=$n.deserialize(s.transaction),o=yield Y(this,ua,"f").call(this,i,s.options);n.push({signature:ta.decode(o)})}return n})),la.set(this,(...e)=>Ut(this,void 0,void 0,function*(){const n=e.map(({transaction:i})=>$n.deserialize(i));return(yield Y(this,ca,"f").call(this,n)).map(i=>({signedTransaction:ew(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),fa.set(this,(...e)=>Ut(this,void 0,void 0,function*(){const{authToken:n,chain:s}=Y(this,ni,"f").call(this),i=e.map(({account:a})=>nw(a.publicKey)),o=e.map(({message:a})=>a);try{return yield Y(this,Ar,"f").call(this,a=>Ut(this,void 0,void 0,function*(){return yield Y(this,ei,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).map(p=>({signedMessage:p,signature:p.slice(-iw)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),ha.set(this,(...e)=>Ut(this,void 0,void 0,function*(){const n=[];if(e.length>1)for(const s of e)n.push(yield Y(this,Gi,"f").call(this,s));else return[yield Y(this,Gi,"f").call(this,e[0])];return n})),Gi.set(this,e=>Ut(this,void 0,void 0,function*(){var n,s;me(this,On,!0,"f");try{const i=yield Y(this,$i,"f").call(this,Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(s=i.accounts.find(u=>u.address==o))!==null&&s!==void 0?s:{address:o}),{publicKey:Pi(o)}),signedMessage:Pi(i.sign_in_result.signed_message),signature:Pi(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{me(this,On,!1,"f")}})),me(this,En,t.authorizationCache,"f"),me(this,Qr,t.appIdentity,"f"),me(this,Sr,t.chains,"f"),me(this,zi,t.chainSelector,"f"),me(this,qi,t.onWalletNotFound,"f"),me(this,ti,{[De]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Y(this,Vi,"f")}},"f")}get version(){return Y(this,ea,"f")}get name(){return Y(this,na,"f")}get url(){return Y(this,ra,"f")}get icon(){return Y(this,ia,"f")}get chains(){return Y(this,Sr,"f")}get features(){return Object.assign({[Va]:{version:"1.0.0",connect:Y(this,oa,"f")},[Go]:{version:"1.0.0",disconnect:Y(this,ji,"f")},[Ga]:{version:"1.0.0",on:Y(this,sa,"f")},[Fn]:{version:"1.0.0",signMessage:Y(this,fa,"f")},[ar]:{version:"1.0.0",signIn:Y(this,ha,"f")}},Y(this,ti,"f"))}get accounts(){var t,e;return(e=(t=Y(this,Ue,"f"))===null||t===void 0?void 0:t.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!Y(this,Ue,"f")}get isAuthorized(){return!!Y(this,Ue,"f")}get currentAuthorization(){return Y(this,Ue,"f")}get cachedAuthorizationResult(){return Y(this,En,"f").get()}}rr=new WeakMap,ea=new WeakMap,na=new WeakMap,ra=new WeakMap,ia=new WeakMap,Qr=new WeakMap,Ue=new WeakMap,En=new WeakMap,On=new WeakMap,_r=new WeakMap,Sr=new WeakMap,zi=new WeakMap,ti=new WeakMap,qi=new WeakMap,sa=new WeakMap,oa=new WeakMap,$i=new WeakMap,xr=new WeakMap,aa=new WeakMap,ei=new WeakMap,ji=new WeakMap,Ar=new WeakMap,ni=new WeakMap,Hi=new WeakMap,ca=new WeakMap,ua=new WeakMap,Vi=new WeakMap,la=new WeakMap,fa=new WeakMap,ha=new WeakMap,Gi=new WeakMap,Er=new WeakSet,Ki=function(t,...e){var n;(n=Y(this,rr,"f")[t])===null||n===void 0||n.forEach(s=>s.apply(null,e))},af=function(t,e){var n;Y(this,rr,"f")[t]=(n=Y(this,rr,"f")[t])===null||n===void 0?void 0:n.filter(s=>e!==s)};const aw="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",cw="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class uw extends Qm{constructor(){super(...arguments),this.contentStyles=fw,this.contentHtml=lw}initWithError(t){super.init(),this.populateError(t)}populateError(t){var e,n;const s=(e=this.dom)===null||e===void 0?void 0:e.getElementById("mobile-wallet-adapter-error-message"),i=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(s){if(t.name==="SolanaMobileWalletAdapterError")switch(t.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=aw,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=cw,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${t.message}`}else console.log("Failed to locate error dialog element")}}const lw=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,fw=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function hw(){return Ut(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),t=new uw;r.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}const Oo="SolanaMobileWalletAdapterDefaultAuthorizationCache";function dw(){let r;try{r=window.localStorage}catch{}return{clear(){return Ut(this,void 0,void 0,function*(){if(r)try{r.removeItem(Oo)}catch{}})},get(){return Ut(this,void 0,void 0,function*(){if(r)try{const t=JSON.parse(r.getItem(Oo));if(t&&t.accounts){const e=t.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):new lt(n.address).toBytes()}));return Object.assign(Object.assign({},t),{accounts:e})}else return t||void 0}catch{}})},set(t){return Ut(this,void 0,void 0,function*(){if(r)try{r.setItem(Oo,JSON.stringify(t))}catch{}})}}}function pw(){return{select(r){return Ut(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(gs)?gs:r[0]})}}}function It(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(g){try{p(n.next(g))}catch(_){o(_)}}function u(g){try{p(n.throw(g))}catch(_){o(_)}}function p(g){g.done?i(g.value):s(g.value).then(a,u)}p((n=n.apply(r,t||[])).next())})}function ct(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function Ke(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e}const da="standard:connect",gw="standard:disconnect",mw="standard:events";function Po(r){return window.btoa(String.fromCharCode.call(null,...r))}function ww(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var ve,Wt,Wn,Bn,Zi,Sn,Vn,pa,ga,cf,ws,Yi,Pn;const Ji="Mobile Wallet Adapter",yw=64;function bw(r){return"version"in r}function uf(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class vw extends pg{constructor(t,e){super(),ve.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Wt.set(this,void 0),Wn.set(this,!1),Bn.set(this,ww()?Jt.Loadable:Jt.Unsupported),Zi.set(this,void 0),Sn.set(this,void 0),Vn.set(this,void 0),pa.set(this,n=>It(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){ct(this,ve,"m",cf).call(this);const s=yield ct(this,Zi,"f").call(this,n.accounts);s!==ct(this,Sn,"f")&&(Ke(this,Sn,s,"f"),Ke(this,Vn,void 0,"f"),this.emit("connect",this.publicKey))}})),Ke(this,Zi,n=>It(this,void 0,void 0,function*(){var s;const i=yield e.addressSelector.select(n.map(({publicKey:o})=>Po(o)));return(s=n.find(({publicKey:o})=>Po(o)===i))!==null&&s!==void 0?s:n[0]}),"f"),Ke(this,Wt,t,"f"),ct(this,Wt,"f").features[mw].on("change",ct(this,pa,"f")),this.name=ct(this,Wt,"f").name,this.icon=ct(this,Wt,"f").icon,this.url=ct(this,Wt,"f").url}get publicKey(){var t;if(!ct(this,Vn,"f")&&ct(this,Sn,"f"))try{Ke(this,Vn,new lt(ct(this,Sn,"f").publicKey),"f")}catch(e){throw new Tl(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return(t=ct(this,Vn,"f"))!==null&&t!==void 0?t:null}get connected(){return ct(this,Wt,"f").connected}get connecting(){return ct(this,Wn,"f")}get readyState(){return ct(this,Bn,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return It(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return It(this,void 0,void 0,function*(){ct(this,ve,"m",ga).call(this,!0)})}connect(){return It(this,void 0,void 0,function*(){ct(this,ve,"m",ga).call(this)})}performAuthorization(t){return It(this,void 0,void 0,function*(){try{const e=yield ct(this,Wt,"f").cachedAuthorizationResult;return e?(yield ct(this,Wt,"f").features[da].connect({silent:!0}),e):(t?yield ct(this,Wt,"f").features[ar].signIn(t):yield ct(this,Wt,"f").features[da].connect(),yield yield ct(this,Wt,"f").cachedAuthorizationResult)}catch(e){throw new hs(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){Ke(this,Wn,!1,"f"),Ke(this,Vn,void 0,"f"),Ke(this,Sn,void 0,"f"),yield ct(this,Wt,"f").features[gw].disconnect(),this.emit("disconnect")}))})}signIn(t){return It(this,void 0,void 0,function*(){return ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){var e;if(ct(this,Bn,"f")!==Jt.Installed&&ct(this,Bn,"f")!==Jt.Loadable)throw new gi;Ke(this,Wn,!0,"f");try{const n=yield ct(this,Wt,"f").features[ar].signIn(Object.assign(Object.assign({},t),{domain:(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new hs(n instanceof Error&&n.message||"Unknown error",n)}finally{Ke(this,Wn,!1,"f")}}))})}signMessage(t){return It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){const e=ct(this,ve,"m",ws).call(this);try{return(yield ct(this,Wt,"f").features[Fn].signMessage({account:e,message:t}))[0].signature}catch(n){throw new Cl(n==null?void 0:n.message,n)}}))})}sendTransaction(t,e,n){return It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){const s=ct(this,ve,"m",ws).call(this);try{let i=function(){let o;switch(e.commitment){case"confirmed":case"finalized":case"processed":o=e.commitment;break;default:o="finalized"}let a;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(De in ct(this,Wt,"f").features){const o=uf(ct(this,Wt,"f").currentAuthorization.chain),[a]=(yield ct(this,Wt,"f").features[De].signAndSendTransaction({account:s,transaction:t.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(u=>Po(u.signature));return a}else{const[o]=yield ct(this,ve,"m",Yi).call(this,[t]);if(bw(o))return yield e.sendTransaction(o);{const a=o.serialize();return yield e.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new Qn(i==null?void 0:i.message,i)}}))})}signTransaction(t){return It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){const[e]=yield ct(this,ve,"m",Yi).call(this,[t]);return e}))})}signAllTransactions(t){return It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){return yield ct(this,ve,"m",Yi).call(this,t)}))})}}Wt=new WeakMap,Wn=new WeakMap,Bn=new WeakMap,Zi=new WeakMap,Sn=new WeakMap,Vn=new WeakMap,pa=new WeakMap,ve=new WeakSet,ga=function(t=!1){return It(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield ct(this,ve,"m",Pn).call(this,()=>It(this,void 0,void 0,function*(){if(ct(this,Bn,"f")!==Jt.Installed&&ct(this,Bn,"f")!==Jt.Loadable)throw new gi;Ke(this,Wn,!0,"f");try{yield ct(this,Wt,"f").features[da].connect({silent:t})}catch(e){throw new hs(e instanceof Error&&e.message||"Unknown error",e)}finally{Ke(this,Wn,!1,"f")}}))})},cf=function(){ct(this,Bn,"f")!==Jt.Installed&&this.emit("readyStateChange",Ke(this,Bn,Jt.Installed,"f"))},ws=function(){if(!ct(this,Wt,"f").isAuthorized||!ct(this,Sn,"f"))throw new ln;return ct(this,Sn,"f")},Yi=function(t){return It(this,void 0,void 0,function*(){const e=ct(this,ve,"m",ws).call(this);try{if(Vt in ct(this,Wt,"f").features)return ct(this,Wt,"f").features[Vt].signTransaction(...t.map(n=>({account:e,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,a=i[0]*yw+1;return Cs.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?Qe.from(i):$n.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new tr(n==null?void 0:n.message,n)}})},Pn=function(t){return It(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class Ew extends vw{constructor(t){var e;const n=uf((e=t.chain)!==null&&e!==void 0?e:t.cluster);super(new ow({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>It(this,void 0,void 0,function*(){const s=yield t.authorizationResultCache.get();return s&&"chain"in s?s:s?Object.assign(Object.assign({},s),{chain:n}):void 0}),clear:t.authorizationResultCache.clear},chains:[n],chainSelector:pw(),onWalletNotFound:()=>It(this,void 0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:n})}}class _w extends Ew{}function Sw(){return{select(r){return It(this,void 0,void 0,function*(){return r[0]})}}}function xw(){return dw()}function Aw(r){return It(this,void 0,void 0,function*(){return hw()})}function Bw(){return Aw}var Mw=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},Iw=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},Xi;function fy(r){const t=({register:e})=>e(r);try{window.dispatchEvent(new Rw(t))}catch(e){console.error(`wallet-standard:register-wallet event could not be dispatched
`,e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error(`wallet-standard:app-ready event listener could not be added
`,e)}}class Rw extends Event{get detail(){return Mw(this,Xi,"f")}get type(){return"wallet-standard:register-wallet"}constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Xi.set(this,void 0),Iw(this,Xi,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Xi=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function kw(r,t){if(r===t)return!0;const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}function Tw(r){if(r.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let p=0;p<t.length;p++)t[p]=255;for(let p=0;p<r.length;p++){const g=r.charAt(p),_=g.charCodeAt(0);if(t[_]!==255)throw new TypeError(g+" is ambiguous");t[_]=p}const e=r.length,n=r.charAt(0),s=Math.log(e)/Math.log(256),i=Math.log(256)/Math.log(e);function o(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let g=0,_=0,R=0;const y=p.length;for(;R!==y&&p[R]===0;)R++,g++;const M=(y-R)*i+1>>>0,I=new Uint8Array(M);for(;R!==y;){let C=p[R],L=0;for(let W=M-1;(C!==0||L<_)&&W!==-1;W--,L++)C+=256*I[W]>>>0,I[W]=C%e>>>0,C=C/e>>>0;if(C!==0)throw new Error("Non-zero carry");_=L,R++}let A=M-_;for(;A!==M&&I[A]===0;)A++;let T=n.repeat(g);for(;A<M;++A)T+=r.charAt(I[A]);return T}function a(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let g=0,_=0,R=0;for(;p[g]===n;)_++,g++;const y=(p.length-g)*s+1>>>0,M=new Uint8Array(y);for(;g<p.length;){const C=p.charCodeAt(g);if(C>255)return;let L=t[C];if(L===255)return;let W=0;for(let O=y-1;(L!==0||W<R)&&O!==-1;O--,W++)L+=e*M[O]>>>0,M[O]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");R=W,g++}let I=y-R;for(;I!==y&&M[I]===0;)I++;const A=new Uint8Array(_+(y-I));let T=_;for(;I!==y;)A[T++]=M[I++];return A}function u(p){const g=a(p);if(g)return g;throw new Error("Non-base"+e+" character")}return{encode:o,decodeUnsafe:a,decode:u}}var Cw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Lw=Tw(Cw);var st=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},we=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},Se,Fe,ir,sr,Gn,ri,ys,Et,bs,ma,Qi,wa,ci,ya,Zc,Yc,Jc,Xc;class Nw extends Ll{get name(){return st(this,Et,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return st(this,Et,"f").icon}get readyState(){return st(this,bs,"f")}get publicKey(){return st(this,ir,"f")}get connecting(){return st(this,sr,"f")}get supportedTransactionVersions(){return st(this,ys,"f")}get wallet(){return st(this,Et,"f")}get standard(){return!0}constructor({wallet:t}){super(),Se.add(this),Fe.set(this,void 0),ir.set(this,void 0),sr.set(this,void 0),Gn.set(this,void 0),ri.set(this,void 0),ys.set(this,void 0),Et.set(this,void 0),bs.set(this,typeof window>"u"||typeof document>"u"?Jt.Unsupported:Jt.Installed),ya.set(this,e=>{if("accounts"in e){const n=st(this,Et,"f").accounts[0];st(this,Fe,"f")&&!st(this,Gn,"f")&&n!==st(this,Fe,"f")&&(n?st(this,Se,"m",Qi).call(this,n):(this.emit("error",new lg),st(this,Se,"m",wa).call(this)))}"features"in e&&st(this,Se,"m",ci).call(this)}),we(this,Et,t,"f"),we(this,Fe,null,"f"),we(this,ir,null,"f"),we(this,sr,!1,"f"),we(this,Gn,!1,"f"),we(this,ri,st(this,Et,"f").features[Ga].on("change",st(this,ya,"f")),"f"),st(this,Se,"m",ci).call(this)}destroy(){we(this,Fe,null,"f"),we(this,ir,null,"f"),we(this,sr,!1,"f"),we(this,Gn,!1,"f");const t=st(this,ri,"f");t&&(we(this,ri,null,"f"),t())}async autoConnect(){return st(this,Se,"m",ma).call(this,{silent:!0})}async connect(){return st(this,Se,"m",ma).call(this)}async disconnect(){if(Go in st(this,Et,"f").features)try{we(this,Gn,!0,"f"),await st(this,Et,"f").features[Go].disconnect()}catch(t){this.emit("error",new fg(t==null?void 0:t.message,t))}finally{we(this,Gn,!1,"f")}st(this,Se,"m",wa).call(this)}async sendTransaction(t,e,n={}){try{const s=st(this,Fe,"f");if(!s)throw new ln;let i;if(De in st(this,Et,"f").features)if(s.features.includes(De))i=De;else if(Vt in st(this,Et,"f").features&&s.features.includes(Vt))i=Vt;else throw new Ir;else if(Vt in st(this,Et,"f").features){if(!s.features.includes(Vt))throw new Ir;i=Vt}else throw new Jr;const o=um(e.rpcEndpoint);if(!s.chains.includes(o))throw new Qn;try{const{signers:a,...u}=n;let p;if(er(t)?(a!=null&&a.length&&t.sign(a),p=t.serialize()):(t=await this.prepareTransaction(t,e,u),a!=null&&a.length&&t.partialSign(...a),p=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===De){const[g]=await st(this,Et,"f").features[De].signAndSendTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:ko(u.preflightCommitment||e.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return Lw.encode(g.signature)}else{const[g]=await st(this,Et,"f").features[Vt].signTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:ko(u.preflightCommitment||e.commitment),minContextSlot:u.minContextSlot}});return await e.sendRawTransaction(g.signedTransaction,{...u,preflightCommitment:ko(u.preflightCommitment||e.commitment)})}}catch(a){throw a instanceof Le?a:new Qn(a==null?void 0:a.message,a)}}catch(s){throw this.emit("error",s),s}}}Fe=new WeakMap,ir=new WeakMap,sr=new WeakMap,Gn=new WeakMap,ri=new WeakMap,ys=new WeakMap,Et=new WeakMap,bs=new WeakMap,ya=new WeakMap,Se=new WeakSet,ma=async function(t){try{if(this.connected||this.connecting)return;if(st(this,bs,"f")!==Jt.Installed)throw new gi;if(we(this,sr,!0,"f"),!st(this,Et,"f").accounts.length)try{await st(this,Et,"f").features[Va].connect(t)}catch(n){throw new hs(n==null?void 0:n.message,n)}const e=st(this,Et,"f").accounts[0];if(!e)throw new Ir;st(this,Se,"m",Qi).call(this,e)}catch(e){throw this.emit("error",e),e}finally{we(this,sr,!1,"f")}},Qi=function(t){let e;try{e=new lt(t.address)}catch(n){throw new Tl(n==null?void 0:n.message,n)}we(this,Fe,t,"f"),we(this,ir,e,"f"),st(this,Se,"m",ci).call(this),this.emit("connect",e)},wa=function(){we(this,Fe,null,"f"),we(this,ir,null,"f"),st(this,Se,"m",ci).call(this),this.emit("disconnect")},ci=function(){var e,n;const t=De in st(this,Et,"f").features?st(this,Et,"f").features[De].supportedTransactionVersions:st(this,Et,"f").features[Vt].supportedTransactionVersions;we(this,ys,kw(t,["legacy"])?null:new Set(t),"f"),Vt in st(this,Et,"f").features&&((e=st(this,Fe,"f"))!=null&&e.features.includes(Vt))?(this.signTransaction=st(this,Se,"m",Zc),this.signAllTransactions=st(this,Se,"m",Yc)):(delete this.signTransaction,delete this.signAllTransactions),Fn in st(this,Et,"f").features&&((n=st(this,Fe,"f"))!=null&&n.features.includes(Fn))?this.signMessage=st(this,Se,"m",Jc):delete this.signMessage,ar in st(this,Et,"f").features?this.signIn=st(this,Se,"m",Xc):delete this.signIn},Zc=async function(t){try{const e=st(this,Fe,"f");if(!e)throw new ln;if(!(Vt in st(this,Et,"f").features))throw new Jr;if(!e.features.includes(Vt))throw new Ir;try{const s=(await st(this,Et,"f").features[Vt].signTransaction({account:e,transaction:er(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return er(t)?$n.deserialize(s):Qe.from(s)}catch(n){throw n instanceof Le?n:new tr(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Yc=async function(t){try{const e=st(this,Fe,"f");if(!e)throw new ln;if(!(Vt in st(this,Et,"f").features))throw new Jr;if(!e.features.includes(Vt))throw new Ir;try{const n=await st(this,Et,"f").features[Vt].signTransaction(...t.map(s=>({account:e,transaction:er(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((s,i)=>{const o=n[i].signedTransaction;return er(s)?$n.deserialize(o):Qe.from(o)})}catch(n){throw new tr(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Jc=async function(t){try{const e=st(this,Fe,"f");if(!e)throw new ln;if(!(Fn in st(this,Et,"f").features))throw new Jr;if(!e.features.includes(Fn))throw new Ir;try{return(await st(this,Et,"f").features[Fn].signMessage({account:e,message:t}))[0].signature}catch(n){throw new Cl(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Xc=async function(t={}){try{if(!(ar in st(this,Et,"f").features))throw new Jr;let e;try{[e]=await st(this,Et,"f").features[ar].signIn(t)}catch(n){throw new Fc(n==null?void 0:n.message,n)}if(!e)throw new Fc;return st(this,Se,"m",Qi).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const Uw=gg;var Ow=globalThis&&globalThis.__classPrivateFieldGet||function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},Pw=globalThis&&globalThis.__classPrivateFieldSet||function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},ts;let $e;const Ds=new Set;function Fw(r){ui=void 0,Ds.add(r)}function Ww(r){ui=void 0,Ds.delete(r)}const Rr={};function Dw(){if($e||($e=Object.freeze({register:Qc,get:zw,on:qw}),typeof window>"u"))return $e;const r=Object.freeze({register:Qc});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(r))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new Kw(r))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return $e}function Qc(...r){var t;return r=r.filter(e=>!Ds.has(e)),r.length?(r.forEach(e=>Fw(e)),(t=Rr.register)==null||t.forEach(e=>ba(()=>e(...r))),function(){var n;r.forEach(s=>Ww(s)),(n=Rr.unregister)==null||n.forEach(s=>ba(()=>s(...r)))}):()=>{}}let ui;function zw(){return ui||(ui=[...Ds]),ui}function qw(r,t){var e;return(e=Rr[r])!=null&&e.push(t)||(Rr[r]=[t]),function(){var s;Rr[r]=(s=Rr[r])==null?void 0:s.filter(i=>t!==i)}}function ba(r){try{r()}catch(t){console.error(t)}}class Kw extends Event{get detail(){return Ow(this,ts,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ts.set(this,void 0),Pw(this,ts,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ts=new WeakMap;function $w(){if($e||($e=Dw(),typeof window>"u"))return $e;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),$e;const{register:t}=$e,e=(...n)=>n.forEach(s=>ba(()=>s({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),$e}return e(...r),$e}function jw(r){const t=tu(()=>new Set),{get:e,on:n}=tu(()=>$w()),[s,i]=ft.useState(()=>eu(e()));ft.useEffect(()=>{const a=[n("register",(...u)=>i(p=>[...p,...eu(u)])),n("unregister",(...u)=>i(p=>p.filter(g=>u.some(_=>_===g.wallet))))];return()=>a.forEach(u=>u())},[n]);const o=Hw(s);return ft.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(p=>!a.has(p))).forEach(p=>p.destroy())},[o,s]),ft.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),ft.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(u=>u.name===a)?(t.has(a)||(t.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,t])}function tu(r){const t=ft.useRef(void 0);return t.current===void 0&&(t.current={value:r()}),t.current.value}function Hw(r){const t=ft.useRef(void 0);return ft.useEffect(()=>{t.current=r}),t.current}function eu(r){return r.filter(Uw).map(t=>new Nw({wallet:t}))}var Cr;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(Cr||(Cr={}));function Vw(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Gw({adapters:r,userAgentString:t}){return r.some(e=>e.name!==Ji&&e.readyState===Jt.Installed)?Cr.DESKTOP_WEB:t&&/android/i.test(t)&&!Vw(t)?Cr.MOBILE_WEB:Cr.DESKTOP_WEB}function Zw(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Yw({children:r,wallets:t,adapter:e,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const u=ft.useRef(!1),[p,g]=ft.useState(!1),_=ft.useRef(!1),[R,y]=ft.useState(!1),[M,I]=ft.useState(()=>(e==null?void 0:e.publicKey)??null),[A,T]=ft.useState(()=>(e==null?void 0:e.connected)??!1),C=ft.useRef(o);ft.useEffect(()=>(C.current=o,()=>{C.current=void 0}),[o]);const L=ft.useRef((d,m)=>(n.current||(C.current?C.current(d,m):(console.error(d,m),d instanceof gi&&typeof window<"u"&&m&&window.open(m.url,"_blank"))),d)),[W,O]=ft.useState(()=>t.map(d=>({adapter:d,readyState:d.readyState})).filter(({readyState:d})=>d!==Jt.Unsupported));ft.useEffect(()=>{O(m=>t.map((v,S)=>{const k=m[S];return k&&k.adapter===v&&k.readyState===v.readyState?k:{adapter:v,readyState:v.readyState}}).filter(({readyState:v})=>v!==Jt.Unsupported));function d(m){O(v=>{const S=v.findIndex(({adapter:N})=>N===this);if(S===-1)return v;const{adapter:k}=v[S];return[...v.slice(0,S),{adapter:k,readyState:m},...v.slice(S+1)].filter(({readyState:N})=>N!==Jt.Unsupported)})}return t.forEach(m=>m.on("readyStateChange",d,m)),()=>{t.forEach(m=>m.off("readyStateChange",d,m))}},[e,t]);const q=ft.useMemo(()=>W.find(d=>d.adapter===e)??null,[e,W]);ft.useEffect(()=>{if(!e)return;const d=S=>{I(S),u.current=!1,g(!1),T(!0),_.current=!1,y(!1)},m=()=>{n.current||(I(null),u.current=!1,g(!1),T(!1),_.current=!1,y(!1))},v=S=>{L.current(S,e)};return e.on("connect",d),e.on("disconnect",m),e.on("error",v),()=>{e.off("connect",d),e.off("disconnect",m),e.off("error",v),m()}},[e,n]);const j=ft.useRef(!1);ft.useEffect(()=>()=>{j.current=!1},[e]),ft.useEffect(()=>{j.current||u.current||A||!s||!((q==null?void 0:q.readyState)===Jt.Installed||(q==null?void 0:q.readyState)===Jt.Loadable)||(u.current=!0,g(!0),j.current=!0,async function(){try{await s()}catch{i()}finally{g(!1),u.current=!1}}())},[A,s,i,q]);const G=ft.useCallback(async(d,m,v)=>{if(!e)throw L.current(new Dc);if(!A)throw L.current(new ln,e);return await e.sendTransaction(d,m,v)},[e,A]),D=ft.useMemo(()=>e&&"signTransaction"in e?async d=>{if(!A)throw L.current(new ln,e);return await e.signTransaction(d)}:void 0,[e,A]),V=ft.useMemo(()=>e&&"signAllTransactions"in e?async d=>{if(!A)throw L.current(new ln,e);return await e.signAllTransactions(d)}:void 0,[e,A]),K=ft.useMemo(()=>e&&"signMessage"in e?async d=>{if(!A)throw L.current(new ln,e);return await e.signMessage(d)}:void 0,[e,A]),H=ft.useMemo(()=>e&&"signIn"in e?async d=>await e.signIn(d):void 0,[e]),b=ft.useCallback(async()=>{if(u.current||_.current||q!=null&&q.adapter.connected)return;if(!q)throw L.current(new Dc);const{adapter:d,readyState:m}=q;if(!(m===Jt.Installed||m===Jt.Loadable))throw L.current(new gi,d);u.current=!0,g(!0);try{await d.connect()}catch(v){throw i(),v}finally{g(!1),u.current=!1}},[i,q]),c=ft.useCallback(async()=>{if(!_.current&&e){_.current=!0,y(!0);try{await e.disconnect()}finally{y(!1),_.current=!1}}},[e]);return Ea.createElement(Nl.Provider,{value:{autoConnect:!!s,wallets:W,wallet:q,publicKey:M,connected:A,connecting:p,disconnecting:R,select:a,connect:b,disconnect:c,sendTransaction:G,signTransaction:D,signAllTransactions:V,signMessage:K,signIn:H}},r)}let Fo;function Jw(){var r;return Fo===void 0&&(Fo=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),Fo}function nu(r){const t=Jw();return Gw({adapters:r,userAgentString:t})===Cr.MOBILE_WEB}function Xw(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function hy({children:r,wallets:t,autoConnect:e,localStorageKey:n="walletName",onError:s}){const{connection:i}=ug(),o=jw(t),a=ft.useMemo(()=>{if(!nu(o))return null;const C=o.find(L=>L.name===Ji);return C||new _w({addressSelector:Sw(),appIdentity:{uri:Xw()},authorizationResultCache:xw(),cluster:Zw(i==null?void 0:i.rpcEndpoint),onWalletNotFound:Bw()})},[o,i==null?void 0:i.rpcEndpoint]),u=ft.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[p,g]=wg(n,null),_=ft.useMemo(()=>u.find(C=>C.name===p)??null,[u,p]),R=ft.useCallback(C=>{p!==C&&(_&&_.name!==Ji&&_.disconnect(),g(C))},[_,g,p]);ft.useEffect(()=>{if(!_)return;function C(){I.current||g(null)}return _.on("disconnect",C),()=>{_.off("disconnect",C)}},[_,o,g,p]);const y=ft.useRef(!1),M=ft.useMemo(()=>{if(!(!e||!_))return async()=>{(e===!0||await e(_))&&(y.current?await _.connect():await _.autoConnect())}},[e,_]),I=ft.useRef(!1);ft.useEffect(()=>{if(p===Ji&&nu(o)){I.current=!1;return}function C(){I.current=!0}return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[o,p]);const A=ft.useCallback(()=>{_&&R(null)},[_,R]),T=ft.useCallback(C=>{y.current=!0,R(C)},[R]);return Ea.createElement(Yw,{wallets:u,adapter:_,isUnloadingRef:I,onAutoConnectRequest:M,onConnectError:A,onError:s,onSelectWallet:T},r)}export{Wc as A,dg as B,iy as C,oy as D,hy as E,cg as F,Qe as G,Eh as H,za as I,ta as J,sy as L,lt as P,gs as S,Mc as T,$n as V,Jt as W,lg as a,Tl as b,gi as c,hs as d,Ir as e,fg as f,ln as g,er as h,uy as i,Le as j,Qn as k,tr as l,Cl as m,sm as n,om as o,Va as p,Go as q,Ga as r,cy as s,De as t,ly as u,Vt as v,Fn as w,fy as x,ay as y,Jr as z};
//# sourceMappingURL=wallet-4b7719c7.js.map
